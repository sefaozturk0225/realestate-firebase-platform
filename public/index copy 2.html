<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bozkurt ƒ∞n≈üaat | ƒ∞zmir'in Prestijli Konut ve Ticari Projeleri</title>
    
    <!-- ‚úÖ SEO Meta Etiketleri -->
    <meta name="description" content="Bozkurt ƒ∞n≈üaat olarak ƒ∞zmir'de 20 yƒ±llƒ±k tecr√ºbeyle l√ºks konutlar in≈üa ediyoruz. Modern tasarƒ±m, deprem g√ºvenliƒüi ve zamanƒ±nda teslimat garantisi.">
    <meta name="keywords" content="bozkurt in≈üaat,bzk,yapƒ±,m√ºteahhit,taahh√ºt">
    <meta name="author" content="Bozkurt ƒ∞n≈üaat">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.bzkyapi.com/">

    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
     <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Bozkurt ƒ∞n≈üaat",
      "url": "https://www.bzkyapi.com",
      "logo": "https://www.bzkyapi.com/logo.png",
      "description": "ƒ∞zmir'de l√ºks konut ve ticari in≈üaat projeleri",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "ƒ∞zmir",
        "addressCountry": "TR"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+90-232-XXX-XX-XX",
        "contactType": "Customer Service",
        "areaServed": "TR",
        "availableLanguage": "Turkish"
      }
    }
    </script>
    <!-- Tailwind CSS Y√ºklemesi -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
    // ...
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    // ...
    </script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* ƒ∞nter Fontu ve Ana Renkler */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
             
        }
        html{
            scroll-behavior: smooth;
        }
        .elite-bg { background-color: #0F172A; }
        .elite-text { color: #FACC15; }
        .elite-border { border-color: #FACC15; }
        .section-separator {
            content: '';
            display: block;
            width: 80px;
            height: 3px;
            background-color: #FACC15;
            margin: 1rem 0;
            border-radius: 9999px;
        }

        /* Hero ve Genel Efektler */
        .hero-pin-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background-color: #1E293B; /* Sadece d√ºz koyu renk arka plan */
            z-index: -1;
        }
        .hero-vignette {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4);
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8); 
        }
        .content-overlay { position: relative; z-index: 10; }

        .horizontal-scroll-container {
    display: flex;
    cursor: grab;
    overflow-x: scroll;
    overflow-y: hidden;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    -ms-overflow-style: none; 
    scrollbar-width: none;
    gap: 1.5rem;
    padding: 0 calc((100vw - (100vw - 3rem)) / 2); /* Ortalama i√ßin dinamik padding */
    -webkit-overflow-scrolling: touch;
    scroll-padding: calc((100vw - (100vw - 3rem)) / 2);
}

.horizontal-scroll-container:active {
    cursor: grabbing;
}

.horizontal-scroll-container::-webkit-scrollbar {
    display: none;
}

/* ‚úÖ MOBƒ∞L: Tek kart - ekrana sƒ±ƒüacak ≈üekilde, TAM ORTALANMI≈û */
.scroll-snap-card { 
    flex: 0 0 calc(100vw - 4rem);
    min-width: calc(100vw - 4rem);
    max-width: 450px;
    scroll-snap-align: center; /* TAM ORTADA */
    scroll-snap-stop: always; /* Her kartta kesinlikle dur */
    margin: 0 0.75rem; /* Ek bo≈üluk */
}

/* ‚úÖ TABLET i√ßin 3 s√ºtun GRID LAYOUT (768px - 1023px) */
@media (min-width: 768px) {
    .horizontal-scroll-container {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        overflow-x: visible;
        overflow-y: visible;
        cursor: default;
        padding: 0 2rem;
        scroll-snap-type: none;
        scroll-padding: 0;
    }
    
    .scroll-snap-card { 
        flex: none;
        width: 100%;
        min-width: auto;
        max-width: none;
        scroll-snap-align: unset;
        scroll-snap-stop: unset;
    }
}

/* ‚úÖ MASA√úST√ú i√ßin 4 s√ºtun GRID LAYOUT (1024px+) */
@media (min-width: 1024px) {
    .horizontal-scroll-container {
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 3rem;
    }
}

/* ‚úÖ √áok b√ºy√ºk ekranlar i√ßin (1536px+) */
@media (min-width: 1536px) {
    .horizontal-scroll-container {
        max-width: 1600px;
        gap: 2.5rem;
    }
}

        .modal-open { overflow: hidden; }

        /* Admin Paneli √ñzel Stilleri */
        .admin-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 300; /* Her ≈üeyin √ºzerinde */
            background-color: #1E293B; /* Koyu Mavi Arkaplan */
            transition: opacity 0.5s ease;
            overflow-y: auto;
        }
        /* Gizleme/G√∂nderme Sƒ±nƒ±flarƒ± */
        .hidden-view {
            display: none;
            opacity: 0;
        }
        .visible-view {
            display: block;
            opacity: 1;
        }
        /* Drag & Drop Alanƒ± Stilleri */
        #image-drop-zone {
            border: 2px dashed #475569; 
            background-color: #1E293B; 
            transition: all 0.2s;
        }
        #image-drop-zone.dragover {
            border-color: #FACC15;
            background-color: #334155;
        }
        .preview-image-container {
            position: relative;
            width: 80px;
            height: 80px;
            /* Placeholder i√ßin arka plan rengi ekledim */
            background-color: #475569; 
        }
        .preview-image-container img {
             object-fit: cover;
        }
        .remove-image-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ef4444;
            color: white;
            border-radius: 9999px;
            width: 20px;
            height: 20px;
            line-height: 1;
            font-weight: bold;
            text-align: center;
        }
        /* ‚úÖ Mobil ƒ∞yile≈ütirmeleri */
@media (max-width: 768px) {
    /* Hero b√∂l√ºm√º ta≈üma d√ºzeltmesi */
    section.min-h-screen {
        min-height: 100vh;
        min-height: 100dvh; /* Modern mobil tarayƒ±cƒ±lar i√ßin */
        padding-top: 4rem; /* Navbar y√ºksekliƒüi kadar */
    }
    
    /* Hero i√ßerik d√ºzeltmesi */
    section.min-h-screen .container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    section.min-h-screen .max-w-xl {
        padding: 1.5rem !important;
        margin-top: 2rem;
    }
    
    /* Ba≈ülƒ±k boyutu mobilde k√º√ß√ºlt */
    section.min-h-screen h1 {
        font-size: 2rem !important; /* 32px */
        line-height: 1.2;
    }
    
    /* Navbar mobil d√ºzeltmesi */
    header.sticky {
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }
    
    header nav {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    /* Logo boyutu mobilde */
    header nav a.text-2xl {
        font-size: 1.25rem !important; /* 20px */
    }
    
    /* Kaydƒ±rma indikat√∂r√º pozisyonu */
    section.min-h-screen .absolute.bottom-10 {
        bottom: 2rem;
    }
}

/* ‚úÖ √áok k√º√ß√ºk ekranlar i√ßin (iPhone SE, vb.) */
@media (max-width: 375px) {
    section.min-h-screen h1 {
        font-size: 1.75rem !important; /* 28px */
    }
    
    section.min-h-screen p {
        font-size: 0.95rem !important;
    }
    
    section.min-h-screen a.inline-block {
        padding: 0.75rem 2rem !important;
        font-size: 0.95rem !important;
    }
}
    </style>
    <!-- Firebase Mod√ºlleri -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut,signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, setLogLevel, addDoc, doc, setDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        setLogLevel('debug');

        const firebaseConfigRaw = typeof __firebase_config !== 'undefined' ? __firebase_config : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let firebaseConfig = {};
        const PLACEHOLDER_PROJECT_ID = "abc";
        let appId = 'web-ce7b2'; // ‚úÖ Direkt Firebase project ID'nizi yazƒ±n
        
        if (firebaseConfigRaw) {
            firebaseConfig = JSON.parse(firebaseConfigRaw);
            if (canvasAppId === 'default-app-id' && firebaseConfig.projectId) {
                appId = firebaseConfig.projectId;
            }
        } else {
            // üëáüëáüëá BURAYA KENDƒ∞ GER√áEK FIREBASE YAPILANDIRMANIZI EKLEYƒ∞N üëáüëáüëá
            firebaseConfig = {
                // Sizin Firebase Konsolunuzdan kopyaladƒ±ƒüƒ±nƒ±z 
                // ger√ßek config bilgileri buraya gelecek.
                apiKey: "AIzaSyCE86zO9qIRrtTbsvzQqm-0BXX4q3QkYF8",
                authDomain: "web-ce7b2.firebaseapp.com",
                projectId: "web-ce7b2",
                storageBucket: "web-ce7b2.firebasestorage.app",
                messagingSenderId: "386978872857",
                appId: "1:386978872857:web:f235f1f38b573b63d07488",
                measurementId: "G-RPB45EJ6V5"
            };
            appId = firebaseConfig.projectId; 
            // üëÜüëÜüëÜ BURAYA KENDƒ∞ GER√áEK FIREBASE YAPILANDIRMANIZI EKLEYƒ∞N üëÜüëÜüëÜ
        }
        
        const PROJECT_COLLECTION_PATH = `projects`;
        const INQUIRY_COLLECTION_PATH = `inquiries`;
        const CONTACT_INFO_PATH = `contact_info`;
        
        let db, auth;
        let projectsRef;
        let isAuthReady = false;

        // Global deƒüi≈ükenler
        window.projects = window.projects || []; 
        window.inquiries = window.inquiries || [];
        window.contactInfo = window.contactInfo || {}; // YENƒ∞: ƒ∞stekler i√ßin global array
        window.isAdminLoggedIn = window.isAdminLoggedIn || false; 
        // Base64 ve URL g√∂rsellerini modal a√ßƒ±kken tutmak i√ßin tek bir array
        window.currentProjectImages = []; 

        window.initFirebase = async () => {
    if (firebaseConfig.projectId === PLACEHOLDER_PROJECT_ID) {
         window.showMessage("üî¥ FIREBASE YAPILANDIRMA HATASI: L√ºtfen index.html dosyasƒ±ndaki ayarlarƒ± doldurun.", 'bg-red-600', 8000);
         console.error("Firebase Config Hatasƒ±: Proje ID yer tutucu olarak kaldƒ±. Veritabanƒ± i≈ülemleri devre dƒ±≈üƒ±.");
         return; 
    }

    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);
        window.auth = auth; // ‚úÖ BURAYI EKLEYƒ∞N - Global window nesnesine ata
        window.db = db; // ƒ∞steƒüe baƒülƒ±: db'yi de ekleyebilirsiniz
        
        projectsRef = collection(db, PROJECT_COLLECTION_PATH);

        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                if (initialAuthToken) {
                    try {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } catch (error) {
                        console.error("Custom token ile giri≈ü ba≈üarƒ±sƒ±z, anonim olarak devam ediliyor:", error);
                        await signInAnonymously(auth);
                    }
                } else {
                    await signInAnonymously(auth);
                }
            }
            isAuthReady = true;
            window.isAuthReady = true; // ‚úÖ Bunu da ekleyin
            console.log("Firebase Auth Hazƒ±r. Veritabanƒ± dinleniyor.");
            listenToProjects(); 
            listenToInquiries();
            listenToContactInfo();
        });

    } catch (error) {
        window.showMessage(`üî¥ Firebase Baƒülantƒ± Hatasƒ±: ${error.message}`, 'bg-red-600', 8000);
        console.error("Firebase Ba≈ülatma Hatasƒ±:", error);
    }
};

        // --- FIRESTORE READ ƒ∞≈ûLEMƒ∞ (PUBLIC VE ADMIN ƒ∞√áƒ∞N) ---
        function listenToProjects(){
            if (!isAuthReady) return;

            onSnapshot(projectsRef, (snapshot) => {
                const fetchedProjects = [];
                snapshot.forEach(doc => {
                    fetchedProjects.push({ id: doc.id, ...doc.data() });
                });
                
                fetchedProjects.sort((a, b) => (b.year || 0) - (a.year || 0) || a.title.localeCompare(b.title));
                
                window.projects = fetchedProjects;
                window.renderProjects(); // Public Site Render
                if (window.isAdminLoggedIn) {
                    window.renderAdminProjectTable(); // Admin Panel Render
                }
            }, (error) => {
                console.error("Firestore Hata:", error);
                window.showMessage(`Projeler y√ºklenirken hata olu≈ütu: ${error.code}`, 'bg-red-600');
            });
        }
        // index.html dosyasƒ±nda `listenToProjects()` fonksiyonundan sonra eklenmelidir.

function listenToInquiries(){
    if (!isAuthReady) return;

    const inquiriesRef = collection(db, INQUIRY_COLLECTION_PATH); // INQUIRY_COLLECTION_PATH'i kullanƒ±r

    onSnapshot(inquiriesRef, (snapshot) => {
        const fetchedInquiries = [];
        snapshot.forEach(doc => {
            fetchedInquiries.push({ id: doc.id, ...doc.data() });
        });
        
        // ƒ∞stekleri en yeniye g√∂re (timestamp) sƒ±ralayabilirsiniz
        fetchedInquiries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        window.inquiries = fetchedInquiries;
        
        // Sadece admin giri≈üi yapƒ±lmƒ±≈üsa tabloyu render et
        if (window.isAdminLoggedIn) {
            window.renderAdminInquiryTable(); 
        }
    }, (error) => {
        console.error("Teklif ƒ∞stekleri (Inquiries) Hata:", error);
        window.showMessage(`Teklif istekleri y√ºklenirken hata olu≈ütu: ${error.code}`, 'bg-red-600');
    });
}
        
        function listenToContactInfo() {
    if (!isAuthReady) {
        console.warn("Auth hazƒ±r deƒüil, ileti≈üim bilgileri y√ºklenemedi. | timestamp:", new Date().toISOString());
        // ‚úÖ EKLE: Auth hazƒ±r olana kadar bekle ve tekrar dene
        setTimeout(() => {
            if (isAuthReady) listenToContactInfo();
        }, 1000);
        return;
    }
    
    const contactRef = doc(db, CONTACT_INFO_PATH, 'main');

    onSnapshot(contactRef, (docSnap) => {
        console.log("Firestore'dan veri alƒ±ndƒ± | exists:", docSnap.exists(), "| raw data:", docSnap.data(), "| timestamp:", new Date().toISOString());
        
        if (docSnap.exists()) {
            const data = docSnap.data();
            window.contactInfo = {
                address: data.address?.stringValue || data.address || "Adres bilgisi eksik",
                phone: data.phone?.stringValue || data.phone || "Telefon bilgisi eksik",
                email: data.email?.stringValue || data.email || "E-posta bilgisi eksik"
            };
            console.log("window.contactInfo g√ºncellendi:", window.contactInfo, "| timestamp:", new Date().toISOString());
            
            // ‚úÖ EKLE: DOM hazƒ±r olana kadar bekle
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    window.renderContactInfo();
                });
            } else {
                window.renderContactInfo();
            }
            
        } else {
            console.warn("Firestore'da contact_info/main belgesi bulunamadƒ±. | timestamp:", new Date().toISOString());
            
            // ‚úÖ EKLE: Default deƒüerler
            window.contactInfo = {
                address: "√ñrnek Mah. Elit Cad. No: 42/A Konak, ƒ∞zmir / T√ºrkiye",
                phone: "+90 232 XXX XX XX",
                email: "info@bozkurtinsaat.com.tr"
            };
            
            // ‚úÖ EKLE: Default deƒüerlerle de render et
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    window.renderContactInfo();
                });
            } else {
                window.renderContactInfo();
            }
        }

        if (window.isAdminLoggedIn) {
            console.log("Admin paneli i√ßin ileti≈üim formu dolduruluyor. | timestamp:", new Date().toISOString());
            window.populateContactForm();
        }
    }, (error) => {
        console.error("Contact Info Firestore Hata:", error, "| timestamp:", new Date().toISOString());
        window.showMessage(`ƒ∞leti≈üim bilgileri y√ºklenirken hata: ${error.message}`, 'bg-red-600');
        
        // ‚úÖ EKLE: Hata durumunda default deƒüerler
        window.contactInfo = {
            address: "√ñrnek Mah. Elit Cad. No: 42/A Konak, ƒ∞zmir / T√ºrkiye",
            phone: "+90 232 XXX XX XX",
            email: "info@bozkurtinsaat.com.tr"
        };
        window.renderContactInfo();
    });
}
// Proje Silme Fonksiyonu
window.deleteProject = async (projectId) => {
    if (!confirm("Bu projeyi kalƒ±cƒ± olarak silmek istediƒüinizden emin misiniz? Bu i≈ülem geri alƒ±namaz!")) {
        return;
    }
    
    if (!db || !auth.currentUser) {
        window.showMessage("Veritabanƒ± baƒülantƒ±sƒ± yok veya yetkiniz eksik.", 'bg-red-600');
        return;
    }

    try {
        // Firestore'dan belgeyi sil
        await deleteDoc(doc(db, PROJECT_COLLECTION_PATH, projectId));
        
        window.showMessage("Proje ba≈üarƒ±yla silindi!", 'bg-green-600');
        
        // Tablo otomatik g√ºncellenecek (onSnapshot sayesinde)
        // Ama emin olmak i√ßin manuel de tetikleyebiliriz:
        if (window.isAdminLoggedIn) {
            window.renderAdminProjectTable();
        }
    } catch (error) {
        console.error("Proje silme hatasƒ±:", error);
        window.showMessage(`Silme hatasƒ±: ${error.message}`, 'bg-red-600', 5000);
    }
};

        // --- ADMIN CRUD ƒ∞≈ûLEMLERƒ∞ ---

        // Proje Ekle/G√ºncelle
        window.saveProject = async (data) => {
            if (!db || !auth.currentUser) {
                window.showMessage("Veritabanƒ± baƒülantƒ±sƒ± yok veya yetkiniz eksik.", 'bg-red-600');
                return;
            }
            
            const projectId = data.id;
            delete data.id; 

            try {
                // √ñzellikler dizisini (features) virg√ºlle ayrƒ±lmƒ±≈ü string'den array'e √ßevir
                if (data.featuresString) {
                    data.features = data.featuresString.split(',').map(f => f.trim()).filter(f => f.length > 0);
                } else {
                    data.features = [];
                }
                delete data.featuresString; 
                
                // G√úNCELLEME: Global Base64/URL dizisini kaydet
                data.images = window.currentProjectImages; 
                
                // Firestore'da 1MB limitini kontrol etmeye yardƒ±mcƒ± olmak i√ßin bir uyarƒ± ekle
                if (JSON.stringify(data).length > 800000) { 
                    window.showMessage("‚ö†Ô∏è Proje boyutu 1MB limitine yakla≈üƒ±yor. Daha az g√∂rsel veya daha kƒ±sa metin kullanƒ±n.", 'bg-yellow-600', 8000);
                }

                if (projectId) {
                    // UPDATE: Mevcut belgeyi g√ºncelle
                    await setDoc(doc(db, PROJECT_COLLECTION_PATH, projectId), data, { merge: true });
                    window.showMessage("Proje ba≈üarƒ±yla g√ºncellendi!", 'bg-green-600');
                } else {
                    // CREATE: Yeni belge ekle
                    await addDoc(projectsRef, data);
                    window.showMessage("Yeni proje ba≈üarƒ±yla eklendi!", 'bg-green-600');
                }
                window.hideProjectModal();
            } catch (error) {
                console.error("Proje kaydetme hatasƒ±:", error);
                window.showMessage(`Kaydetme hatasƒ±: ${error.message}`, 'bg-red-600');
            }
        };

        // YENI: Teklif ƒ∞steƒüi Silme Fonksiyonu
window.deleteInquiry = async (inquiryId) => {
    if (!confirm("Bu teklif isteƒüini kalƒ±cƒ± olarak silmek istediƒüinizden emin misiniz?")) return;
    if (!db || !auth.currentUser) {
        window.showMessage("Yetkiniz yok.", 'bg-red-600');
        return;
    }

    try {
        await deleteDoc(doc(db, INQUIRY_COLLECTION_PATH, inquiryId));
        window.showMessage("Teklif isteƒüi ba≈üarƒ±yla silindi.", 'bg-green-600');
    } catch (error) {
        console.error("Teklif silme hatasƒ±:", error);
        window.showMessage(`Silme hatasƒ±: ${error.message}`, 'bg-red-600');
    }
};

        // ‚úÖ Teklif Durum G√ºncelleme
        window.updateInquiryStatus = async (inquiryId, newStatus) => {
            if (!db || !auth.currentUser) {
                window.showMessage("Yetkiniz yok.", 'bg-red-600');
                return;
            }
            
            try {
                await setDoc(doc(db, INQUIRY_COLLECTION_PATH, inquiryId), {
                    status: newStatus
                }, { merge: true });
                
                window.showMessage(`Durum g√ºncellendi: ${newStatus}`, 'bg-green-600');
            } catch (error) {
                console.error("Durum g√ºncelleme hatasƒ±:", error);
                window.showMessage(`G√ºncelleme hatasƒ±: ${error.message}`, 'bg-red-600');
            }
        };

        
        // YENƒ∞: Public ileti≈üim formundan gelen veriyi kaydetme
        window.submitInquiry = async function(form) {
            const name = form.querySelector('#contact-name').value.trim();
            const email = form.querySelector('#contact-email').value.trim();
            const message = form.querySelector('#contact-message').value.trim();

            if (!name || !email || !message) {
                window.showMessage("L√ºtfen t√ºm alanlarƒ± doldurun.", 'bg-red-600');
                return;
            }
            
            if (!db) {
                window.showMessage("Veritabanƒ± baƒülantƒ±sƒ± hen√ºz hazƒ±r deƒüil. L√ºtfen bekleyin.", 'bg-red-600');
                return;
            }

            try {
                await addDoc(collection(db, INQUIRY_COLLECTION_PATH), {
                    name: name,
                    email: email,
                    message: message,
                    timestamp: new Date().toISOString(),
                    status: 'Yeni'
                });
                
                window.showMessage("Teklif isteƒüiniz ba≈üarƒ±yla alƒ±ndƒ±! En kƒ±sa s√ºrede size d√∂n√º≈ü yapacaƒüƒ±z.", 'bg-green-600');
                form.reset();
            } catch (error) {
                console.error("Teklif g√∂nderme hatasƒ±:", error);
                window.showMessage(`Hata: ƒ∞steƒüiniz g√∂nderilemedi. ${error.message}`, 'bg-red-600', 8000);
            }
        }
        // ƒ∞leti≈üim Bilgilerini Kaydetme (ADMIN)
        window.saveContactInfo = async function() {
    const address = document.getElementById('admin-contact-address').value.trim();
    const phone = document.getElementById('admin-contact-phone').value.trim();
    const email = document.getElementById('admin-contact-email').value.trim();

    if (!address || !phone || !email) {
        window.showMessage("T√ºm alanlar doldurulmalƒ±dƒ±r.", 'bg-red-600');
        return;
    }

    if (!db || !auth.currentUser) {
        window.showMessage("Yetkiniz yok.", 'bg-red-600');
        return;
    }

    try {
        await setDoc(doc(db, CONTACT_INFO_PATH, 'main'), {
            address: address,
            phone: phone,
            email: email
        });
        
        // ‚úÖ EKLE: Global deƒüi≈ükeni hemen g√ºncelle
        window.contactInfo = { address, phone, email };
        
        // ‚úÖ EKLE: Ana sayfadaki UI'yi g√ºncelle
        window.renderContactInfo();
        
        window.showMessage("ƒ∞leti≈üim bilgileri g√ºncellendi!", 'bg-green-600');
    } catch (error) {
        console.error("ƒ∞leti≈üim kaydetme hatasƒ±:", error);
        window.showMessage(`Hata: ${error.message}`, 'bg-red-600');
    }
};
        window.setupDragScroll = function() {
    const slider = document.getElementById('completed-projects-container');
    if (!slider) return;

    let isDown = false;
    let startX;
    let scrollLeft;
    let velocity = 0;
    let momentum;

    // ‚úÖ Touch olaylarƒ± ekle
    slider.addEventListener('touchstart', handleTouchStart, { passive: true });
    slider.addEventListener('touchmove', handleTouchMove, { passive: false });
    slider.addEventListener('touchend', handleTouchEnd);

    slider.addEventListener('mousedown', (e) => {
        isDown = true;
        slider.style.cursor = 'grabbing';
        startX = e.pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
        velocity = 0;
        cancelMomentum();
    });

    slider.addEventListener('mouseleave', () => {
        isDown = false;
        slider.style.cursor = 'grab';
    });

    slider.addEventListener('mouseup', () => {
        isDown = false;
        slider.style.cursor = 'grab';
        applyMomentum();
    });

    slider.addEventListener('mousemove', (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - slider.offsetLeft;
        const walk = (x - startX) * 2;
        velocity = walk;
        slider.scrollLeft = scrollLeft - walk;
    });

    // ‚úÖ Touch fonksiyonlarƒ±
    let touchStartX = 0;
    let touchScrollLeft = 0;

    function handleTouchStart(e) {
        touchStartX = e.touches[0].pageX;
        touchScrollLeft = slider.scrollLeft;
        cancelMomentum();
    }

    function handleTouchMove(e) {
        if (e.touches.length > 1) return; // Multi-touch'ƒ± yoksay
        const touchX = e.touches[0].pageX;
        const walk = (touchStartX - touchX) * 1.5;
        slider.scrollLeft = touchScrollLeft + walk;
        
        // Dikey kaydƒ±rmayƒ± engelle
        if (Math.abs(walk) > 10) {
            e.preventDefault();
        }
    }

    function handleTouchEnd(e) {
        // Momentum efekti i√ßin velocity hesapla
        applyMomentum();
    }

    function applyMomentum() {
        cancelMomentum();
        if (Math.abs(velocity) > 1) {
            momentum = setInterval(() => {
                slider.scrollLeft -= velocity;
                velocity *= 0.95; // Yava≈ülama fakt√∂r√º
                if (Math.abs(velocity) < 0.5) {
                    cancelMomentum();
                }
            }, 16);
        }
    }

    function cancelMomentum() {
        if (momentum) {
            clearInterval(momentum);
        }
    }
};
        // Ba≈ülat
        window.addEventListener('load', window.initFirebase);

        // Public signOut fonksiyonu
        window.adminLogout = async () => {
            window.isAdminLoggedIn = false;
            window.showView('main');
            window.showMessage("Y√∂netici oturumu kapatƒ±ldƒ±.", 'bg-yellow-600');
        };

    </script>
</head>
<body class="elite-bg text-gray-100">
    
    <!-- 1. ANA Sƒ∞TE G√ñR√úN√úM√ú -->
    <div id="main-view" class="visible-view">
        <!-- Hero Arkaplanƒ± (Sabitlenmi≈ü - Pinning Effect) -->
        <div class="hero-pin-bg">
            <div class="hero-vignette"></div>
        </div>
    
        <!-- Navigasyon √áubuƒüu (Sabit ve Responsive) -->
        <header class="sticky top-0 z-50 bg-slate-900 bg-opacity-95 shadow-xl">
            <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                <a href="#" class="text-2xl font-extrabold elite-text tracking-widest transition duration-300 hover:text-yellow-400">BOZKURT ƒ∞N≈ûAAT</a>
                <div class="hidden md:flex space-x-8">
                    <a href="#projelerimiz" class="text-gray-300 hover:elite-text transition duration-300">Projelerimiz</a>
                    <a href="#hakkimizda" class="text-gray-300 hover:elite-text transition duration-300">Hakkƒ±mƒ±zda</a>
                    <a href="#iletisim" class="text-gray-300 hover:elite-text transition duration-300">ƒ∞leti≈üim</a>
                </div>
                <!-- Mobil Navigasyon Butonu (Hamburger) -->
                <button id="menu-button" class="md:hidden text-gray-300 hover:elite-text focus:outline-none" aria-expanded="false" aria-controls="mobile-menu" aria-label="Men√ºy√º A√ß/Kapat">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </nav>
            <!-- Mobil Men√º ƒ∞√ßeriƒüi -->
            <div id="mobile-menu" class="hidden md:hidden bg-slate-900 bg-opacity-90">
                <a href="#projelerimiz" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text border-b border-gray-800 transition duration-300 menu-item-link">Projelerimiz</a>
                 <a href="#hakkimizda" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text border-b border-gray-800 transition duration-300 menu-item-link">Hakkƒ±mƒ±zda</a>
                <a href="#iletisim" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text transition duration-300 menu-item-link">ƒ∞leti≈üim</a>
            </div>
        </header>
        <!-- Hero Section -->
    <section class="min-h-[calc(100vh-3rem)] md:min-h-screen flex flex-col justify-center items-center p-4 content-overlay">
    <div class="container mx-auto max-w-7xl flex items-center justify-start">
        <div class="max-w-xl md:max-w-3xl p-6 md:p-10 rounded-xl shadow-2xl" data-scroll-animate>
            <div class="section-separator mb-4"></div>
            <p class="text-xl font-semibold text-white mb-3 tracking-widest uppercase">BOZKURT ƒ∞N≈ûAAT - Elit Ya≈üam</p>
            <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-extrabold text-white mb-6 leading-tight animate-fade-in-up">
                L√ºks√ºn ve Kalitenin <span class="elite-text">Y√ºksek Mimarisi</span>
            </h1>
            <p class="text-lg sm:text-xl text-gray-300 mb-8 max-w-lg leading-relaxed">
                ƒ∞zmir'in en prestijli konut ve ticari projelerini, yenilik√ßi tasarƒ±m ve sarsƒ±lmaz kalite garantisiyle hayata ge√ßiriyoruz.
            </p>
            <a href="#projelerimiz" class="inline-block px-8 sm:px-12 py-3 sm:py-4 bg-yellow-400 text-slate-900 font-extrabold text-base sm:text-lg rounded-full shadow-2xl transition duration-300 transform hover:scale-105 tracking-wide">
                Projelerimizi Ke≈üfet &rarr;
            </a>
        </div>
    </div>
    
    <!-- Kaydƒ±rma ƒ∞ndikat√∂r√º -->
    <div class="absolute bottom-10 left-0 right-0 flex justify-center">
        <a href="#projelerimiz" aria-label="A≈üaƒüƒ± kaydƒ±r" class="text-white hover:elite-text transition duration-300">
            <svg class="w-8 h-8 md:w-10 md:h-10 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m7-6v14"></path></svg>
        </a>
    </div>
</section>
    
        <!-- Ana ƒ∞√ßerik ve Projeler -->
        <main class="content-overlay elite-bg shadow-2xl">
    
            <!-- Projelerimiz (Our Projects) Section -->
            <section id="projelerimiz" class="py-16 md:py-24 container mx-auto lg:px-8">
                <div class="text-center mb-12 px-4 sm:px-6">
                    <div data-scroll-animate>
                        <h3 class="text-4xl font-extrabold mb-4 text-white">√ñne √áƒ±kan Projelerimiz</h3>
                        <div class="section-separator mx-auto"></div>
                        <p class="text-lg text-gray-300 mt-6">ƒ∞zmir'in geleceƒüine deƒüer katan, modern ve elit ya≈üam alanlarƒ±mƒ±z.</p>
                    </div>
                </div>
    
                <!-- Tamamlanan Projeler Listesi -->
<div class="px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-8 mt-12">
        <h4 data-scroll-animate data-scroll-delay="100" class="text-3xl font-extrabold text-white mb-2 elite-text">Tamamlanan Projeler</h4>
        <div data-scroll-animate data-scroll-delay="200" class="section-separator mx-auto w-16"></div>
    </div>
    
    <!-- ‚úÖ GRID LAYOUT CONTAINER -->
    <!-- HORIZONTAL SCROLL CONTAINER START -->
<div id="completed-projects-container" class="horizontal-scroll-container pb-6">
    <p class="text-center text-gray-500 p-4">Projeler y√ºkleniyor...</p>
</div>
<!-- HORIZONTAL SCROLL CONTAINER END -->
</div>

<div id="no-completed-projects" class="text-center text-gray-500 mt-8 hidden p-4 bg-slate-800 rounded-lg max-w-md mx-auto">
    Hen√ºz tamamlanmƒ±≈ü projemiz bulunmamaktadƒ±r.
</div>  

                <!-- Devam Eden Projeler Listesi -->
                <div class="px-4 sm:px-6 lg:px-8">
                    <div class="text-center mt-16 mb-8">
                        <h4 data-scroll-animate data-scroll-delay="100" class="text-3xl font-extrabold text-white mb-2 elite-text">Devam Eden Projeler</h4>
                        <div data-scroll-animate data-scroll-delay="200" class="section-separator mx-auto w-16"></div>
                    </div>
                    <div id="ongoing-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
                        <!-- Proje Kartlarƒ± buraya JS ile y√ºklenecek -->
                    </div>
                    <div id="no-ongoing-projects" class="text-center text-gray-500 mt-8 hidden p-4 bg-slate-800 rounded-lg max-w-md mx-auto">
                        ≈ûu anda devam eden bir projemiz bulunmamaktadƒ±r.
                    </div>
                </div>
            </section>
    
            <!-- Hakkƒ±mƒ±zda (About Us) Section -->
            <section id="hakkimizda" class="py-16 md:py-24 bg-slate-900 container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-6xl mx-auto text-center">
                    <div data-scroll-animate>
                        <h3 class="text-4xl font-extrabold mb-4 text-white">Neden Bozkurt ƒ∞n≈üaat?</h3>
                        <div class="section-separator mx-auto"></div>
                        <p class="text-xl text-gray-300 mt-6 leading-relaxed max-w-3xl mx-auto">20 yƒ±lƒ± a≈ükƒ±n tecr√ºbeyle, sadece binalar deƒüil, gelecek nesillere miras kalacak **g√ºvenli ve estetik** ya≈üam merkezleri in≈üa ediyoruz.</p>
                    </div>
                    
                    <!-- √ñzellik Kartlarƒ± -->
                    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10 text-center">
                        <div data-scroll-animate data-scroll-delay="0" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">üìè</span>
                            <p class="font-bold text-2xl text-white mb-2">Modern Tasarƒ±m</p>
                            <p class="text-sm text-gray-400 mt-2">ƒ∞zmir'in ruhuna uygun, √ßaƒüda≈ü ve fonksiyonel mimari √ß√∂z√ºmler.</p>
                        </div>
                        <div data-scroll-animate data-scroll-delay="200" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">‚úÖ</span>
                            <p class="font-bold text-2xl text-white mb-2">Maksimum G√ºven</p>
                            <p class="text-sm text-gray-400 mt-2">Deprem y√∂netmeliklerine tam uyum ve birinci sƒ±nƒ±f yapƒ± malzemeleri.</p>
                        </div>
                        <div data-scroll-animate data-scroll-delay="400" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">ü§ù</span>
                            <p class="font-bold text-2xl text-white mb-2">≈ûeffaf S√ºre√ß</p>
                            <p class="text-sm text-gray-400 mt-2">S√∂z verdiƒüimiz zamanda ve kalitede teslimat garantisi.</p>
                        </div>
                    </div>
                </div>
            </section>
    
            <!-- ƒ∞leti≈üim (Contact) Section -->
            <section id="iletisim" class="py-16 md:py-24 elite-bg container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-4xl mx-auto">
                    <div data-scroll-animate class="text-center mb-12">
                        <h3 class="text-4xl font-extrabold mb-4 text-white">Bize Ula≈üƒ±n</h3>
                        <div class="section-separator mx-auto"></div>
                        <p class="text-lg text-gray-300 mt-6">Hayalinizdeki projeyi konu≈ümak i√ßin her zaman hazƒ±rƒ±z.</p>
                    </div>
    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- ƒ∞leti≈üim Bilgileri (Animasyonlu) -->
                        <div data-scroll-animate class="space-y-8 p-6 bg-slate-900 rounded-xl shadow-2xl">
    <div class="flex items-start">
        <span class="elite-text text-2xl mr-4 mt-0.5">üìç</span>
        <div>
            <p class="font-bold text-lg text-white">Merkez Adresimiz</p>
            <p id="contact-address-display" class="text-gray-400"></p>
        </div>
    </div>
    <div class="flex items-start">
        <span class="elite-text text-2xl mr-4 mt-0.5">üìû</span>
        <div>
            <p class="font-bold text-lg text-white">Telefon ve E-posta</p>
            <p class="text-gray-400">
                <a id="contact-phone-link" href="tel:" class="hover:underline hover:text-yellow-400 transition">
                    <span id="contact-phone-display"></span>
                </a>
            </p>
            <p class="text-gray-400">
                <a id="contact-email-link" href="mailto:" class="hover:underline hover:text-yellow-400 transition">
                    <span id="contact-email-display"></span>
                </a>
            </p>
        </div>
    </div>
</div>
    
                        <!-- ƒ∞leti≈üim Formu (G√úNCELLENDƒ∞) -->
                        <div data-scroll-animate data-scroll-delay="200" class="p-8 bg-slate-800 rounded-xl shadow-2xl">
                            <h4 class="text-2xl font-bold text-white elite-text">Proje Teklifi Alƒ±n</h4>
                            <!-- onsubmit fonksiyonu deƒüi≈ütirildi ve ID'ler eklendi -->
                            <form onsubmit="event.preventDefault(); window.submitInquiry(this)"> 
                                <div class="mb-4">
                                    <input type="text" id="contact-name" placeholder="Adƒ±nƒ±z Soyadƒ±nƒ±z" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200">
                                </div>
                                <div class="mb-4">
                                    <input type="email" id="contact-email" placeholder="E-posta Adresiniz" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200">
                                </div>
                                <div class="mb-6">
                                    <textarea id="contact-message" placeholder="Mesajƒ±nƒ±z" rows="4" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200"></textarea>
                                </div>
                                <button type="submit" class="w-full px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.05]">
                                    Teklif ƒ∞steƒüi G√∂nder
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    
        <!-- Footer -->
        <footer class="elite-bg py-8 border-t border-slate-700 content-overlay">
            <div class="container mx-auto px-4 text-center">
                <p class="text-sm text-gray-500 mb-2">
                    &copy; 2024 Bozkurt ƒ∞n≈üaat. T√ºm Haklarƒ± Saklƒ±dƒ±r.
                </p>
                <!-- DEBUG/FALLBACK ADMIN BUTONU -->
                <button id="debug-admin-btn" onclick="window.showLoginModal()" class="hidden px-4 py-1 text-xs bg-red-800 text-white rounded hover:bg-red-700 transition">
                    Admin Giri≈ü (Yedek)
                </button>
            </div>
        </footer>
    </div>
    
    <!-- 2. ADMIN PANELƒ∞ G√ñR√úN√úM√ú (G√úNCELLENDƒ∞) -->
    <div id="admin-view" class="admin-view hidden-view">
        <header class="bg-slate-900 shadow-lg py-4 px-6 flex justify-between items-center sticky top-0 z-10">
            <h1 class="text-3xl font-extrabold elite-text">Y√∂netici Paneli</h1>
            <button onclick="window.adminLogout()" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-200 flex items-center">
                <i data-lucide="log-out" class="w-5 h-5 mr-2"></i> √áƒ±kƒ±≈ü Yap
            </button>
        </header>

        <main class="p-4 md:p-8 max-w-7xl mx-auto">
            <!-- Proje Y√∂netimi -->
            <h2 class="text-2xl font-bold text-white mb-6">Proje Y√∂netimi</h2>
            <div class="flex justify-end mb-6">
                <button onclick="window.openProjectModal()" class="px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-lg shadow-lg transition duration-300 flex items-center">
                    <i data-lucide="plus" class="w-5 h-5 mr-2"></i> Yeni Proje Ekle
                </button>
            </div>

            <!-- Projeler Tablosu -->
            <div class="bg-slate-900 rounded-xl shadow-2xl overflow-x-auto">
                    <table class="min-w-full divide-y-2 divide-slate-700">
    <thead class="bg-slate-800">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-1/4">Ba≈ülƒ±k</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-1/6">Durum</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-1/6">Yƒ±l</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider w-1/6">Eylemler</th>
        </tr>
    </thead>
                    <tbody id="admin-project-table-body" class="divide-y divide-slate-800">
                        <tr><td colspan="4" class="text-center py-4 text-gray-500">Projeler y√ºkleniyor...</td></tr>
                    </tbody>
                </table>
            </div>
            <p id="admin-no-projects-message" class="text-center text-gray-500 mt-8 hidden">Hen√ºz bir proje eklenmemi≈ü.</p>
            
            <!-- YENƒ∞: Gelen Teklif ƒ∞stekleri B√∂l√ºm√º -->
            <h2 class="text-2xl font-bold text-white mb-6 mt-12 border-t pt-6 border-slate-700">Gelen Teklif ƒ∞stekleri</h2>
            <div class="bg-slate-900 rounded-xl shadow-2xl overflow-x-auto">
                <!-- Gelen Teklif ƒ∞stekleri Tablosu -->
<table class="min-w-full divide-y-2 divide-slate-700">
    <thead class="bg-slate-800">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[15%]">Ad Soyad</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[20%]">E-posta</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[30%]">Mesaj √ñzeti</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[15%]">Tarih</th>
            <th class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider w-[10%]">Durum</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider w-[10%]">Eylemler</th>
        </tr>
    </thead>
    <tbody id="admin-inquiry-table-body" class="divide-y divide-slate-800">
        <tr><td colspan="6" class="text-center py-4 text-gray-500">ƒ∞stekler y√ºkleniyor...</td></tr>
    </tbody>
</table>
            </div>
            <p id="admin-no-inquiries-message" class="text-center text-gray-500 mt-8 hidden">Hen√ºz bir teklif isteƒüi gelmemi≈ütir.</p>
            <!-- ƒ∞LETƒ∞≈ûƒ∞M Bƒ∞LGƒ∞LERƒ∞ Y√ñNETƒ∞Mƒ∞ -->
<h2 class="text-2xl font-bold text-white mb-6 mt-12 border-t pt-6 border-slate-700">ƒ∞≈ületme ƒ∞leti≈üim Bilgileri</h2>
<div class="bg-slate-900 rounded-xl shadow-2xl p-8 max-w-3xl">
    <form onsubmit="event.preventDefault(); window.saveContactInfo()">
        <div class="mb-4">
            <label for="admin-contact-address" class="block text-sm font-medium text-gray-400 mb-2">Adres</label>
            <input type="text" id="admin-contact-address" required 
                   class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                   placeholder="√ñrnek Mah. Elit Cad. No: 42/A Konak, ƒ∞zmir / T√ºrkiye">
        </div>
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div>
                <label for="admin-contact-phone" class="block text-sm font-medium text-gray-400 mb-2">Telefon</label>
                <input type="tel" id="admin-contact-phone" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                       placeholder="+90 232 XXX XX XX">
            </div>
            <div>
                <label for="admin-contact-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                <input type="email" id="admin-contact-email" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                       placeholder="info@bozkurtinsaat.com.tr">
            </div>
        </div>
        <button type="submit" class="w-full px-6 py-3 bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01]">
            ƒ∞leti≈üim Bilgilerini Kaydet
        </button>
    </form>
</div>
        </main>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[400] hidden justify-center items-center p-4 transition duration-300 opacity-0" aria-modal="true" role="dialog">
    <div class="bg-slate-900 w-full max-w-md p-8 rounded-xl shadow-3xl transform scale-95 transition duration-300">
        <h2 class="text-3xl font-bold elite-text mb-6 text-center">Y√∂netici Giri≈üi</h2>
        <form id="admin-login-form" onsubmit="event.preventDefault(); window.adminLogin()">
            
            <div class="mb-4">
                <label for="admin-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                <input type="email" id="admin-email" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200" 
                       placeholder="E-postanƒ±zƒ± Girin">
            </div>
            
            <div class="mb-4">
                <label for="admin-password" class="block text-sm font-medium text-gray-400 mb-2">≈ûifre</label>
                <input type="password" id="admin-password" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200" 
                       placeholder="≈ûifrenizi Girin">
            </div>
            
            <p id="auth-status" class="mt-2 text-center text-sm text-red-400"></p>
            
            <button type="submit" 
                    class="w-full px-6 py-3 bg-yellow-400 bg-elite-text text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01] mb-3">
                Giri≈ü Yap
            </button>
            
        </form>
        
        <!-- ‚úÖ ƒ∞ptal butonu FORM'UN DI≈ûINDA -->
        <button type="button" 
                onclick="window.hideLoginModal()" 
                class="w-full px-6 py-3 bg-slate-800 text-gray-300 font-semibold rounded-full border border-slate-700 hover:bg-slate-700 hover:text-white transition duration-300 transform hover:scale-[1.01]">
            ƒ∞ptal
        </button>
        
    </div>
</div>

    <!-- 4. PROJE EKLE/D√úZENLE MODAL (G√úNCELLENDƒ∞) -->
    <div id="project-crud-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[500] hidden justify-center items-center p-4 transition duration-300 opacity-0" aria-modal="true" role="dialog" onclick="if (event.target.id === 'project-crud-modal') ">
        <div class="bg-slate-900 w-full max-w-2xl max-h-[95vh] p-8 rounded-xl shadow-3xl overflow-y-auto transform scale-95 transition duration-300">
            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-3">
                <h2 id="crud-modal-title" class="text-2xl font-bold text-white elite-text">Yeni Proje Ekle</h2>
                <button onclick="window.hideProjectModal()" class="text-gray-400 hover:text-elite-text text-3xl">&times;</button>
            </div>
            
            <form id="project-crud-form" onsubmit="event.preventDefault(); window.handleProjectSubmit(this)">
                <input type="hidden" id="project-id" name="id">

                <!-- Proje Ba≈ülƒ±ƒüƒ± -->
                <div class="mb-4">
                    <label for="project-title" class="block text-sm font-medium text-gray-400 mb-2">Ba≈ülƒ±k *</label>
                    <input type="text" id="project-title" name="title" required class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: Elite Konutlarƒ±, Urla">
                </div>

                <!-- Durum ve Yƒ±l -->
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="project-status" class="block text-sm font-medium text-gray-400 mb-2">Durum *</label>
                        <select id="project-status" name="status" required class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700">
                            <option value="ongoing">Devam Ediyor</option>
                            <option value="completed">Tamamlandƒ±</option>
                        </select>
                    </div>
                    <div>
                        <label for="project-year" class="block text-sm font-medium text-gray-400 mb-2">Teslim Yƒ±lƒ±</label>
                        <input type="number" id="project-year" name="year" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: 2024">
                    </div>
                </div>

                <!-- Konum -->
                <div class="mb-4">
                    <label for="project-location" class="block text-sm font-medium text-gray-400 mb-2">Konum</label>
                    <input type="text" id="project-location" name="location" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: Konak, ƒ∞zmir">
                </div>
                
                <!-- YENƒ∞: Proje ƒ∞leti≈üim Bilgileri -->
                <div class="mb-4 pt-4 border-t border-slate-700">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text">Proje ƒ∞leti≈üim Bilgileri (Opsiyonel)</h3>
                    <div class="mb-4">
                        <label for="project-contact-person" class="block text-sm font-medium text-gray-400 mb-2">ƒ∞leti≈üim Kurulacak Ki≈üi</label>
                        <input type="text" id="project-contact-person" name="contact_person" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: Ay≈üe Yƒ±lmaz">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="project-contact-phone" class="block text-sm font-medium text-gray-400 mb-2">Telefon</label>
                            <input type="tel" id="project-contact-phone" name="contact_phone" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: +90 532 ...">
                        </div>
                        <div>
                            <label for="project-contact-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                            <input type="email" id="project-contact-email" name="contact_email" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: ayse.y@bozkurt.com">
                        </div>
                    </div>
                </div>
                <!-- Bƒ∞TTƒ∞: Proje ƒ∞leti≈üim Bilgileri -->

                <!-- G√∂rsel Y√ºkleme Alanƒ± (Drag & Drop + URL) -->
                <div class="mb-6 border border-slate-700 rounded-xl p-4 bg-slate-800">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text">G√∂rsel Y√ºkle / Ekle</h3>

                    <!-- A. S√ºr√ºkle-Bƒ±rak Alanƒ± -->
                    <label class="block text-sm font-medium text-gray-400 mb-2">1. Yerel G√∂rsel Y√ºkleme (S√ºr√ºkle & Bƒ±rak veya Tƒ±kla)</label>
                    <div id="image-drop-zone" class="p-6 text-center rounded-lg cursor-pointer hover:bg-slate-700 transition duration-200" onclick="document.getElementById('file-input').click()">
                        <i data-lucide="upload" class="w-8 h-8 mx-auto text-gray-500 mb-2"></i>
                        <p class="text-gray-400 text-sm">G√∂rselleri buraya s√ºr√ºkleyin veya tƒ±klayarak se√ßin.</p>
                        <input type="file" id="file-input" multiple accept="image/*" class="hidden">
                    </div>

                    <!-- B. URL Ekleme Alanƒ± -->
                    <div class="mt-4 pt-4 border-t border-slate-700">
                        <label class="block text-sm font-medium text-gray-400 mb-2">2. Veya Harici URL Yapƒ±≈ütƒ±rarak Ekle</label>
                        <div class="flex gap-2">
                             <input type="url" id="url-input" class="flex-grow p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm" placeholder="https://example.com/proje-fotografi.jpg">
                             <button type="button" id="add-url-btn" onclick="window.addUrlImage()" class="px-4 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-200">Ekle</button>
                        </div>
                    </div>

                    <p class="text-xs text-red-400 mt-4 p-1 bg-slate-900 rounded-lg">
                        ‚ö†Ô∏è **√ñNEMLƒ∞:** S√ºr√ºkle-bƒ±rak ile y√ºklenenler (Base64) 1MB belge limitine tabidir. L√ºtfen k√º√ß√ºk dosyalar kullanƒ±n. Harici URL'ler bu limite takƒ±lmaz.
                    </p>
                    
                    <!-- Y√ºklenen G√∂rsel √ñnizlemeleri -->
                    <div class="mt-4 pt-4 border-t border-slate-700">
                        <label class="block text-sm font-medium text-gray-400 mb-2">T√ºm G√∂rsel √ñnizlemeleri</label>
                        <div id="image-previews" class="flex flex-wrap gap-4 p-2 bg-slate-700 rounded-lg min-h-[50px]">
                            <p class="text-gray-500 text-sm italic p-2">Y√ºklenen g√∂rseller burada g√∂r√ºnecek.</p>
                        </div>
                    </div>
                </div>
                <!-- Bƒ∞TTƒ∞: G√∂rsel Y√ºkleme Alanƒ± -->

                <!-- Kƒ±sa A√ßƒ±klama -->
                <div class="mb-4">
                    <label for="project-description" class="block text-sm font-medium text-gray-400 mb-2">Kƒ±sa A√ßƒ±klama *</label>
                    <textarea type="text" id="project-description" name="description" required rows="3" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ana sayfada g√∂r√ºnecek kƒ±sa tanƒ±tƒ±m metni."></textarea>
                </div>

                <!-- Detaylƒ± A√ßƒ±klama (LLM Entegre) -->
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <label for="project-detailed-description" class="block text-sm font-medium text-gray-400">Detaylƒ± A√ßƒ±klama</label>
                        <button type="button" onclick="window.generateDetailedDescription()" class="flex items-center text-xs font-semibold px-3 py-1 bg-yellow-600 rounded-full hover:bg-yellow-500 transition duration-200 text-slate-900">
                            <i data-lucide="sparkles" class="w-4 h-4 mr-1"></i> ‚ú® A√ßƒ±klama Olu≈ütur
                        </button>
                    </div>
                    <textarea id="project-detailed-description" name="detailedDescription" rows="5" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Proje detay sayfasƒ±nda g√∂r√ºnecek uzun metin."></textarea>
                </div>
                
                <!-- ƒ∞leti≈üim Metni Olu≈üturma Alanƒ± (LLM Entegre) -->
                <div class="mb-6 border border-slate-700 rounded-xl p-4 bg-slate-800">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text flex items-center">
                        <i data-lucide="mail" class="w-5 h-5 mr-2"></i> ‚ú® Pazarlama Metni Olu≈ütur
                    </h3>
                    
                    <div class="flex gap-2 mb-3">
                         <select id="communication-type" class="flex-grow p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm">
                             <option value="email">M√º≈üteri E-posta Taslaƒüƒ±</option>
                             <option value="social">Sosyal Medya G√∂nderisi (X/Instagram)</option>
                             <option value="brief">Yatƒ±rƒ±mcƒ± Brifingi (√ñzet)</option>
                         </select>
                         <button type="button" onclick="window.generateCommunicationText()" class="px-4 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition duration-200 flex items-center">
                             <i data-lucide="bot" class="w-5 h-5 mr-1"></i> Olu≈ütur
                         </button>
                    </div>
                    
                    <textarea id="communication-output" rows="5" class="w-full p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm" placeholder="Olu≈üturulan pazarlama metni burada g√∂r√ºnecektir."></textarea>
                    
                    <p class="text-xs text-gray-500 mt-2">Bu ara√ß, proje bilgilerini kullanarak hedef kitleye √∂zel metinler olu≈üturur.</p>
                </div>
                <!-- Bƒ∞TTƒ∞: ƒ∞leti≈üim Metni Olu≈üturma Alanƒ± -->

                <!-- √ñzellikler (Features) -->
                <div class="mb-6">
                    <label for="project-features" class="block text-sm font-medium text-gray-400 mb-2">√ñzellikler (Virg√ºlle Ayƒ±rƒ±n)</label>
                    <input type="text" id="project-features" name="featuresString" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="√ñrn: Akƒ±llƒ± Ev Sistemi, Y√ºzme Havuzu, Kapalƒ± Otopark">
                </div>

                <button type="submit" class="w-full px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01]">
                    Kaydet
                </button>
            </form>
        </div>
    </div>


    <!-- 5. Utility Modals -->
    <!-- Mesaj Kutusu (Toast Notification) -->
    <div id="message-box" class="fixed bottom-5 right-5 bg-green-600 text-white p-4 rounded-lg shadow-xl transition-all duration-300 ease-in-out hidden z-[1000]">
        Mesajƒ±nƒ±z ba≈üarƒ±yla g√∂nderildi! Te≈üekk√ºr ederiz.
    </div>

    <!-- Public Site Detay Modal (Mevcut) -->
    <div id="project-modal" 
         class="fixed inset-0 bg-black bg-opacity-75 z-[200] hidden justify-center items-center p-4 transition duration-300 opacity-0" 
         aria-modal="true" 
         role="dialog" 
         aria-labelledby="modal-title"
         onclick="if (event.target.id === 'project-modal') closeProjectModal()">
        
        <div class="bg-slate-900 w-full max-w-4xl max-h-[90vh] rounded-xl shadow-3xl overflow-y-auto transform scale-95 transition duration-300">
            <div class="flex justify-end p-4 sticky top-0 bg-slate-900 z-10 border-b border-slate-800">
                <button onclick="closeProjectModal()" class="text-gray-300 hover:text-elite-text focus:outline-none text-3xl p-1" aria-label="Kapat">
                    &times;
                </button>
            </div>
            <div id="modal-content" class="p-4 sm:p-8 pt-0">
                <!-- Dinamik i√ßerik buraya y√ºklenecek -->
            </div>
        </div>
    </div>

    <!-- JavaScript for Functionality -->
    <script>
        // Lucide ikonlarƒ±nƒ± y√ºkle
        lucide.createIcons();

        // --- GEMINI API AYARLARI ---
        const API_KEY = "AIzaSyCX5Vb_CvwTRbVbYqCZqDhnC84C1JlaRxo";
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
        
        // --- API Yardƒ±mcƒ± Fonksiyonu (Exponential Backoff ile) ---
        async function fetchWithBackoff(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status !== 429 && response.ok) {
                        return response.json();
                    }
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    
                    const errorJson = await response.json();
                    throw new Error(`API Hatasƒ±: ${response.status} - ${errorJson.error?.message || 'Bilinmeyen Hata'}`);
                } catch (error) {
                    if (i === maxRetries - 1) throw error; 
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // --- GEMINI API ENTEGRASYONU 1: Detaylƒ± A√ßƒ±klama Olu≈üturma ---
        window.generateDetailedDescription = async function() {
            const title = document.getElementById('project-title').value;
            const location = document.getElementById('project-location').value;
            const featuresString = document.getElementById('project-features').value;
            const description = document.getElementById('project-description').value;

            if (!title) {
                window.showMessage("Proje ba≈ülƒ±ƒüƒ± girilmelidir.", 'bg-red-600');
                return;
            }

            const prompt = `Act as a luxury construction marketing expert. Write a compelling, detailed, and persuasive project description (3-4 paragraphs, max 300 words) for a project titled "${title}" located in "${location}" (if available). Key features are: ${featuresString} (if available). Use this short description as inspiration: "${description}". Focus on quality, location, and elite lifestyle. Write the entire response in Turkish.`;
            
            window.showMessage("‚ú® Detaylƒ± a√ßƒ±klama Gemini ile olu≈üturuluyor... L√ºtfen bekleyin.", 'bg-blue-600', 5000);

            try {
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    systemInstruction: {
                        parts: [{ text: "You are a professional, sophisticated copywriter for a luxury construction firm. Write your response in fluent, high-quality Turkish, using marketing language suitable for elite real estate." }]
                    }
                };

                const result = await fetchWithBackoff(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    document.getElementById('project-detailed-description').value = text.trim();
                    window.showMessage("‚ú® Detaylƒ± a√ßƒ±klama ba≈üarƒ±yla olu≈üturuldu!", 'bg-green-600');
                } else {
                    window.showMessage("A√ßƒ±klama olu≈üturulamadƒ±. L√ºtfen prompt'u kontrol edin.", 'bg-red-600');
                }
            } catch (error) {
                console.error("Gemini API Hatasƒ±:", error);
                window.showMessage(`API hatasƒ±: Metin olu≈üturulamadƒ±. ${error.message}`, 'bg-red-600', 8000);
            }
        };

        // --- GEMINI API ENTEGRASYONU 2: Pazarlama Metni Olu≈üturma (E-posta/Sosyal Medya/Brifing) ---
        window.generateCommunicationText = async function() {
            const title = document.getElementById('project-title').value;
            const location = document.getElementById('project-location').value;
            const featuresString = document.getElementById('project-features').value;
            const description = document.getElementById('project-description').value;
            const status = document.getElementById('project-status').value;
            const type = document.getElementById('communication-type').value;
            const outputArea = document.getElementById('communication-output');

            if (!title) {
                window.showMessage("Proje ba≈ülƒ±ƒüƒ± girilmelidir.", 'bg-red-600');
                return;
            }

            outputArea.value = ''; // √ñnceki √ßƒ±ktƒ±yƒ± temizle
            
            let systemPrompt = `You are a professional marketing specialist for 'Bozkurt ƒ∞n≈üaat' in Turkey, focusing on luxury real estate. Generate the requested content using the provided project details. Write the entire response in Turkish.`;
            let userPrompt = `Proje Adƒ±: ${title}. Konum: ${location}. Durum: ${status === 'completed' ? 'Tamamlandƒ±' : 'Devam Ediyor'}. Temel √ñzellikler: ${featuresString}. Kƒ±sa A√ßƒ±klama: ${description}.\n\n`;

            if (type === 'email') {
                systemPrompt += ` Your task is to draft a formal, personalized marketing email to a potential high-net-worth client. The email must be polite, engaging, highlight key features, and include a strong call-to-action for a site visit. Use a professional salutation and closing. Max 200 words.`;
                userPrompt += `Bu bilgileri kullanarak potansiyel bir m√º≈üteriye √∂zel e-posta taslaƒüƒ± olu≈ütur.`;
            } else if (type === 'social') {
                systemPrompt += ` Your task is to draft a short, visually appealing social media post (e.g., for Instagram/X) using emojis and hashtags. Focus on excitement, luxury, and the project status. Max 50 words.`;
                userPrompt += `Bu bilgileri kullanarak sosyal medya (Instagram/X) g√∂nderisi taslaƒüƒ± olu≈ütur (emoji ve hashtag kullan).`;
            } else if (type === 'brief') {
                systemPrompt += ` Your task is to draft a concise, objective summary for an investor briefing. Focus only on the project facts, status, and key investment highlights. Max 150 words.`;
                userPrompt += `Bu bilgileri kullanarak yatƒ±rƒ±mcƒ±lar i√ßin resmi, kƒ±sa bir proje brifingi √∂zeti olu≈ütur.`;
            }

            window.showMessage("‚ú® Pazarlama metni Gemini ile hazƒ±rlanƒ±yor... L√ºtfen bekleyin.", 'bg-blue-600', 5000);

            try {
                const payload = {
                    contents: [{ parts: [{ text: userPrompt }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    }
                };

                const result = await fetchWithBackoff(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    outputArea.value = text.trim();
                    window.showMessage("‚ú® Metin ba≈üarƒ±yla olu≈üturuldu!", 'bg-green-600');
                } else {
                    window.showMessage("Metin olu≈üturulamadƒ±. L√ºtfen tekrar deneyin.", 'bg-red-600');
                }
            } catch (error) {
                console.error("Gemini API Hatasƒ±:", error);
                window.showMessage(`API hatasƒ±: Metin olu≈üturulamadƒ±. ${error.message}`, 'bg-red-600', 8000);
            }
        };


        // --- GENEL UI VE Y√ñNETƒ∞M FONKSƒ∞YONLARI ---

        // Mesaj kutusu g√∂ster
        window.showMessage = function(message, bgColorClass = 'bg-green-600', duration = 3000) {
            const box = document.getElementById('message-box');
            box.textContent = message;
            box.className = 'fixed bottom-5 right-5 text-white p-4 rounded-lg shadow-xl transition-all duration-300 ease-in-out z-[1000] ' + bgColorClass;
            box.classList.remove('hidden', 'opacity-0');
            box.classList.add('opacity-100');

            setTimeout(() => {
                box.classList.remove('opacity-100');
                box.classList.add('opacity-0');
                setTimeout(() => box.classList.add('hidden'), 300);
            }, duration);
        }

        // G√∂r√ºn√ºm Deƒüi≈ütirme
        window.showView = function(viewId) {
            const mainView = document.getElementById('main-view');
            const adminView = document.getElementById('admin-view');

            if (viewId === 'admin') {
                mainView.classList.remove('visible-view');
                mainView.classList.add('hidden-view');
                adminView.classList.remove('hidden-view');
                adminView.classList.add('visible-view');
                document.body.classList.add('elite-bg'); 
                window.renderAdminProjectTable();
                window.renderAdminInquiryTable(); // YENƒ∞: ƒ∞stekler tablosunu da render et
            } else { // main
                adminView.classList.remove('visible-view');
                adminView.classList.add('hidden-view');
                mainView.classList.remove('hidden-view');
                mainView.classList.add('visible-view');
                window.renderProjects();
            }
            lucide.createIcons();
        }

        // Mobile Menu A√ß/Kapa
        window.setupMobileMenu = function() {
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuLinks = document.querySelectorAll('.menu-item-link');

            menuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuButton.setAttribute('aria-expanded', mobileMenu.classList.contains('hidden') ? 'false' : 'true');
            });

            menuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    menuButton.setAttribute('aria-expanded', 'false');
                });
            });
        }

        // --- PUBLIC Sƒ∞TE RENDER ƒ∞≈ûLEMLERƒ∞ ---

window.renderProjectCard = function(project) {
    const isCompleted = project.status === 'completed';
    const yearText = project.year ? `${project.year}` : '';
    const statusColor = isCompleted ? 'bg-green-600' : 'bg-yellow-600';
    const statusText = isCompleted ? 'Tamamlandƒ±' : 'Devam Ediyor';
    
    const imageUrl = project.images && project.images.length > 0 
        ? project.images[0] 
        : `https://placehold.co/400x300/475569/FACC15?text=${encodeURIComponent(project.title)}`;

    return `
        <div class="scroll-snap-card rounded-xl bg-slate-900 shadow-2xl overflow-hidden transform hover:scale-[1.02] transition duration-300 border border-slate-700">
            <div class="relative h-64 overflow-hidden">
                <img src="${imageUrl}" 
                     alt="${project.title} Projesi G√∂rseli" 
                     class="w-full h-full object-cover transition duration-500 hover:opacity-90"
                     onerror="this.onerror=null; this.src='https://placehold.co/400x300/475569/FACC15?text=G√∂rsel+Bulunamadƒ±';"
                >
                <span class="absolute top-3 right-3 ${statusColor} text-xs font-bold text-white px-3 py-1 rounded-full shadow-md">${statusText}</span>
            </div>
            <div class="p-6">
                <h4 class="text-2xl font-bold text-white elite-text mb-2">${project.title}</h4>
                <p class="text-sm text-gray-400 mb-3 flex items-center">
                    <i data-lucide="map-pin" class="w-4 h-4 mr-2 text-yellow-500"></i> ${project.location || 'Konum Belirtilmemi≈ü'}${yearText ? ` (${yearText})` : ''}
                </p>
                <p class="text-gray-300 text-sm mb-4 line-clamp-3">${project.description}</p>
                <button onclick="window.showProjectModal('${project.id}')" class="text-sm text-yellow-500 font-semibold hover:text-yellow-400 transition duration-200 flex items-center">
                    Detaylarƒ± G√∂r <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                </button>
            </div>
        </div>
    `;
}

// ‚úÖ YENƒ∞: Devam eden projeler i√ßin (grid layout)
window.renderOngoingProjectCard = function(project) {
    const yearText = project.year ? `${project.year}` : '';
    
    const imageUrl = project.images && project.images.length > 0 
        ? project.images[0] 
        : `https://placehold.co/400x300/475569/FACC15?text=${encodeURIComponent(project.title)}`;

    return `
        <div class="rounded-xl bg-slate-900 shadow-2xl overflow-hidden transform hover:scale-[1.02] transition duration-300 border border-slate-700">
            <div class="relative h-64 overflow-hidden">
                <img src="${imageUrl}" 
                     alt="${project.title} Projesi G√∂rseli" 
                     class="w-full h-full object-cover transition duration-500 hover:opacity-90"
                     onerror="this.onerror=null; this.src='https://placehold.co/400x300/475569/FACC15?text=G√∂rsel+Bulunamadƒ±';"
                >
                <span class="absolute top-3 right-3 bg-yellow-600 text-xs font-bold text-white px-3 py-1 rounded-full shadow-md">Devam Ediyor</span>
            </div>
            <div class="p-6">
                <h4 class="text-2xl font-bold text-white elite-text mb-2">${project.title}</h4>
                <p class="text-sm text-gray-400 mb-3 flex items-center">
                    <i data-lucide="map-pin" class="w-4 h-4 mr-2 text-yellow-500"></i> ${project.location || 'Konum Belirtilmemi≈ü'}${yearText ? ` (${yearText})` : ''}
                </p>
                <p class="text-gray-300 text-sm mb-4 line-clamp-3">${project.description}</p>
                <button onclick="window.showProjectModal('${project.id}')" class="text-sm text-yellow-500 font-semibold hover:text-yellow-400 transition duration-200 flex items-center">
                    Detaylarƒ± G√∂r <i data-lucide="arrow-right" class="w-4 h-4 ml-1"></i>
                </button>
            </div>
        </div>
    `;
}

    window.renderProjects = function() {
    const completedContainer = document.getElementById('completed-projects-container');
    const ongoingContainer = document.getElementById('ongoing-projects-container');
    const noCompleted = document.getElementById('no-completed-projects');
    const noOngoing = document.getElementById('no-ongoing-projects');

    if (!completedContainer || !ongoingContainer) return;

    completedContainer.innerHTML = '';
    ongoingContainer.innerHTML = '';
    
    const completed = window.projects.filter(p => p.status === 'completed');
    const ongoing = window.projects.filter(p => p.status === 'ongoing');

    // Tamamlanan projeler (yatay scroll)
    if (completed.length > 0) {
        completed.forEach(p => completedContainer.innerHTML += window.renderProjectCard(p)); // ‚úÖ ESKƒ∞ HALƒ∞
        noCompleted.classList.add('hidden');
    } else {
        completedContainer.innerHTML = '';
        noCompleted.classList.remove('hidden');
    }

    // Devam eden projeler (grid layout)
    if (ongoing.length > 0) {
        ongoing.forEach(p => ongoingContainer.innerHTML += window.renderOngoingProjectCard(p));
        noOngoing.classList.add('hidden');
    } else {
        ongoingContainer.innerHTML = '';
        noOngoing.classList.remove('hidden');
    }

    lucide.createIcons();
}

window.renderContactInfo = function() {
    const info = window.contactInfo;
    console.log("renderContactInfo √ßalƒ±≈ütƒ±, kullanƒ±lan veri:", info, "| timestamp:", new Date().toISOString());

    // 1. ADRES G√ºncelleme
    const addressEl = document.getElementById('contact-address-display');
    if (addressEl) {
        addressEl.textContent = info.address || "Adres bilgisi mevcut deƒüil";
        console.log(`Adres g√ºncellendi: "${addressEl.textContent}"`);
    } else {
        console.warn("‚ö†Ô∏è Adres elementi bulunamadƒ±! DOM hen√ºz hazƒ±r olmayabilir.");
    }

    // 2. TELEFON G√ºncelleme
    const phoneDisplayEl = document.getElementById('contact-phone-display');
    const phoneLinkEl = document.getElementById('contact-phone-link');
    if (phoneDisplayEl && phoneLinkEl && info.phone) {
        phoneDisplayEl.textContent = info.phone;
        phoneLinkEl.href = 'tel:' + info.phone.replace(/[^0-9+]/g, '');
        console.log("Telefon g√ºncellendi:", info.phone);
    } else {
        console.warn("‚ö†Ô∏è Telefon elementleri veya veri eksik");
    }

    // 3. E-POSTA G√ºncelleme
    const emailDisplayEl = document.getElementById('contact-email-display');
    const emailLinkEl = document.getElementById('contact-email-link');
    if (emailDisplayEl && emailLinkEl && info.email) {
        emailDisplayEl.textContent = info.email;
        emailLinkEl.href = 'mailto:' + info.email;
        console.log("E-posta g√ºncellendi:", info.email);
    } else {
        console.warn("‚ö†Ô∏è E-posta elementleri veya veri eksik");
    }
};

// Admin Formunu Doldur
window.populateContactForm = function() {
    const addressInput = document.getElementById('admin-contact-address');
    const phoneInput = document.getElementById('admin-contact-phone');
    const emailInput = document.getElementById('admin-contact-email');

    if (addressInput) addressInput.value = window.contactInfo.address || '';
    if (phoneInput) phoneInput.value = window.contactInfo.phone || '';
    if (emailInput) emailInput.value = window.contactInfo.email || '';
};

        // Proje Detay Modalƒ±nƒ± G√∂ster (G√úNCELLENDƒ∞)
        window.showProjectModal = function(id) {
            const project = window.projects.find(p => p.id === id);
            if (!project) return;

            const modal = document.getElementById('project-modal');
            const content = document.getElementById('modal-content');
            
            const featuresHtml = (project.features && project.features.length > 0)
    ? `
    <ul class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3 mt-4 text-slate-300">
        ${project.features.map(f => `
            <li class="flex items-center text-sm">
                <i data-lucide="check-circle" class="w-4 h-4 mr-2 text-yellow-400 flex-shrink-0"></i>
                <span class="font-medium">${f}</span>
            </li>
        `).join('')}
    </ul>
    `
    : '<p class="text-gray-500 text-sm mt-4">√ñzellikler hen√ºz eklenmemi≈ü.</p>';
            
            // YENƒ∞: Proje ƒ∞leti≈üim Bilgileri
            const contactHtml = (project.contact_person && project.contact_phone) ? `
                <div class="mt-8 pt-6 border-t border-slate-700">
                    <h3 class="text-2xl font-bold text-white elite-text mb-4">Proje Satƒ±≈ü ƒ∞leti≈üim Noktasƒ±</h3>
                    <p class="text-gray-300 mb-2 flex items-center"><i data-lucide="user" class="w-5 h-5 mr-3 text-yellow-500"></i> Yetkili: ${project.contact_person}</p>
                    <p class="text-gray-300 mb-2 flex items-center"><i data-lucide="phone" class="w-5 h-5 mr-3 text-yellow-500"></i> Telefon: <a href="tel:${project.contact_phone}" class="hover:underline">${project.contact_phone}</a></p>
                    ${project.contact_email ? `<p class="text-gray-300 flex items-center"><i data-lucide="mail" class="w-5 h-5 mr-3 text-yellow-500"></i> E-posta: <a href="mailto:${project.contact_email}" class="hover:underline">${project.contact_email}</a></p>` : ''}
                </div>
            ` : '';

            // Carousel (G√∂rsel D√∂ng√ºs√º)
            const carouselImages = (project.images && project.images.length > 0)
                ? project.images.map((imgSrc, index) => `
                    <div class="carousel-item w-full flex-shrink-0 snap-center" data-index="${index}">
                        <img src="${imgSrc}" 
                            alt="${project.title} G√∂rsel ${index + 1}" 
                            class="w-full h-96 object-cover rounded-xl shadow-lg"
                            onerror="this.onerror=null; this.src='https://placehold.co/800x400/475569/FACC15?text=G√∂rsel+Bulunamadƒ±';"
                        >
                    </div>
                  `).join('')
                : `<div class="carousel-item w-full flex-shrink-0 snap-center"><img src="https://placehold.co/800x400/475569/FACC15?text=${encodeURIComponent('G√∂rsel Yok')}" alt="G√∂rsel Yok" class="w-full h-96 object-cover rounded-xl shadow-lg"></div>`;

            content.innerHTML = `
                <div class="mb-6">
                    <h1 id="modal-title" class="text-4xl font-extrabold elite-text mb-2">${project.title}</h1>
                    <p class="text-xl text-gray-300 mb-4">${project.location || 'Konum Belirtilmemi≈ü'} | Teslim Yƒ±lƒ±: ${project.year || 'N/A'}</p>
                </div>
                
                <!-- G√∂rsel Carousel -->
                <div class="relative mb-8">
                    <div id="project-carousel" class="flex overflow-x-auto snap-x snap-mandatory rounded-xl transition duration-300 ease-in-out">
                        ${carouselImages}
                    </div>
                    <!-- Navigasyon Butonlarƒ± -->
                    <button onclick="window.moveCarousel('prev')" class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-black bg-opacity-50 p-3 rounded-full text-white hover:bg-opacity-75 transition z-10">
                        <i data-lucide="chevron-left" class="w-6 h-6"></i>
                    </button>
                    <button onclick="window.moveCarousel('next')" class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-black bg-opacity-50 p-3 rounded-full text-white hover:bg-opacity-75 transition z-10">
                        <i data-lucide="chevron-right" class="w-6 h-6"></i>
                    </button>
                    <div id="carousel-dots" class="absolute bottom-4 left-0 right-0 flex justify-center space-x-2">
                        ${project.images && project.images.length > 0 ? project.images.map((_, index) => `<span class="dot w-2 h-2 bg-gray-400 rounded-full cursor-pointer transition duration-300 ${index === 0 ? 'bg-yellow-500' : ''}" onclick="window.goToSlide(${index})"></span>`).join('') : ''}
                    </div>
                </div>

                <!-- Detaylƒ± A√ßƒ±klama -->
                <div class="mb-6 border-b border-slate-700 pb-6">
                    <h3 class="text-2xl font-bold text-white elite-text mb-4">Proje Detaylarƒ±</h3>
                    <p class="text-gray-400 leading-relaxed whitespace-pre-wrap">${project.detailedDescription || project.description || 'Detaylƒ± a√ßƒ±klama mevcut deƒüil.'}</p>
                </div>

                <!-- √ñzellikler -->
                <div class="${contactHtml ? 'border-b border-slate-700 pb-6' : ''}">
                    <h3 class="text-2xl font-bold text-white elite-text mb-4">√ñne √áƒ±kan √ñzellikler</h3>
                    <div>${featuresHtml}</div>
                </div>
                
                ${contactHtml}
            `;
            
            lucide.createIcons();

            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('opacity-100'), 10);
            document.body.classList.add('modal-open');
            window.currentProjectCarousel = project;
            window.currentSlideIndex = 0;
            window.updateCarouselDots();
        }

        window.closeProjectModal = function() {
        const modal = document.getElementById('project-modal');
        modal.classList.remove('opacity-100');
        modal.classList.add('opacity-0');
        document.body.classList.remove('modal-open'); // ‚úÖ Bu satƒ±r var ama yetmiyor
    
        setTimeout(() => {
        modal.classList.remove('flex'); // ‚úÖ flex'i kaldƒ±r
        modal.classList.add('hidden'); // ‚úÖ hidden ekle
        }, 300);
        }
        
        // Carousel Navigasyon Fonksiyonlarƒ±
        window.moveCarousel = function(direction) {
            const carousel = document.getElementById('project-carousel');
            if (!carousel || !window.currentProjectCarousel || !window.currentProjectCarousel.images || window.currentProjectCarousel.images.length === 0) return;

            const totalSlides = window.currentProjectCarousel.images.length;
            let newIndex = window.currentSlideIndex;

            if (direction === 'next') {
                newIndex = (newIndex + 1) % totalSlides;
            } else if (direction === 'prev') {
                newIndex = (newIndex - 1 + totalSlides) % totalSlides;
            }
            
            window.goToSlide(newIndex);
        }
        
        window.goToSlide = function(index) {
            const carousel = document.getElementById('project-carousel');
            const slideWidth = carousel.querySelector('.carousel-item').offsetWidth;
            carousel.scrollLeft = slideWidth * index;
            window.currentSlideIndex = index;
            window.updateCarouselDots();
        }
        
        window.updateCarouselDots = function() {
            const dotsContainer = document.getElementById('carousel-dots');
            if (!dotsContainer) return;
            dotsContainer.querySelectorAll('.dot').forEach((dot, index) => {
                if (index === window.currentSlideIndex) {
                    dot.classList.add('bg-yellow-500');
                    dot.classList.remove('bg-gray-400');
                } else {
                    dot.classList.remove('bg-yellow-500');
                    dot.classList.add('bg-gray-400');
                }
            });
        }


        // --- ADMIN Gƒ∞Rƒ∞≈û ƒ∞≈ûLEMLERƒ∞ ---
        
        // G√úNCELLENDƒ∞: Admin giri≈üi i√ßin klavye dinleyicisi
        window.setupAdminAccess = function() {
            const pressedKeys = new Set();
            const requiredKeys = ['Alt', 'b', 'z', 'k']; // 'Alt' yerine 'Meta' (Command) da olabilir, bu platformda Alt kullanƒ±yoruz.

            document.addEventListener('keydown', (e) => {
                // Alt tu≈üunu da yakalamak i√ßin Alt veya Meta kontrol√º ekleyebiliriz
                if (e.key === 'Alt') pressedKeys.add('Alt'); 
                
                // K√º√ß√ºk harfle tu≈ü adƒ±nƒ± al
                const key = e.key.toLowerCase();
                if (requiredKeys.includes(key) && key !== 'Alt') {
                    pressedKeys.add(key);
                }

                if (requiredKeys.every(k => pressedKeys.has(k))) {
                    window.showLoginModal();
                    // Bir kez yakaladƒ±ktan sonra sƒ±fƒ±rla
                    pressedKeys.clear();
                }
            });

            document.addEventListener('keyup', (e) => {
                const key = e.key.toLowerCase();
                pressedKeys.delete(key);
                if (e.key === 'Alt') pressedKeys.delete('Alt');
            });
            
            // Yedek admin butonu (UI'da gizli)
            document.getElementById('debug-admin-btn').onclick = window.showLoginModal;

            };
            window.adminLogin = async () => {
    const emailInput = document.getElementById('admin-email');
    const passwordInput = document.getElementById('admin-password');
    const statusText = document.getElementById('auth-status');

    // Firebase Auth'un hazƒ±r olmasƒ±nƒ± bekle
    if (!window.auth) {
        statusText.textContent = "Firebase ba≈ülatƒ±lƒ±yor, l√ºtfen bekleyin...";
        
        let attempts = 0;
        while (!window.auth && attempts < 50) {
            await new Promise(resolve => setTimeout(resolve, 200));
            attempts++;
        }
        
        if (!window.auth) {
            statusText.textContent = "Hata: Firebase Auth ba≈ülatƒ±lamadƒ±.";
            return;
        }
    }

    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if (!email || !password) {
        statusText.textContent = "E-posta ve ≈üifre girilmelidir.";
        return;
    }

    statusText.textContent = "Giri≈ü yapƒ±lƒ±yor...";

    try {
        // ‚úÖ D√úZELTƒ∞LDƒ∞: signInWithEmailAndPassword'√º import edin
        const { signInWithEmailAndPassword } = await import("https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js");
        
        const userCredential = await signInWithEmailAndPassword(window.auth, email, password);
        const user = userCredential.user;
        
        console.log("‚úÖ Gƒ∞Rƒ∞≈û BA≈ûARILI:", user.email);
        
        window.isAdminLoggedIn = true;
        window.showMessage(`Y√∂netici Giri≈üi Ba≈üarƒ±lƒ±. Ho≈ü geldiniz: ${user.email}`, 'bg-green-600');
        
        window.hideLoginModal();
        window.showView('admin'); 
        
        passwordInput.value = ''; 
        emailInput.value = '';
        statusText.textContent = '';
        
    } catch (error) {
        console.error("‚ùå TAM HATA DETAYI:", error);
        console.error("‚ùå Hata Kodu:", error.code);
        console.error("‚ùå Hata Mesajƒ±:", error.message);
        
        let message = "Giri≈ü ba≈üarƒ±sƒ±z oldu: E-posta veya ≈üifre hatalƒ±.";
        
        if (error.code === 'auth/invalid-email') {
            message = "Ge√ßersiz e-posta formatƒ±.";
        } else if (error.code === 'auth/invalid-credential') {
            message = "E-posta veya ≈üifre hatalƒ±. Firebase'de bu kullanƒ±cƒ± bulunamadƒ±.";
        } else if (error.code === 'auth/user-not-found') {
            message = "Bu e-posta ile kayƒ±tlƒ± kullanƒ±cƒ± bulunamadƒ±.";
        } else if (error.code === 'auth/wrong-password') {
            message = "≈ûifre hatalƒ±.";
        } else if (error.code === 'auth/too-many-requests') {
            message = "√áok fazla ba≈üarƒ±sƒ±z deneme. L√ºtfen daha sonra tekrar deneyin.";
        } else if (error.code) {
            message = `Hata: ${error.code} - ${error.message}`;
        } else {
            message = `Bilinmeyen hata: ${error.message || 'Detay yok'}`;
        }
        
        statusText.textContent = message;
        window.showMessage(message, 'bg-red-600', 8000);
        passwordInput.value = ''; 
    }
};

            window.showLoginModal = function() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('opacity-100'), 10);
            document.body.classList.add('modal-open');
            }

            window.hideLoginModal = function() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('opacity-100');
            modal.classList.add('opacity-0');
            document.body.classList.remove('modal-open');
            setTimeout(() => modal.classList.add('hidden'), 300);
            }


            // --- ADMIN PROJE Y√ñNETƒ∞Mƒ∞ TABLOSU ---
            window.renderAdminProjectTable = function() {
            const tableBody = document.getElementById('admin-project-table-body');
            const noProjectsMessage = document.getElementById('admin-no-projects-message');
            if (!tableBody) return;

            tableBody.innerHTML = ''; 

            if (window.projects.length === 0) {
                noProjectsMessage.classList.remove('hidden');
                tableBody.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-gray-500">Hen√ºz bir proje eklenmemi≈ü.</td></tr>';
                return;
            }
            noProjectsMessage.classList.add('hidden');

            window.projects.forEach(project => {
                const isCompleted = project.status === 'completed';
                const statusColor = isCompleted ? 'bg-green-600' : 'bg-yellow-600';
                const statusText = isCompleted ? 'Tamamlandƒ±' : 'Devam Ediyor';

                const row = document.createElement('tr');
                row.className = 'hover:bg-slate-800 transition duration-150';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">${project.title}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusColor} text-slate-900">${statusText}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">${project.year || 'N/A'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
                        <button onclick="window.editProject('${project.id}')" class="text-yellow-500 hover:text-yellow-300 transition" aria-label="D√ºzenle">
                            <i data-lucide="square-pen" class="w-5 h-5 inline-block"></i>
                        </button>
                        <button onclick="window.deleteProject('${project.id}')" class="text-red-500 hover:text-red-300 transition" aria-label="Sil">
                            <i data-lucide="trash-2" class="w-5 h-5 inline-block"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            lucide.createIcons();
        }

        window.renderAdminInquiryTable = function() {
    const tableBody = document.getElementById('admin-inquiry-table-body');
    const noInquiriesMessage = document.getElementById('admin-no-inquiries-message');
    if (!tableBody) return;

    tableBody.innerHTML = '';

    if (window.inquiries.length === 0) {
        noInquiriesMessage.classList.remove('hidden');
        tableBody.innerHTML = '<tr><td colspan="6" class="text-center py-4 text-gray-500">Hen√ºz bir teklif isteƒüi gelmemi≈ütir.</td></tr>';
        return;
    }
    noInquiriesMessage.classList.add('hidden');

    window.inquiries.forEach(inquiry => {
        const date = new Date(inquiry.timestamp).toLocaleDateString('tr-TR', { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        const summary = inquiry.message.length > 50 ? inquiry.message.substring(0, 50) + '...' : inquiry.message;
        const statusColor = inquiry.status === 'Yeni' ? 'bg-red-600' : 'bg-green-600';

        const row = document.createElement('tr');
        row.className = 'hover:bg-slate-800 transition duration-150';
        row.innerHTML = `
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white w-[15%]">${inquiry.name}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400 w-[20%]">${inquiry.email}</td>
            <td class="px-6 py-4 text-sm text-gray-300 truncate cursor-pointer hover:text-yellow-400 w-[30%]" onclick="window.showMessage('Tam Mesaj: ${inquiry.message.replace(/'/g, "\\'")}', 'bg-blue-600', 10000)" title="Mesajƒ±n tamamƒ±nƒ± g√∂rmek i√ßin tƒ±klayƒ±n">${summary}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400 w-[15%]">${date}</td>
            <td class="px-6 py-4 whitespace-nowrap text-center w-[10%]">
            <button onclick="window.updateInquiryStatus('${inquiry.id}', '${inquiry.status === 'Yeni' ? 'Okundu' : 'Yeni'}')" 
            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusColor} text-white hover:opacity-80 transition cursor-pointer">
            ${inquiry.status}
            </button>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium w-[10%]">
                <button onclick="window.deleteInquiry('${inquiry.id}')" class="text-red-500 hover:text-red-300 transition" aria-label="Sil">
                    <i data-lucide="trash-2" class="w-5 h-5 inline-block"></i>
                </button>
            </td>
        `;
        tableBody.appendChild(row);
    });
    
    lucide.createIcons();
}


        // --- PROJE CRUD MODAL ƒ∞≈ûLEMLERƒ∞ ---
        window.openProjectModal = function(project = null) {
            const modal = document.getElementById('project-crud-modal');
            const form = document.getElementById('project-crud-form');
            form.reset(); 
            window.currentProjectImages = []; // Global g√∂rsel array'ini temizle
            document.getElementById('communication-output').value = ''; // ƒ∞leti≈üim √ßƒ±ktƒ±sƒ±nƒ± temizle

            document.getElementById('crud-modal-title').textContent = project ? 'Proje D√ºzenle' : 'Yeni Proje Ekle';
            document.getElementById('project-id').value = project ? project.id : '';
            
            if (project) {
                // Mevcut projeyi d√ºzenle
                document.getElementById('project-title').value = project.title || '';
                document.getElementById('project-status').value = project.status || 'ongoing';
                document.getElementById('project-year').value = project.year || '';
                document.getElementById('project-location').value = project.location || '';
                document.getElementById('project-description').value = project.description || '';
                document.getElementById('project-detailed-description').value = project.detailedDescription || '';
                document.getElementById('project-contact-person').value = project.contact_person || ''; // YENƒ∞
                document.getElementById('project-contact-phone').value = project.contact_phone || ''; // YENƒ∞
                document.getElementById('project-contact-email').value = project.contact_email || ''; // YENƒ∞
                
                // √ñzellikler dizisini string'e √ßevir
                document.getElementById('project-features').value = project.features ? project.features.join(', ') : '';
                
                // G√∂rselleri global array'e y√ºkle
                if (project.images) {
                    window.currentProjectImages = [...project.images];
                }
            } else {
                // Yeni proje
                document.getElementById('project-status').value = 'ongoing';
            }
            
            window.renderImagePreviews(); // √ñnizlemeleri g√∂ster

            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('opacity-100'), 10);
            document.body.classList.add('modal-open');
        }
        
        window.editProject = function(id) {
            const project = window.projects.find(p => p.id === id);
            if (project) {
                window.openProjectModal(project);
            } else {
                window.showMessage('Proje bulunamadƒ±.', 'bg-red-600');
            }
        }
        
        window.hideProjectModal = function() {
            const modal = document.getElementById('project-crud-modal');
            modal.classList.remove('opacity-100');
            modal.classList.add('opacity-0');
            document.body.classList.remove('modal-open');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        window.handleProjectSubmit = function(form) {
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => data[key] = value);
            
            // year alanƒ±nƒ± sayƒ±ya √ßevir
            if (data.year) {
                data.year = parseInt(data.year, 10);
                if (isNaN(data.year)) {
                    data.year = null; // Sayƒ± deƒüilse null yap
                }
            } else {
                data.year = null;
            }

            window.saveProject(data);
        }
        
        // --- DRAG & DROP ƒ∞≈ûLEMLERƒ∞ ---
        window.setupDragAndDrop = function() {
            const dropZone = document.getElementById('image-drop-zone');
            const fileInput = document.getElementById('file-input');
            if (!dropZone || !fileInput) return;

            // Drag enter/leave
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);
            });

            // Drop event
            dropZone.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFiles(files);
            }

            // File Input change
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });

            function handleFiles(files) {
                [...files].forEach(window.processFile);
                // Input'u temizle ki aynƒ± dosyayƒ± tekrar se√ßebilsin
                fileInput.value = ''; 
            }
        };
        
        // URL'den g√∂rsel ekleme
        window.addUrlImage = function() {
            const urlInput = document.getElementById('url-input');
            const url = urlInput.value.trim();

            if (url && (url.startsWith('http://') || url.startsWith('https://'))) {
                window.currentProjectImages.push(url);
                window.renderImagePreviews();
                urlInput.value = '';
                window.showMessage("Harici g√∂rsel URL'i eklendi.", 'bg-blue-600');
            } else if (url) {
                window.showMessage("Ge√ßersiz URL formatƒ±.", 'bg-red-600');
            }
        };

        // G√∂rseli kaldƒ±rma (Base64 veya URL)
        window.removeImage = function(index) {
            if (index > -1 && index < window.currentProjectImages.length) {
                window.currentProjectImages.splice(index, 1);
                window.renderImagePreviews();
                window.showMessage("G√∂rsel kaldƒ±rƒ±ldƒ±.", 'bg-yellow-600');
            }
        };
        
        // Base64'e d√∂n√º≈üt√ºrme ve global array'e ekleme
        window.processFile = function(file) {
            if (!file.type.startsWith('image/')) {
                window.showMessage(`${file.name}: Sadece g√∂rsel dosyalarƒ± kabul edilir.`, 'bg-red-600');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                // Base64 string'in boyutunu kontrol et (1MB sƒ±nƒ±rƒ± i√ßin kaba kontrol)
                if (e.target.result.length > 1300000) { // ~1MB
                    window.showMessage(`${file.name}: G√∂rsel boyutu √ßok b√ºy√ºk (1MB sƒ±nƒ±rƒ±). L√ºtfen daha k√º√ß√ºk bir dosya kullanƒ±n.`, 'bg-red-600', 8000);
                    return;
                }
                
                window.currentProjectImages.push(e.target.result);
                window.renderImagePreviews();
            };
            reader.onerror = (e) => {
                 window.showMessage(`${file.name}: Okuma hatasƒ±.`, 'bg-red-600');
            };
            reader.readAsDataURL(file);
        };
        
        // G√∂rsel √∂nizlemelerini render etme
        window.renderImagePreviews = function() {
            const container = document.getElementById('image-previews');
            if (!container) return;

            container.innerHTML = ''; // √ñnceki √∂nizlemeleri temizle

            if (window.currentProjectImages.length === 0) {
                 container.innerHTML = '<p class="text-gray-500 text-sm italic p-2">Y√ºklenen g√∂rseller burada g√∂r√ºnecek.</p>';
                 return;
            }

            window.currentProjectImages.forEach((src, index) => {
                const isBase64 = src.startsWith('data:');
                const badge = isBase64 
                    ? '<span class="absolute bottom-0 left-0 bg-yellow-500 text-[10px] font-bold px-1 rounded-tr-lg text-slate-900">BASE64</span>'
                    : '<span class="absolute bottom-0 left-0 bg-blue-500 text-[10px] font-bold px-1 rounded-tr-lg text-white">URL</span>';
                
                const previewHtml = `
                    <div class="preview-image-container rounded-lg overflow-hidden shadow-md border border-slate-600">
                        <img src="${src}" alt="√ñnizleme ${index + 1}" class="w-full h-full"
                            onerror="this.onerror=null; this.src='https://placehold.co/80x80/475569/FACC15?text=Hata';"
                        >
                        ${badge}
                        <button type="button" class="remove-image-btn" onclick="window.removeImage(${index})">&times;</button>
                    </div>
                `;
                container.innerHTML += previewHtml;
            });
        };
window.addEventListener('load', () => {
    window.renderProjects(); 
    window.setupMobileMenu();
    window.setupAdminAccess(); 
    window.setupDragAndDrop();
    window.setupDragScroll();
    
    // ‚úÖ EKLE: ƒ∞leti≈üim bilgilerini ilk y√ºklemede de render et
    if (window.contactInfo && Object.keys(window.contactInfo).length > 0) {
        window.renderContactInfo();
    }
    
    lucide.createIcons(); 
});

        
    </script>
</body>
</html>
