<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bozkurt Ä°nÅŸaat - BZK YapÄ± Ä°zmir | LÃ¼ks Villa Daire Konut Projeleri</title>
    
    <!-- âœ… SEO Meta Etiketleri - Optimize EdilmiÅŸ -->
    <meta name="description" content="BZK YapÄ± - Bozkurt Ä°nÅŸaat Ä°zmir'de lÃ¼ks villa, modern daire ve prestijli konut projeleri. Ä°zmir'in en gÃ¼venilir mÃ¼teahhit firmasÄ±. 20 yÄ±llÄ±k tecrÃ¼be, kaliteli inÅŸaat ve zamanÄ±nda teslim garantisi.">
    <meta name="keywords" content="bozkurt inÅŸaat, bzk inÅŸaat, bzk yapÄ±, bzk yapi, bozkurt yapÄ±, izmir villa, izmir daire, lÃ¼ks konut izmir, lÃ¼ks villa izmir, modern daire izmir, prestijli konut, izmir inÅŸaat firmasÄ±, izmir mÃ¼teahhit, gÃ¼venilir inÅŸaat, kaliteli konut, izmir lÃ¼ks projeler, villa projeleri izmir, daire projeleri izmir">
    <meta name="author" content="Bozkurt Ä°nÅŸaat - BZK YapÄ±">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <link rel="canonical" href="https://www.bzkyapi.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.bzkyapi.com/">
    <meta property="og:title" content="Bozkurt Ä°nÅŸaat - BZK YapÄ± Ä°zmir | LÃ¼ks Villa Daire Konut Projeleri">
    <meta property="og:description" content="Ä°zmir'de lÃ¼ks villa, modern daire ve prestijli konut projeleri. 20 yÄ±llÄ±k tecrÃ¼be ile gÃ¼venilir inÅŸaat.">
    <meta property="og:image" content="https://www.bzkyapi.com/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.bzkyapi.com/">
    <meta property="twitter:title" content="Bozkurt Ä°nÅŸaat - BZK YapÄ± Ä°zmir | LÃ¼ks Villa Daire">
    <meta property="twitter:description" content="Ä°zmir'de lÃ¼ks villa, modern daire ve prestijli konut projeleri.">
    <meta property="twitter:image" content="https://www.bzkyapi.com/twitter-image.jpg">

    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
     <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "RealEstateAgent",
      "name": "Bozkurt Ä°nÅŸaat - BZK YapÄ±",
      "alternateName": ["BZK Ä°nÅŸaat", "BZK YapÄ±", "Bozkurt YapÄ±"],
      "url": "https://www.bzkyapi.com",
      "logo": "https://www.bzkyapi.com/logo.png",
      "description": "Ä°zmir'de lÃ¼ks villa, modern daire ve prestijli konut projeleri sunan gÃ¼venilir inÅŸaat firmasÄ±. 20 yÄ±llÄ±k tecrÃ¼be ile kaliteli ve zamanÄ±nda teslim.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Ä°zmir",
        "addressRegion": "Ä°zmir",
        "addressCountry": "TR"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+90-232-XXX-XX-XX",
        "contactType": "Customer Service",
        "areaServed": "TR",
        "availableLanguage": ["Turkish"]
      },
      "sameAs": [
        "https://www.facebook.com/bzkyapi",
        "https://www.instagram.com/bzkyapi",
        "https://www.linkedin.com/company/bzkyapi"
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "127"
      },
      "priceRange": "â‚ºâ‚ºâ‚º",
      "makesOffer": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Product",
            "name": "LÃ¼ks Villa Projeleri Ä°zmir"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Product",
            "name": "Modern Daire Projeleri Ä°zmir"
          }
        }
      ]
    }
    </script>
    <!-- Tailwind CSS YÃ¼klemesi -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
    // ...
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    // ...
    </script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
/* Ä°nter Fontu ve Ana Renkler */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

body {
    font-family: 'Inter', sans-serif;
}

html {
    scroll-behavior: smooth;
}

.elite-bg { background-color: #0F172A; }
.elite-text { color: #FACC15; }
.elite-border { border-color: #FACC15; }

.section-separator {
    content: '';
    display: block;
    width: 80px;
    height: 3px;
    background-color: #FACC15;
    margin: 1rem 0;
    border-radius: 9999px;
}

/* Scrollbar Gizleme */
.scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
    display: none;
}

/* Line Clamp Utilities */
.line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
}
.line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}
.line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

/* Custom Scrollbar for Modal */
.scrollbar-custom {
    scrollbar-width: thin;
    scrollbar-color: #FACC15 #1E293B;
}
.scrollbar-custom::-webkit-scrollbar {
    width: 8px;
}
.scrollbar-custom::-webkit-scrollbar-track {
    background: #1E293B;
    border-radius: 10px;
}
.scrollbar-custom::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #FACC15, #F59E0B);
    border-radius: 10px;
}
.scrollbar-custom::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #FDE047, #FACC15);
}

/* Hero ve Genel Efektler - âœ… PERFORMANS OPTÄ°MÄ°ZE */
.hero-pin-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background-color: #1E293B;
    z-index: -1;
}

.hero-vignette {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
    pointer-events: none;
}

.content-overlay {
    position: relative;
    z-index: 10;
}

/* âœ… PERFORMANS BOOST - TÃ¼m geÃ§iÅŸleri hÄ±zlandÄ±r */
* {
    transition-duration: 0.15s !important;
}

/* âœ… Sadece Ã¶nemli elementlerde smooth transition */
.card-hover,
.modal,
button:not(.remove-image-btn),
a,
input,
textarea,
select {
    transition-duration: 0.2s !important;
}

/* âœ… YENÄ° - Basit Hover Efekti (Scale YOK) */
.card-hover {
    transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.card-hover:hover {
    box-shadow: 0 8px 24px rgba(250, 204, 21, 0.2);
}

/* âœ… Transform animasyonlarÄ±nÄ± devre dÄ±ÅŸÄ± bÄ±rak */
.group:hover .transform,
.transform:hover {
    transform: none !important;
}

/* âœ… Buton hover - sadece opacity */
button:hover,
a:hover {
    opacity: 0.9;
}

/* âœ… GÃ¶rsel hover animasyonlarÄ±nÄ± kaldÄ±r */
img {
    transition: none !important;
}

.group:hover img {
    transform: none !important;
    filter: none !important;
}

/* âœ… Reduced Motion DesteÄŸi */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* âœ… GPU Acceleration - Sadece carousel iÃ§in */
.carousel-item,
#project-carousel {
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* âœ… MOBÄ°L: Dikey sÄ±ralama, normal scroll */
.horizontal-scroll-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
    padding: 0 1rem;
    overflow: visible;
}

.scroll-snap-card {
    width: 100%;
    max-width: none;
    margin: 0;
}

/* âœ… MOBÄ°L: Kartlar daha geniÅŸ ve padding minimal */
@media (max-width: 767px) {
    .horizontal-scroll-container {
        padding: 0 0.5rem;
    }
    
    .scroll-snap-card,
    .horizontal-scroll-container > div {
        min-width: 100%;
    }
    
    .scroll-snap-card {
        margin: 0 auto;
        max-width: 100%;
    }
}

/* âœ… TABLET iÃ§in 3 sÃ¼tun GRID LAYOUT (768px - 1023px) */
@media (min-width: 768px) {
    .horizontal-scroll-container {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
        overflow-x: visible;
        overflow-y: visible;
        cursor: default;
        padding: 0 2rem;
        scroll-snap-type: none;
        scroll-padding: 0;
    }
    
    .scroll-snap-card {
        flex: none;
        width: 100%;
        min-width: auto;
        max-width: none;
        scroll-snap-align: unset;
        scroll-snap-stop: unset;
    }
}

/* âœ… MASAÃœSTÃœ iÃ§in 4 sÃ¼tun GRID LAYOUT (1024px+) */
@media (min-width: 1024px) {
    .horizontal-scroll-container {
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 3rem;
    }
}

/* âœ… Ã‡ok bÃ¼yÃ¼k ekranlar iÃ§in (1536px+) */
@media (min-width: 1536px) {
    .horizontal-scroll-container {
        max-width: 1600px;
        gap: 2.5rem;
    }
}

.modal-open {
    overflow: hidden;
}

/* Admin Paneli Ã–zel Stilleri */
.admin-view {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 300;
    background-color: #1E293B;
    transition: opacity 0.3s ease; /* 0.5s -> 0.3s */
    overflow-y: auto;
}

.hidden-view {
    display: none;
    opacity: 0;
}

.visible-view {
    display: block;
    opacity: 1;
}

/* Drag & Drop AlanÄ± Stilleri */
#image-drop-zone {
    border: 2px dashed #475569;
    background-color: #1E293B;
    transition: border-color 0.2s, background-color 0.2s;
}

#image-drop-zone.dragover {
    border-color: #FACC15;
    background-color: #334155;
}

.preview-image-container {
    position: relative;
    width: 80px;
    height: 80px;
    background-color: #475569;
}

.preview-image-container img {
    object-fit: cover;
}

.remove-image-btn {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: #ef4444;
    color: white;
    border-radius: 9999px;
    width: 20px;
    height: 20px;
    line-height: 1;
    font-weight: bold;
    text-align: center;
    cursor: pointer;
    transition: background-color 0.15s;
}

.remove-image-btn:hover {
    background-color: #dc2626;
}

/* âœ… Mobil Ä°yileÅŸtirmeleri */
@media (max-width: 768px) {
    section.min-h-screen {
        min-height: 100vh;
        min-height: 100dvh;
        padding-top: 4rem;
    }
    
    section.min-h-screen .container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    section.min-h-screen .max-w-xl {
        padding: 1.5rem !important;
        margin-top: 2rem;
    }
    
    section.min-h-screen h1 {
        font-size: 2rem !important;
        line-height: 1.2;
    }
    
    header.sticky {
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
    }
    
    header nav {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    header nav a.text-2xl {
        font-size: 1.25rem !important;
    }
    
    section.min-h-screen .absolute.bottom-10 {
        bottom: 2rem;
    }
}

/* âœ… Ã‡ok kÃ¼Ã§Ã¼k ekranlar iÃ§in (iPhone SE, vb.) */
@media (max-width: 375px) {
    section.min-h-screen h1 {
        font-size: 1.75rem !important;
    }
    
    section.min-h-screen p {
        font-size: 0.95rem !important;
    }
    
    section.min-h-screen a.inline-block {
        padding: 0.75rem 2rem !important;
        font-size: 0.95rem !important;
    }
}
    </style>
    <!-- Firebase ModÃ¼lleri -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut,signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, setLogLevel, addDoc, doc, setDoc, deleteDoc, writeBatch } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        setLogLevel('debug');
        window.writeBatch = writeBatch;
        window.doc = doc;

        const firebaseConfigRaw = typeof __firebase_config !== 'undefined' ? __firebase_config : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let firebaseConfig = {};
        const PLACEHOLDER_PROJECT_ID = "abc";
        let appId = 'web-ce7b2'; // âœ… Direkt Firebase project ID'nizi yazÄ±n
        
        if (firebaseConfigRaw) {
            firebaseConfig = JSON.parse(firebaseConfigRaw);
            if (canvasAppId === 'default-app-id' && firebaseConfig.projectId) {
                appId = firebaseConfig.projectId;
            }
        } else {
            // ğŸ‘‡ğŸ‘‡ğŸ‘‡ BURAYA KENDÄ° GERÃ‡EK FIREBASE YAPILANDIRMANIZI EKLEYÄ°N ğŸ‘‡ğŸ‘‡ğŸ‘‡
            firebaseConfig = {
                // Sizin Firebase Konsolunuzdan kopyaladÄ±ÄŸÄ±nÄ±z 
                // gerÃ§ek config bilgileri buraya gelecek.
                apiKey: "AIzaSyCE86zO9qIRrtTbsvzQqm-0BXX4q3QkYF8",
                authDomain: "web-ce7b2.firebaseapp.com",
                projectId: "web-ce7b2",
                storageBucket: "web-ce7b2.firebasestorage.app",
                messagingSenderId: "386978872857",
                appId: "1:386978872857:web:f235f1f38b573b63d07488",
                measurementId: "G-RPB45EJ6V5"
            };
            appId = firebaseConfig.projectId; 
            // ğŸ‘†ğŸ‘†ğŸ‘† BURAYA KENDÄ° GERÃ‡EK FIREBASE YAPILANDIRMANIZI EKLEYÄ°N ğŸ‘†ğŸ‘†ğŸ‘†
        }
        
        const PROJECT_COLLECTION_PATH = `projects`;
        const INQUIRY_COLLECTION_PATH = `inquiries`;
        const CONTACT_INFO_PATH = `contact_info`;

        window.PROJECT_COLLECTION_PATH = PROJECT_COLLECTION_PATH;
        window.INQUIRY_COLLECTION_PATH = INQUIRY_COLLECTION_PATH;
        window.CONTACT_INFO_PATH = CONTACT_INFO_PATH;
        
        let db, auth;
        let projectsRef;
        let isAuthReady = false;

        // Global deÄŸiÅŸkenler
        window.projects = window.projects || []; 
        window.inquiries = window.inquiries || [];
        window.contactInfo = window.contactInfo || {};
        window.aboutUs = window.aboutUs || { title: '', content: '' }; // âœ¨ YENÄ°: HakkÄ±mÄ±zda
        window.isAdminLoggedIn = window.isAdminLoggedIn || false; 
        // Base64 ve URL gÃ¶rsellerini modal aÃ§Ä±kken tutmak iÃ§in tek bir array
        window.currentProjectImages = []; 

        window.initFirebase = async () => {
    if (firebaseConfig.projectId === PLACEHOLDER_PROJECT_ID) {
         window.showMessage("ğŸ”´ FIREBASE YAPILANDIRMA HATASI: LÃ¼tfen index.html dosyasÄ±ndaki ayarlarÄ± doldurun.", 'bg-red-600', 8000);
         console.error("Firebase Config HatasÄ±: Proje ID yer tutucu olarak kaldÄ±. VeritabanÄ± iÅŸlemleri devre dÄ±ÅŸÄ±.");
         return; 
    }

    try {
        const app = initializeApp(firebaseConfig);
        db = getFirestore(app);
        auth = getAuth(app);
        window.auth = auth; // âœ… BURAYI EKLEYÄ°N - Global window nesnesine ata
        window.db = db; // Ä°steÄŸe baÄŸlÄ±: db'yi de ekleyebilirsiniz
        
        projectsRef = collection(db, PROJECT_COLLECTION_PATH);

        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                if (initialAuthToken) {
                    try {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } catch (error) {
                        console.error("Custom token ile giriÅŸ baÅŸarÄ±sÄ±z, anonim olarak devam ediliyor:", error);
                        await signInAnonymously(auth);
                    }
                } else {
                    await signInAnonymously(auth);
                }
            }
            isAuthReady = true;
            window.isAuthReady = true; // âœ… Bunu da ekleyin
            console.log("Firebase Auth HazÄ±r. VeritabanÄ± dinleniyor.");
            listenToProjects(); 
            listenToInquiries();
            listenToContactInfo();
            listenToAboutUs(); // âœ¨ YENÄ°
        });

    } catch (error) {
        window.showMessage(`ğŸ”´ Firebase BaÄŸlantÄ± HatasÄ±: ${error.message}`, 'bg-red-600', 8000);
        console.error("Firebase BaÅŸlatma HatasÄ±:", error);
    }
};

        // --- FIRESTORE READ Ä°ÅLEMÄ° (PUBLIC VE ADMIN Ä°Ã‡Ä°N) ---
        function listenToProjects(){
            if (!isAuthReady) return;

            onSnapshot(projectsRef, (snapshot) => {
                const fetchedProjects = [];
                snapshot.forEach(doc => {
                    fetchedProjects.push({ id: doc.id, ...doc.data() });
                });
                
                fetchedProjects.sort((a, b) => (b.year || 0) - (a.year || 0) || a.title.localeCompare(b.title));
                
                window.projects = fetchedProjects;
                window.renderProjects(); // Public Site Render
                if (window.isAdminLoggedIn) {
                    window.renderAdminProjectTable(); // Admin Panel Render
                }
            }, (error) => {
                console.error("Firestore Hata:", error);
                window.showMessage(`Projeler yÃ¼klenirken hata oluÅŸtu: ${error.code}`, 'bg-red-600');
            });
        }
        // index.html dosyasÄ±nda `listenToProjects()` fonksiyonundan sonra eklenmelidir.

function listenToInquiries(){
    if (!isAuthReady) return;

    const inquiriesRef = collection(db, INQUIRY_COLLECTION_PATH); // INQUIRY_COLLECTION_PATH'i kullanÄ±r

    onSnapshot(inquiriesRef, (snapshot) => {
        const fetchedInquiries = [];
        snapshot.forEach(doc => {
            fetchedInquiries.push({ id: doc.id, ...doc.data() });
        });
        
        // Ä°stekleri en yeniye gÃ¶re (timestamp) sÄ±ralayabilirsiniz
        fetchedInquiries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        
        window.inquiries = fetchedInquiries;
        
        // Sadece admin giriÅŸi yapÄ±lmÄ±ÅŸsa tabloyu render et
        if (window.isAdminLoggedIn) {
            window.renderAdminInquiryTable(); 
        }
    }, (error) => {
        console.error("Teklif Ä°stekleri (Inquiries) Hata:", error);
        window.showMessage(`Teklif istekleri yÃ¼klenirken hata oluÅŸtu: ${error.code}`, 'bg-red-600');
    });
}
        
        function listenToContactInfo() {
    if (!isAuthReady) {
        console.warn("Auth hazÄ±r deÄŸil, iletiÅŸim bilgileri yÃ¼klenemedi. | timestamp:", new Date().toISOString());
        // âœ… EKLE: Auth hazÄ±r olana kadar bekle ve tekrar dene
        setTimeout(() => {
            if (isAuthReady) listenToContactInfo();
        }, 1000);
        return;
    }
    
    const contactRef = doc(db, CONTACT_INFO_PATH, 'main');

    onSnapshot(contactRef, (docSnap) => {
        console.log("Firestore'dan veri alÄ±ndÄ± | exists:", docSnap.exists(), "| raw data:", docSnap.data(), "| timestamp:", new Date().toISOString());
        
        if (docSnap.exists()) {
            const data = docSnap.data();
            window.contactInfo = {
                address: data.address?.stringValue || data.address || "Adres bilgisi eksik",
                phone: data.phone?.stringValue || data.phone || "Telefon bilgisi eksik",
                email: data.email?.stringValue || data.email || "E-posta bilgisi eksik"
            };
            console.log("window.contactInfo gÃ¼ncellendi:", window.contactInfo, "| timestamp:", new Date().toISOString());
            
            // âœ… EKLE: DOM hazÄ±r olana kadar bekle
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    window.renderContactInfo();
                });
            } else {
                window.renderContactInfo();
            }
            
        } else {
            console.warn("Firestore'da contact_info/main belgesi bulunamadÄ±. | timestamp:", new Date().toISOString());
            
            // âœ… EKLE: Default deÄŸerler
            window.contactInfo = {
                address: "Ã–rnek Mah. Elit Cad. No: 42/A Konak, Ä°zmir / TÃ¼rkiye",
                phone: "+90 232 XXX XX XX",
                email: "info@bozkurtinsaat.com.tr"
            };
            
            // âœ… EKLE: Default deÄŸerlerle de render et
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    window.renderContactInfo();
                });
            } else {
                window.renderContactInfo();
            }
        }

        if (window.isAdminLoggedIn) {
            console.log("Admin paneli iÃ§in iletiÅŸim formu dolduruluyor. | timestamp:", new Date().toISOString());
            window.populateContactForm();
        }
    }, (error) => {
        console.error("Contact Info Firestore Hata:", error, "| timestamp:", new Date().toISOString());
        window.showMessage(`Ä°letiÅŸim bilgileri yÃ¼klenirken hata: ${error.message}`, 'bg-red-600');
        
        // âœ… EKLE: Hata durumunda default deÄŸerler
        window.contactInfo = {
            address: "Ã–rnek Mah. Elit Cad. No: 42/A Konak, Ä°zmir / TÃ¼rkiye",
            phone: "+90 232 XXX XX XX",
            email: "info@bozkurtinsaat.com.tr"
        };
        window.renderContactInfo();
    });
}

// âœ¨ YENÄ°: HAKKIMIZDA LÄ°STENER
function listenToAboutUs() {
    if (!isAuthReady) {
        console.warn("Auth hazÄ±r deÄŸil, hakkÄ±mÄ±zda bilgileri yÃ¼klenemedi.");
        setTimeout(() => {
            if (isAuthReady) listenToAboutUs();
        }, 1000);
        return;
    }
    
    const aboutRef = doc(db, 'settings', 'aboutUs');
    
    onSnapshot(aboutRef, (docSnap) => {
        console.log("HakkÄ±mÄ±zda verisi alÄ±ndÄ± | exists:", docSnap.exists());
        
        if (docSnap.exists()) {
            const data = docSnap.data();
            window.aboutUs = {
                title: data.title || 'HakkÄ±mÄ±zda',
                content: data.content || ''
            };
            console.log("HakkÄ±mÄ±zda verisi yÃ¼klendi:", window.aboutUs);
        } else {
            console.log("HakkÄ±mÄ±zda belgesi yok, default deÄŸerler kullanÄ±lÄ±yor.");
            window.aboutUs = {
                title: 'Bozkurt Ä°nÅŸaat HakkÄ±nda',
                content: 'Ä°Ã§erik henÃ¼z eklenmedi.'
            };
        }
        
        // Public sitede gÃ¶ster
        window.renderAboutUs();
        
        // Admin panelinde formu doldur
        if (window.isAdminLoggedIn) {
            window.populateAboutForm();
        }
    }, (error) => {
        console.error("HakkÄ±mÄ±zda Firestore Hata:", error);
        window.showMessage(`HakkÄ±mÄ±zda bilgileri yÃ¼klenirken hata: ${error.message}`, 'bg-red-600');
        
        // Hata durumunda default deÄŸerler
        window.aboutUs = {
            title: 'Bozkurt Ä°nÅŸaat HakkÄ±nda',
            content: 'Ä°Ã§erik henÃ¼z eklenmedi.'
        };
        window.renderAboutUs();
    });
}

// Proje Silme Fonksiyonu
window.deleteProject = async (projectId) => {
    if (!confirm("Bu projeyi kalÄ±cÄ± olarak silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz!")) {
        return;
    }
    
    if (!db || !auth.currentUser) {
        window.showMessage("VeritabanÄ± baÄŸlantÄ±sÄ± yok veya yetkiniz eksik.", 'bg-red-600');
        return;
    }

    try {
        // Firestore'dan belgeyi sil
        await deleteDoc(doc(db, PROJECT_COLLECTION_PATH, projectId));
        
        window.showMessage("Proje baÅŸarÄ±yla silindi!", 'bg-green-600');
        
        // Tablo otomatik gÃ¼ncellenecek (onSnapshot sayesinde)
        // Ama emin olmak iÃ§in manuel de tetikleyebiliriz:
        if (window.isAdminLoggedIn) {
            window.renderAdminProjectTable();
        }
    } catch (error) {
        console.error("Proje silme hatasÄ±:", error);
        window.showMessage(`Silme hatasÄ±: ${error.message}`, 'bg-red-600', 5000);
    }
};

        // --- ADMIN CRUD Ä°ÅLEMLERÄ° ---

        // Proje Ekle/GÃ¼ncelle
        window.saveProject = async (data) => {
            if (!db || !auth.currentUser) {
                window.showMessage("VeritabanÄ± baÄŸlantÄ±sÄ± yok veya yetkiniz eksik.", 'bg-red-600');
                return;
            }
            
            const projectId = data.id;
            delete data.id; 

            try {
                // Ã–zellikler dizisini (features) virgÃ¼lle ayrÄ±lmÄ±ÅŸ string'den array'e Ã§evir
                if (data.featuresString) {
                    data.features = data.featuresString.split(',').map(f => f.trim()).filter(f => f.length > 0);
                } else {
                    data.features = [];
                }
                delete data.featuresString; 
                
                // GÃœNCELLEME: Global Base64/URL dizisini kaydet
                data.images = window.currentProjectImages; 
                
                // Firestore'da 1MB limitini kontrol etmeye yardÄ±mcÄ± olmak iÃ§in bir uyarÄ± ekle
                if (JSON.stringify(data).length > 800000) { 
                    window.showMessage("âš ï¸ Proje boyutu 1MB limitine yaklaÅŸÄ±yor. Daha az gÃ¶rsel veya daha kÄ±sa metin kullanÄ±n.", 'bg-yellow-600', 8000);
                }

                if (projectId) {
                    // UPDATE: Mevcut belgeyi gÃ¼ncelle
                    await setDoc(doc(db, PROJECT_COLLECTION_PATH, projectId), data, { merge: true });
                    window.showMessage("Proje baÅŸarÄ±yla gÃ¼ncellendi!", 'bg-green-600');
                } else {
                    // CREATE: Yeni belge ekle
                    await addDoc(projectsRef, data);
                    window.showMessage("Yeni proje baÅŸarÄ±yla eklendi!", 'bg-green-600');
                }
                window.hideProjectModal();
            } catch (error) {
                console.error("Proje kaydetme hatasÄ±:", error);
                window.showMessage(`Kaydetme hatasÄ±: ${error.message}`, 'bg-red-600');
            }
        };

        // YENI: Teklif Ä°steÄŸi Silme Fonksiyonu
window.deleteInquiry = async (inquiryId) => {
    if (!confirm("Bu teklif isteÄŸini kalÄ±cÄ± olarak silmek istediÄŸinizden emin misiniz?")) return;
    if (!db || !auth.currentUser) {
        window.showMessage("Yetkiniz yok.", 'bg-red-600');
        return;
    }

    try {
        await deleteDoc(doc(db, INQUIRY_COLLECTION_PATH, inquiryId));
        window.showMessage("Teklif isteÄŸi baÅŸarÄ±yla silindi.", 'bg-green-600');
    } catch (error) {
        console.error("Teklif silme hatasÄ±:", error);
        window.showMessage(`Silme hatasÄ±: ${error.message}`, 'bg-red-600');
    }
};

        // âœ… Teklif Durum GÃ¼ncelleme
        window.updateInquiryStatus = async (inquiryId, newStatus) => {
            if (!db || !auth.currentUser) {
                window.showMessage("Yetkiniz yok.", 'bg-red-600');
                return;
            }
            
            try {
                await setDoc(doc(db, INQUIRY_COLLECTION_PATH, inquiryId), {
                    status: newStatus
                }, { merge: true });
                
                window.showMessage(`Durum gÃ¼ncellendi: ${newStatus}`, 'bg-green-600');
            } catch (error) {
                console.error("Durum gÃ¼ncelleme hatasÄ±:", error);
                window.showMessage(`GÃ¼ncelleme hatasÄ±: ${error.message}`, 'bg-red-600');
            }
        };

        
        // YENÄ°: Public iletiÅŸim formundan gelen veriyi kaydetme
        window.submitInquiry = async function(form) {
            const name = form.querySelector('#contact-name').value.trim();
            const email = form.querySelector('#contact-email').value.trim();
            const message = form.querySelector('#contact-message').value.trim();

            if (!name || !email || !message) {
                window.showMessage("LÃ¼tfen tÃ¼m alanlarÄ± doldurun.", 'bg-red-600');
                return;
            }
            
            if (!db) {
                window.showMessage("VeritabanÄ± baÄŸlantÄ±sÄ± henÃ¼z hazÄ±r deÄŸil. LÃ¼tfen bekleyin.", 'bg-red-600');
                return;
            }

            try {
                await addDoc(collection(db, INQUIRY_COLLECTION_PATH), {
                    name: name,
                    email: email,
                    message: message,
                    timestamp: new Date().toISOString(),
                    status: 'Yeni'
                });
                
                window.showMessage("Teklif isteÄŸiniz baÅŸarÄ±yla alÄ±ndÄ±! En kÄ±sa sÃ¼rede size dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.", 'bg-green-600');
                form.reset();
            } catch (error) {
                console.error("Teklif gÃ¶nderme hatasÄ±:", error);
                window.showMessage(`Hata: Ä°steÄŸiniz gÃ¶nderilemedi. ${error.message}`, 'bg-red-600', 8000);
            }
        }
        // Ä°letiÅŸim Bilgilerini Kaydetme (ADMIN)
        window.saveContactInfo = async function() {
    const address = document.getElementById('admin-contact-address').value.trim();
    const phone = document.getElementById('admin-contact-phone').value.trim();
    const email = document.getElementById('admin-contact-email').value.trim();

    if (!address || !phone || !email) {
        window.showMessage("TÃ¼m alanlar doldurulmalÄ±dÄ±r.", 'bg-red-600');
        return;
    }

    if (!db || !auth.currentUser) {
        window.showMessage("Yetkiniz yok.", 'bg-red-600');
        return;
    }

    try {
        await setDoc(doc(db, CONTACT_INFO_PATH, 'main'), {
            address: address,
            phone: phone,
            email: email
        });
        
        // âœ… EKLE: Global deÄŸiÅŸkeni hemen gÃ¼ncelle
        window.contactInfo = { address, phone, email };
        
        // âœ… EKLE: Ana sayfadaki UI'yi gÃ¼ncelle
        window.renderContactInfo();
        
        window.showMessage("Ä°letiÅŸim bilgileri gÃ¼ncellendi!", 'bg-green-600');
    } catch (error) {
        console.error("Ä°letiÅŸim kaydetme hatasÄ±:", error);
        window.showMessage(`Hata: ${error.message}`, 'bg-red-600');
    }
};

        // âœ¨ YENÄ°: HAKKIMIZDA KAYDETME (Firestore)
        window.saveAboutUs = async function() {
            const title = document.getElementById('about-title').value.trim();
            const content = document.getElementById('about-content').value.trim();
            
            if (!title || !content) {
                window.showMessage('BaÅŸlÄ±k ve iÃ§erik alanlarÄ± zorunludur!', 'bg-red-600');
                return;
            }
            
            if (!db || !auth.currentUser) {
                window.showMessage('VeritabanÄ± baÄŸlantÄ±sÄ± yok veya yetkiniz eksik.', 'bg-red-600');
                return;
            }
            
            try {
                const aboutRef = doc(db, 'settings', 'aboutUs');
                await setDoc(aboutRef, {
                    title: title,
                    content: content,
                    updatedAt: new Date().toISOString(),
                    updatedBy: auth.currentUser.email
                });
                
                window.aboutUs = { title, content };
                window.renderAboutUs();
                
                window.showMessage('âœ… HakkÄ±mÄ±zda bilgileri gÃ¼ncellendi!', 'bg-green-600');
            } catch (error) {
                console.error('HakkÄ±mÄ±zda kaydetme hatasÄ±:', error);
                window.showMessage(`âŒ Hata: ${error.message}`, 'bg-red-600');
            }
        };
        
        // âœ¨ YENÄ°: HAKKIMIZDA RENDER (Public Site)
        window.renderAboutUs = function() {
            const titleEl = document.getElementById('about-title-display');
            const contentEl = document.getElementById('about-content-display');
            
            if (titleEl) titleEl.textContent = window.aboutUs.title || 'HakkÄ±mÄ±zda';
            if (contentEl) contentEl.textContent = window.aboutUs.content || 'Ä°Ã§erik bekleniyor...';
        };
        
        // âœ¨ YENÄ°: HAKKIMIZDA FORM DOLDUR (Admin Panel)
        window.populateAboutForm = function() {
            const titleInput = document.getElementById('about-title');
            const contentInput = document.getElementById('about-content');
            
            if (titleInput) titleInput.value = window.aboutUs.title || '';
            if (contentInput) contentInput.value = window.aboutUs.content || '';
        };
        
        // setupDragScroll fonksiyonu kaldÄ±rÄ±ldÄ± - mobilde dikey grid kullanÄ±lÄ±yor
        
        // BaÅŸlat
        window.addEventListener('load', window.initFirebase);

        // Public signOut fonksiyonu
        window.adminLogout = async () => {
            window.isAdminLoggedIn = false;
            window.showView('main');
            window.showMessage("YÃ¶netici oturumu kapatÄ±ldÄ±.", 'bg-yellow-600');
        };

    </script>
</head>
<body class="elite-bg text-gray-100">
    
    <!-- âœ¨ MODERN LOADING SCREEN -->
    <!-- âœ… Loading screen kaldÄ±rÄ±ldÄ± - Projeler bÃ¶lÃ¼mÃ¼nde gÃ¶sterilecek -->
    
    <!-- 1. ANA SÄ°TE GÃ–RÃœNÃœMÃœ -->
    <div id="main-view" class="visible-view">
        <!-- Hero ArkaplanÄ± (SabitlenmiÅŸ - Pinning Effect) -->
        <div class="hero-pin-bg">
            <div class="hero-vignette"></div>
        </div>
    
        <!-- Navigasyon Ã‡ubuÄŸu (Sabit ve Responsive) -->
        <header class="sticky top-0 z-50 bg-slate-900 bg-opacity-95 shadow-xl">
            <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                <a href="#" class="text-2xl font-extrabold elite-text tracking-widest transition duration-300 hover:text-yellow-400">BOZKURT Ä°NÅAAT</a>
                <div class="hidden md:flex space-x-8">
                    <a href="#projelerimiz" class="text-gray-300 hover:elite-text transition duration-300">Projelerimiz</a>
                    <a href="#hakkimizda" class="text-gray-300 hover:elite-text transition duration-300">HakkÄ±mÄ±zda</a>
                    <a href="#iletisim" class="text-gray-300 hover:elite-text transition duration-300">Ä°letiÅŸim</a>
                </div>
                <!-- Mobil Navigasyon Butonu (Hamburger) -->
                <button id="menu-button" class="md:hidden text-gray-300 hover:elite-text focus:outline-none" aria-expanded="false" aria-controls="mobile-menu" aria-label="MenÃ¼yÃ¼ AÃ§/Kapat">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </nav>
            <!-- Mobil MenÃ¼ Ä°Ã§eriÄŸi -->
            <div id="mobile-menu" class="hidden md:hidden bg-slate-900 bg-opacity-90">
                <a href="#projelerimiz" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text border-b border-gray-800 transition duration-300 menu-item-link">Projelerimiz</a>
                 <a href="#hakkimizda" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text border-b border-gray-800 transition duration-300 menu-item-link">HakkÄ±mÄ±zda</a>
                <a href="#iletisim" class="block px-4 py-3 text-sm text-gray-300 hover:elite-text transition duration-300 menu-item-link">Ä°letiÅŸim</a>
            </div>
        </header>
        <!-- Hero Section -->
    <section class="min-h-[calc(100vh-3rem)] md:min-h-screen flex flex-col justify-center items-center p-4 content-overlay">
    <div class="container mx-auto max-w-7xl flex items-center justify-start">
        <div class="max-w-xl md:max-w-3xl p-6 md:p-10 rounded-xl shadow-2xl" data-scroll-animate>
            <div class="section-separator mb-4"></div>
            <p class="text-xl font-semibold text-white mb-3 tracking-widest uppercase">BOZKURT Ä°NÅAAT - Elit YaÅŸam</p>
            <h1 class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-extrabold text-white mb-6 leading-tight animate-fade-in-up">
                LÃ¼ksÃ¼n ve Kalitenin <span class="elite-text">YÃ¼ksek Mimarisi</span>
            </h1>
            <p class="text-lg sm:text-xl text-gray-300 mb-8 max-w-lg leading-relaxed">
                Ä°zmir'in en prestijli konut ve ticari projelerini, yenilikÃ§i tasarÄ±m ve sarsÄ±lmaz kalite garantisiyle hayata geÃ§iriyoruz.
            </p>
            <a href="#projelerimiz" class="inline-block px-8 sm:px-12 py-3 sm:py-4 bg-yellow-400 text-slate-900 font-extrabold text-base sm:text-lg rounded-full shadow-2xl transition duration-300 transform hover:scale-105 tracking-wide">
                Projelerimizi KeÅŸfet &rarr;
            </a>
        </div>
    </div>
    
    <!-- KaydÄ±rma Ä°ndikatÃ¶rÃ¼ -->
    <div class="absolute bottom-10 left-0 right-0 flex justify-center">
        <a href="#projelerimiz" aria-label="AÅŸaÄŸÄ± kaydÄ±r" class="text-white hover:elite-text transition duration-300">
            <svg class="w-8 h-8 md:w-10 md:h-10 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7m7-6v14"></path></svg>
        </a>
    </div>
</section>
    
        <!-- Ana Ä°Ã§erik ve Projeler -->
        <main class="content-overlay elite-bg shadow-2xl">
    
            <!-- Projelerimiz (Our Projects) Section -->
            <section id="projelerimiz" class="py-16 md:py-24 container mx-auto lg:px-8">
                <div class="text-center mb-12 px-4 sm:px-6">
                    <div data-scroll-animate>
                        <h3 class="text-4xl font-extrabold mb-4 text-white">Ã–ne Ã‡Ä±kan Projelerimiz</h3>
                        <div class="section-separator mx-auto"></div>
                        <p class="text-lg text-gray-300 mt-6">Ä°zmir'in geleceÄŸine deÄŸer katan, modern ve elit yaÅŸam alanlarÄ±mÄ±z.</p>
                    </div>
                </div>
    
                <!-- Tamamlanan Projeler Listesi -->
<div class="px-2 sm:px-6 lg:px-8">
    <div class="text-center mb-8 mt-12">
        <h4 data-scroll-animate data-scroll-delay="100" class="text-3xl font-extrabold text-white mb-2 elite-text">Tamamlanan Projeler</h4>
        <div data-scroll-animate data-scroll-delay="200" class="section-separator mx-auto w-16"></div>
    </div>
    
<div id="completed-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
    <div class="col-span-full flex flex-col items-center justify-center py-12">
        <div class="relative w-16 h-16 mb-4">
            <div class="absolute inset-0 border-4 border-slate-700 rounded-full"></div>
            <div class="absolute inset-0 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"></div>
        </div>
        <p class="text-gray-400 text-lg animate-pulse">Projeler yÃ¼kleniyor...</p>
    </div>
</div>
<!-- HORIZONTAL SCROLL CONTAINER END -->
</div>

<div id="no-completed-projects" class="text-center text-gray-500 mt-8 hidden p-4 bg-slate-800 rounded-lg max-w-md mx-auto">
    HenÃ¼z tamamlanmÄ±ÅŸ projemiz bulunmamaktadÄ±r.
</div>  

                <!-- Devam Eden Projeler Listesi -->
                <div class="px-2 sm:px-6 lg:px-8">
                    <div class="text-center mt-16 mb-8">
                        <h4 data-scroll-animate data-scroll-delay="100" class="text-3xl font-extrabold text-white mb-2 elite-text">Devam Eden Projeler</h4>
                        <div data-scroll-animate data-scroll-delay="200" class="section-separator mx-auto w-16"></div>
                    </div>
                    <div id="ongoing-projects-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
                        <div class="col-span-full flex flex-col items-center justify-center py-12">
                            <div class="relative w-16 h-16 mb-4">
                                <div class="absolute inset-0 border-4 border-slate-700 rounded-full"></div>
                                <div class="absolute inset-0 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"></div>
                            </div>
                            <p class="text-gray-400 text-lg animate-pulse">Projeler yÃ¼kleniyor...</p>
                        </div>
                    </div>
                    <div id="no-ongoing-projects" class="text-center text-gray-500 mt-8 hidden p-4 bg-slate-800 rounded-lg max-w-md mx-auto">
                        Åu anda devam eden bir projemiz bulunmamaktadÄ±r.
                    </div>
                </div>
            </section>
    
            <!-- HakkÄ±mÄ±zda (About Us) Section - âœ¨ DÄ°NAMÄ°K -->
            <section id="hakkimizda" class="py-16 md:py-24 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-6xl mx-auto">
                    <div data-scroll-animate class="text-center mb-12">
                        <h3 id="about-title-display" class="text-4xl md:text-5xl font-extrabold mb-4 text-white elite-text">
                            Neden Bozkurt Ä°nÅŸaat?
                        </h3>
                        <div class="section-separator mx-auto"></div>
                    </div>
                    
                    <!-- Dinamik Ä°Ã§erik -->
                    <div class="bg-slate-800/50 p-8 md:p-12 rounded-2xl border border-slate-700 shadow-2xl">
                        <p id="about-content-display" class="text-lg md:text-xl text-gray-300 leading-relaxed whitespace-pre-wrap">
                            20 yÄ±lÄ± aÅŸkÄ±n tecrÃ¼beyle, sadece binalar deÄŸil, gelecek nesillere miras kalacak gÃ¼venli ve estetik yaÅŸam merkezleri inÅŸa ediyoruz.
                        </p>
                    </div>
                    
                    <!-- Ã–zellik KartlarÄ± -->
                    <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-10 text-center">
                        <div data-scroll-animate data-scroll-delay="0" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">ğŸ“</span>
                            <p class="font-bold text-2xl text-white mb-2">Modern TasarÄ±m</p>
                            <p class="text-sm text-gray-400 mt-2">Ä°zmir'in ruhuna uygun, Ã§aÄŸdaÅŸ ve fonksiyonel mimari Ã§Ã¶zÃ¼mler.</p>
                        </div>
                        <div data-scroll-animate data-scroll-delay="200" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">âœ…</span>
                            <p class="font-bold text-2xl text-white mb-2">Maksimum GÃ¼ven</p>
                            <p class="text-sm text-gray-400 mt-2">Deprem yÃ¶netmeliklerine tam uyum ve birinci sÄ±nÄ±f yapÄ± malzemeleri.</p>
                        </div>
                        <div data-scroll-animate data-scroll-delay="400" class="p-8 rounded-xl bg-slate-800 hover:bg-slate-700 transition duration-300 transform hover:translate-y-[-5px] shadow-xl">
                            <span class="elite-text text-4xl mb-4 block">ğŸ¤</span>
                            <p class="font-bold text-2xl text-white mb-2">Åeffaf SÃ¼reÃ§</p>
                            <p class="text-sm text-gray-400 mt-2">SÃ¶z verdiÄŸimiz zamanda ve kalitede teslimat garantisi.</p>
                        </div>
                    </div>
                </div>
            </section>
    
            <!-- Ä°letiÅŸim (Contact) Section -->
            <section id="iletisim" class="py-16 md:py-24 elite-bg container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="max-w-4xl mx-auto">
                    <div data-scroll-animate class="text-center mb-12">
                        <h3 class="text-4xl font-extrabold mb-4 text-white">Bize UlaÅŸÄ±n</h3>
                        <div class="section-separator mx-auto"></div>
                        <p class="text-lg text-gray-300 mt-6">Hayalinizdeki projeyi konuÅŸmak iÃ§in her zaman hazÄ±rÄ±z.</p>
                    </div>
    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- Ä°letiÅŸim Bilgileri (Animasyonlu) -->
                        <div data-scroll-animate class="space-y-8 p-6 bg-slate-900 rounded-xl shadow-2xl">
    <div class="flex items-start">
        <span class="elite-text text-2xl mr-4 mt-0.5">ğŸ“</span>
        <div>
            <p class="font-bold text-lg text-white">Merkez Adresimiz</p>
            <p id="contact-address-display" class="text-gray-400"></p>
        </div>
    </div>
    <div class="flex items-start">
        <span class="elite-text text-2xl mr-4 mt-0.5">ğŸ“</span>
        <div>
            <p class="font-bold text-lg text-white">Telefon ve E-posta</p>
            <p class="text-gray-400">
                <a id="contact-phone-link" href="tel:" class="hover:underline hover:text-yellow-400 transition">
                    <span id="contact-phone-display"></span>
                </a>
            </p>
            <p class="text-gray-400">
                <a id="contact-email-link" href="mailto:" class="hover:underline hover:text-yellow-400 transition">
                    <span id="contact-email-display"></span>
                </a>
            </p>
        </div>
    </div>
</div>
    
                        <!-- Ä°letiÅŸim Formu (GÃœNCELLENDÄ°) -->
                        <div data-scroll-animate data-scroll-delay="200" class="p-8 bg-slate-800 rounded-xl shadow-2xl">
                            <h4 class="text-2xl font-bold text-white elite-text">Proje Teklifi AlÄ±n</h4>
                            <!-- onsubmit fonksiyonu deÄŸiÅŸtirildi ve ID'ler eklendi -->
                            <form onsubmit="event.preventDefault(); window.submitInquiry(this)"> 
                                <div class="mb-4">
                                    <input type="text" id="contact-name" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200">
                                </div>
                                <div class="mb-4">
                                    <input type="email" id="contact-email" placeholder="E-posta Adresiniz" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200">
                                </div>
                                <div class="mb-6">
                                    <textarea id="contact-message" placeholder="MesajÄ±nÄ±z" rows="4" required class="w-full p-3 rounded-lg bg-slate-700 text-white border border-slate-600 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200"></textarea>
                                </div>
                                <button type="submit" class="w-full px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.05]">
                                    Teklif Ä°steÄŸi GÃ¶nder
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    
        <!-- Footer -->
        <footer class="elite-bg py-8 border-t border-slate-700 content-overlay">
            <div class="container mx-auto px-4 text-center">
                <p class="text-sm text-gray-500 mb-2">
                    &copy; 2024 Bozkurt Ä°nÅŸaat. TÃ¼m HaklarÄ± SaklÄ±dÄ±r.
                </p>
                <!-- DEBUG/FALLBACK ADMIN BUTONU -->
                <button id="debug-admin-btn" onclick="window.showLoginModal()" class="hidden px-4 py-1 text-xs bg-red-800 text-white rounded hover:bg-red-700 transition">
                    Admin GiriÅŸ (Yedek)
                </button>
            </div>
        </footer>
    </div>
    
    <!-- 2. ADMIN PANELÄ° GÃ–RÃœNÃœMÃœ (GÃœNCELLENDÄ°) -->
    <div id="admin-view" class="admin-view hidden-view">
        <header class="bg-slate-900 shadow-lg py-4 px-6 flex justify-between items-center sticky top-0 z-10">
            <h1 class="text-3xl font-extrabold elite-text">YÃ¶netici Paneli</h1>
            <button onclick="window.adminLogout()" class="px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition duration-200 flex items-center">
                <i data-lucide="log-out" class="w-5 h-5 mr-2"></i> Ã‡Ä±kÄ±ÅŸ Yap
            </button>
        </header>

        <main class="p-4 md:p-8 max-w-7xl mx-auto">
            <!-- Proje YÃ¶netimi -->
            <h2 class="text-2xl font-bold text-white mb-6">Proje YÃ¶netimi</h2>
            <div class="flex justify-end mb-6">
                <button onclick="window.openProjectModal()" class="px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-lg shadow-lg transition duration-300 flex items-center">
                    <i data-lucide="plus" class="w-5 h-5 mr-2"></i> Yeni Proje Ekle
                </button>
            </div>

            <!-- Projeler Tablosu -->
            <div class="bg-slate-900 rounded-xl shadow-2xl overflow-x-auto">
                    <table class="min-w-full divide-y-2 divide-slate-700">
    <thead class="bg-slate-800">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">BaÅŸlÄ±k</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Durum</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">YÄ±l</th>
            <th class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider">SÄ±ra</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider">Eylemler</th>
        </tr>
    </thead>
                    <tbody id="admin-project-table-body" class="divide-y divide-slate-800">
                        <tr><td colspan="5" class="text-center py-4 text-gray-500">Projeler yÃ¼kleniyor...</td></tr>
                    </tbody>
                </table>
            </div>
            <p id="admin-no-projects-message" class="text-center text-gray-500 mt-8 hidden">HenÃ¼z bir proje eklenmemiÅŸ.</p>
            
            <!-- YENÄ°: Gelen Teklif Ä°stekleri BÃ¶lÃ¼mÃ¼ -->
            <h2 class="text-2xl font-bold text-white mb-6 mt-12 border-t pt-6 border-slate-700">Gelen Teklif Ä°stekleri</h2>
            <div class="bg-slate-900 rounded-xl shadow-2xl overflow-x-auto">
                <!-- Gelen Teklif Ä°stekleri Tablosu -->
<table class="min-w-full divide-y-2 divide-slate-700">
    <thead class="bg-slate-800">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[15%]">Ad Soyad</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[20%]">E-posta</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[30%]">Mesaj Ã–zeti</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider w-[15%]">Tarih</th>
            <th class="px-6 py-3 text-center text-xs font-medium text-gray-400 uppercase tracking-wider w-[10%]">Durum</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider w-[10%]">Eylemler</th>
        </tr>
    </thead>
    <tbody id="admin-inquiry-table-body" class="divide-y divide-slate-800">
        <tr><td colspan="6" class="text-center py-4 text-gray-500">Ä°stekler yÃ¼kleniyor...</td></tr>
    </tbody>
</table>
            </div>
            <p id="admin-no-inquiries-message" class="text-center text-gray-500 mt-8 hidden">HenÃ¼z bir teklif isteÄŸi gelmemiÅŸtir.</p>
            <!-- Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° YÃ–NETÄ°MÄ° -->
<h2 class="text-2xl font-bold text-white mb-6 mt-12 border-t pt-6 border-slate-700">Ä°ÅŸletme Ä°letiÅŸim Bilgileri</h2>
<div class="bg-slate-900 rounded-xl shadow-2xl p-8 max-w-3xl">
    <form onsubmit="event.preventDefault(); window.saveContactInfo()">
        <div class="mb-4">
            <label for="admin-contact-address" class="block text-sm font-medium text-gray-400 mb-2">Adres</label>
            <input type="text" id="admin-contact-address" required 
                   class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                   placeholder="Ã–rnek Mah. Elit Cad. No: 42/A Konak, Ä°zmir / TÃ¼rkiye">
        </div>
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div>
                <label for="admin-contact-phone" class="block text-sm font-medium text-gray-400 mb-2">Telefon</label>
                <input type="tel" id="admin-contact-phone" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                       placeholder="+90 232 XXX XX XX">
            </div>
            <div>
                <label for="admin-contact-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                <input type="email" id="admin-contact-email" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700"
                       placeholder="info@bozkurtinsaat.com.tr">
            </div>
        </div>
        <button type="submit" class="w-full px-6 py-3 bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01]">
            Ä°letiÅŸim Bilgilerini Kaydet
        </button>
    </form>
</div>

<!-- âœ¨ YENÄ°: HAKKIMIZDA YÃ–NETÄ°MÄ° -->
<h2 class="text-2xl font-bold text-white mb-6 mt-12 border-t pt-6 border-slate-700 flex items-center gap-2">
    <i data-lucide="info" class="w-7 h-7 elite-text"></i>
    HakkÄ±mÄ±zda Ä°Ã§erik YÃ¶netimi
</h2>
<div class="bg-slate-900 rounded-xl shadow-2xl p-8">
    <form id="about-form" onsubmit="event.preventDefault(); window.saveAboutUs()">
        <div class="mb-6">
            <label for="about-title" class="block text-sm font-medium text-gray-400 mb-2">BaÅŸlÄ±k</label>
            <input type="text" id="about-title" required
                   class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/20 transition-all"
                   placeholder="Ã–rn: Bozkurt Ä°nÅŸaat HakkÄ±nda">
        </div>
        
        <div class="mb-6">
            <label for="about-content" class="block text-sm font-medium text-gray-400 mb-2">Ä°Ã§erik</label>
            <textarea id="about-content" rows="10" required
                      class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/20 transition-all resize-none"
                      placeholder="HakkÄ±mÄ±zda iÃ§eriÄŸini buraya yazÄ±n... (Firma tanÄ±tÄ±mÄ±, misyon, vizyon, deÄŸerler vb.)"></textarea>
        </div>
        
        <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-400 hover:to-amber-500 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01] flex items-center justify-center gap-2">
            <i data-lucide="save" class="w-5 h-5"></i>
            HakkÄ±mÄ±zda Bilgilerini Kaydet
        </button>
    </form>
</div>
        </main>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[400] hidden justify-center items-center p-4 transition duration-300 opacity-0" aria-modal="true" role="dialog">
    <div class="bg-slate-900 w-full max-w-md p-8 rounded-xl shadow-3xl transform scale-95 transition duration-300">
        <h2 class="text-3xl font-bold elite-text mb-6 text-center">YÃ¶netici GiriÅŸi</h2>
        <form id="admin-login-form" onsubmit="event.preventDefault(); window.adminLogin()">
            
            <div class="mb-4">
                <label for="admin-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                <input type="email" id="admin-email" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200" 
                       placeholder="E-postanÄ±zÄ± Girin">
            </div>
            
            <div class="mb-4">
                <label for="admin-password" class="block text-sm font-medium text-gray-400 mb-2">Åifre</label>
                <input type="password" id="admin-password" required 
                       class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700 focus:elite-border focus:ring focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200" 
                       placeholder="Åifrenizi Girin">
            </div>
            
            <p id="auth-status" class="mt-2 text-center text-sm text-red-400"></p>
            
            <button type="submit" 
                    class="w-full px-6 py-3 bg-yellow-400 bg-elite-text text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01] mb-3">
                GiriÅŸ Yap
            </button>
            
        </form>
        
        <!-- âœ… Ä°ptal butonu FORM'UN DIÅINDA -->
        <button type="button" 
                onclick="window.hideLoginModal()" 
                class="w-full px-6 py-3 bg-slate-800 text-gray-300 font-semibold rounded-full border border-slate-700 hover:bg-slate-700 hover:text-white transition duration-300 transform hover:scale-[1.01]">
            Ä°ptal
        </button>
        
    </div>
</div>

    <!-- 4. PROJE EKLE/DÃœZENLE MODAL (GÃœNCELLENDÄ°) -->
    <div id="project-crud-modal" class="fixed inset-0 bg-black bg-opacity-80 z-[500] hidden justify-center items-center p-4 transition duration-300 opacity-0" aria-modal="true" role="dialog" onclick="if (event.target.id === 'project-crud-modal') ">
        <div class="bg-slate-900 w-full max-w-2xl max-h-[95vh] p-8 rounded-xl shadow-3xl overflow-y-auto transform scale-95 transition duration-300">
            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-3">
                <h2 id="crud-modal-title" class="text-2xl font-bold text-white elite-text">Yeni Proje Ekle</h2>
                <button onclick="window.hideProjectModal()" class="text-gray-400 hover:text-elite-text text-3xl">&times;</button>
            </div>
            
            <form id="project-crud-form" onsubmit="event.preventDefault(); window.handleProjectSubmit(this)">
                <input type="hidden" id="project-id" name="id">

                <!-- Proje BaÅŸlÄ±ÄŸÄ± -->
                <div class="mb-4">
                    <label for="project-title" class="block text-sm font-medium text-gray-400 mb-2">BaÅŸlÄ±k *</label>
                    <input type="text" id="project-title" name="title" required class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: Elite KonutlarÄ±, Urla">
                </div>

                <!-- Durum ve YÄ±l -->
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="project-status" class="block text-sm font-medium text-gray-400 mb-2">Durum *</label>
                        <select id="project-status" name="status" required class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700">
                            <option value="ongoing">Devam Ediyor</option>
                            <option value="completed">TamamlandÄ±</option>
                        </select>
                    </div>
                    <div>
                        <label for="project-year" class="block text-sm font-medium text-gray-400 mb-2">Teslim YÄ±lÄ±</label>
                        <input type="number" id="project-year" name="year" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: 2024">
                    </div>
                </div>

                <!-- Konum -->
                <div class="mb-4">
                    <label for="project-location" class="block text-sm font-medium text-gray-400 mb-2">Konum (Ä°l ve Ä°lÃ§e)</label>
                    <input type="text" id="project-location" name="location" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ä°l ve ilÃ§e giriniz (Ã–rn: Konak, Ä°zmir)">
                </div>
                
                <!-- âœ¨ YENÄ°: DetaylÄ± Adres AlanÄ± -->
                <div class="mb-4">
                    <label for="project-address" class="block text-sm font-medium text-gray-400 mb-2">DetaylÄ± Adres (Opsiyonel)</label>
                    <textarea id="project-address" name="address" rows="3" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Mahalle, Cadde, Sokak, No, Ä°lÃ§e, Ä°l (Ã–rn: AtatÃ¼rk Mahallesi, Cumhuriyet Caddesi, No: 123, Konak, Ä°zmir)"></textarea>
                </div>
                
                <!-- YENÄ°: Proje Ä°letiÅŸim Bilgileri -->
                <div class="mb-4 pt-4 border-t border-slate-700">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text">Proje Ä°letiÅŸim Bilgileri (Opsiyonel)</h3>
                    <div class="mb-4">
                        <label for="project-contact-person" class="block text-sm font-medium text-gray-400 mb-2">Ä°letiÅŸim Kurulacak KiÅŸi</label>
                        <input type="text" id="project-contact-person" name="contact_person" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: AyÅŸe YÄ±lmaz">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="project-contact-phone" class="block text-sm font-medium text-gray-400 mb-2">Telefon</label>
                            <input type="tel" id="project-contact-phone" name="contact_phone" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: +90 532 ...">
                        </div>
                        <div>
                            <label for="project-contact-email" class="block text-sm font-medium text-gray-400 mb-2">E-posta</label>
                            <input type="email" id="project-contact-email" name="contact_email" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: ayse.y@bozkurt.com">
                        </div>
                    </div>
                </div>
                <!-- BÄ°TTÄ°: Proje Ä°letiÅŸim Bilgileri -->

                <!-- GÃ¶rsel YÃ¼kleme AlanÄ± (Drag & Drop + URL) -->
                <div class="mb-6 border border-slate-700 rounded-xl p-4 bg-slate-800">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text">GÃ¶rsel YÃ¼kle / Ekle</h3>

                    <!-- A. SÃ¼rÃ¼kle-BÄ±rak AlanÄ± -->
                    <label class="block text-sm font-medium text-gray-400 mb-2">1. Yerel GÃ¶rsel YÃ¼kleme (SÃ¼rÃ¼kle & BÄ±rak veya TÄ±kla)</label>
                    <div id="image-drop-zone" class="p-6 text-center rounded-lg cursor-pointer hover:bg-slate-700 transition duration-200" onclick="document.getElementById('file-input').click()">
                        <i data-lucide="upload" class="w-8 h-8 mx-auto text-gray-500 mb-2"></i>
                        <p class="text-gray-400 text-sm">GÃ¶rselleri buraya sÃ¼rÃ¼kleyin veya tÄ±klayarak seÃ§in.</p>
                        <input type="file" id="file-input" multiple accept="image/*" class="hidden">
                    </div>

                    <!-- B. URL Ekleme AlanÄ± -->
                    <div class="mt-4 pt-4 border-t border-slate-700">
                        <label class="block text-sm font-medium text-gray-400 mb-2">2. Veya Harici URL YapÄ±ÅŸtÄ±rarak Ekle</label>
                        <div class="flex gap-2">
                             <input type="url" id="url-input" class="flex-grow p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm" placeholder="https://example.com/proje-fotografi.jpg">
                             <button type="button" id="add-url-btn" onclick="window.addUrlImage()" class="px-4 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition duration-200">Ekle</button>
                        </div>
                    </div>

                    <p class="text-xs text-red-400 mt-4 p-1 bg-slate-900 rounded-lg">
                        âš ï¸ **Ã–NEMLÄ°:** SÃ¼rÃ¼kle-bÄ±rak ile yÃ¼klenenler (Base64) 1MB belge limitine tabidir. LÃ¼tfen kÃ¼Ã§Ã¼k dosyalar kullanÄ±n. Harici URL'ler bu limite takÄ±lmaz.
                    </p>
                    
                    <!-- YÃ¼klenen GÃ¶rsel Ã–nizlemeleri -->
                    <div class="mt-4 pt-4 border-t border-slate-700">
                        <label class="block text-sm font-medium text-gray-400 mb-2">TÃ¼m GÃ¶rsel Ã–nizlemeleri</label>
                        <div id="image-previews" class="flex flex-wrap gap-4 p-2 bg-slate-700 rounded-lg min-h-[50px]">
                            <p class="text-gray-500 text-sm italic p-2">YÃ¼klenen gÃ¶rseller burada gÃ¶rÃ¼necek.</p>
                        </div>
                    </div>
                </div>
                <!-- BÄ°TTÄ°: GÃ¶rsel YÃ¼kleme AlanÄ± -->

                <!-- KÄ±sa AÃ§Ä±klama -->
                <div class="mb-4">
                    <label for="project-description" class="block text-sm font-medium text-gray-400 mb-2">KÄ±sa AÃ§Ä±klama *</label>
                    <textarea type="text" id="project-description" name="description" required rows="3" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ana sayfada gÃ¶rÃ¼necek kÄ±sa tanÄ±tÄ±m metni."></textarea>
                </div>

                <!-- DetaylÄ± AÃ§Ä±klama (LLM Entegre) -->
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <label for="project-detailed-description" class="block text-sm font-medium text-gray-400">DetaylÄ± AÃ§Ä±klama</label>
                        <button type="button" onclick="window.generateDetailedDescription()" class="flex items-center text-xs font-semibold px-3 py-1 bg-yellow-600 rounded-full hover:bg-yellow-500 transition duration-200 text-slate-900">
                            <i data-lucide="sparkles" class="w-4 h-4 mr-1"></i> âœ¨ AÃ§Ä±klama OluÅŸtur
                        </button>
                    </div>
                    <textarea id="project-detailed-description" name="detailedDescription" rows="5" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Proje detay sayfasÄ±nda gÃ¶rÃ¼necek uzun metin."></textarea>
                </div>
                
                <!-- Ä°letiÅŸim Metni OluÅŸturma AlanÄ± (LLM Entegre) -->
                <div class="mb-6 border border-slate-700 rounded-xl p-4 bg-slate-800">
                    <h3 class="text-lg font-bold text-white mb-3 elite-text flex items-center">
                        <i data-lucide="mail" class="w-5 h-5 mr-2"></i> âœ¨ Pazarlama Metni OluÅŸtur
                    </h3>
                    
                    <div class="flex gap-2 mb-3">
                         <select id="communication-type" class="flex-grow p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm">
                             <option value="email">MÃ¼ÅŸteri E-posta TaslaÄŸÄ±</option>
                             <option value="social">Sosyal Medya GÃ¶nderisi (X/Instagram)</option>
                             <option value="brief">YatÄ±rÄ±mcÄ± Brifingi (Ã–zet)</option>
                         </select>
                         <button type="button" onclick="window.generateCommunicationText()" class="px-4 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition duration-200 flex items-center">
                             <i data-lucide="bot" class="w-5 h-5 mr-1"></i> OluÅŸtur
                         </button>
                    </div>
                    
                    <textarea id="communication-output" rows="5" class="w-full p-3 rounded-lg bg-slate-900 text-white border border-slate-700 text-sm" placeholder="OluÅŸturulan pazarlama metni burada gÃ¶rÃ¼necektir."></textarea>
                    
                    <p class="text-xs text-gray-500 mt-2">Bu araÃ§, proje bilgilerini kullanarak hedef kitleye Ã¶zel metinler oluÅŸturur.</p>
                </div>
                <!-- BÄ°TTÄ°: Ä°letiÅŸim Metni OluÅŸturma AlanÄ± -->

                <!-- Ã–zellikler (Features) -->
                <div class="mb-6">
                    <label for="project-features" class="block text-sm font-medium text-gray-400 mb-2">Ã–zellikler (VirgÃ¼lle AyÄ±rÄ±n)</label>
                    <input type="text" id="project-features" name="featuresString" class="w-full p-3 rounded-lg bg-slate-800 text-white border border-slate-700" placeholder="Ã–rn: AkÄ±llÄ± Ev Sistemi, YÃ¼zme Havuzu, KapalÄ± Otopark">
                </div>

                <button type="submit" class="w-full px-6 py-3 bg-elite-text bg-yellow-400 text-slate-900 font-bold rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01]">
                    Kaydet
                </button>
            </form>
        </div>
    </div>


    <!-- 5. Utility Modals -->
    <!-- Mesaj Kutusu (Toast Notification) -->
    <div id="message-box" class="fixed bottom-5 right-5 bg-green-600 text-white p-4 rounded-lg shadow-xl transition-all duration-300 ease-in-out hidden z-[1000]">
        MesajÄ±nÄ±z baÅŸarÄ±yla gÃ¶nderildi! TeÅŸekkÃ¼r ederiz.
    </div>

    <!-- Public Site Detay Modal (Mevcut) -->
    <div id="project-modal" 
         class="fixed inset-0 bg-black bg-opacity-75 z-[200] hidden justify-center items-center p-4 transition duration-300 opacity-0" 
         aria-modal="true" 
         role="dialog" 
         aria-labelledby="modal-title"
         onclick="if (event.target.id === 'project-modal') closeProjectModal()">
        
        <div class="bg-slate-900 w-full max-w-4xl max-h-[90vh] rounded-xl shadow-3xl overflow-y-auto scrollbar-custom transform scale-95 transition duration-300">
            <div class="flex justify-end p-4 sticky top-0 bg-slate-900/95 backdrop-blur-sm z-10 border-b border-slate-800">
                <button onclick="closeProjectModal()" class="text-gray-300 hover:text-elite-text focus:outline-none text-3xl p-1" aria-label="Kapat">
                    &times;
                </button>
            </div>
            <div id="modal-content" class="p-4 sm:p-8 pt-0">
                <!-- Dinamik iÃ§erik buraya yÃ¼klenecek -->
            </div>
        </div>
    </div>

    <!-- JavaScript for Functionality -->
    <script>
        // Lucide ikonlarÄ±nÄ± yÃ¼kle
        lucide.createIcons();

        // --- GEMINI API AYARLARI ---
        const API_KEY = "AIzaSyCX5Vb_CvwTRbVbYqCZqDhnC84C1JlaRxo";
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
        
        // --- API YardÄ±mcÄ± Fonksiyonu (Exponential Backoff ile) ---
        async function fetchWithBackoff(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status !== 429 && response.ok) {
                        return response.json();
                    }
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    
                    const errorJson = await response.json();
                    throw new Error(`API HatasÄ±: ${response.status} - ${errorJson.error?.message || 'Bilinmeyen Hata'}`);
                } catch (error) {
                    if (i === maxRetries - 1) throw error; 
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // --- GEMINI API ENTEGRASYONU 1: DetaylÄ± AÃ§Ä±klama OluÅŸturma ---
        window.generateDetailedDescription = async function() {
            const title = document.getElementById('project-title').value;
            const location = document.getElementById('project-location').value;
            const featuresString = document.getElementById('project-features').value;
            const description = document.getElementById('project-description').value;

            if (!title) {
                window.showMessage("Proje baÅŸlÄ±ÄŸÄ± girilmelidir.", 'bg-red-600');
                return;
            }

            const prompt = `Act as a luxury construction marketing expert. Write a compelling, detailed, and persuasive project description (3-4 paragraphs, max 300 words) for a project titled "${title}" located in "${location}" (if available). Key features are: ${featuresString} (if available). Use this short description as inspiration: "${description}". Focus on quality, location, and elite lifestyle. Write the entire response in Turkish.`;
            
            window.showMessage("âœ¨ DetaylÄ± aÃ§Ä±klama Gemini ile oluÅŸturuluyor... LÃ¼tfen bekleyin.", 'bg-blue-600', 5000);

            try {
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    systemInstruction: {
                        parts: [{ text: "You are a professional, sophisticated copywriter for a luxury construction firm. Write your response in fluent, high-quality Turkish, using marketing language suitable for elite real estate." }]
                    }
                };

                const result = await fetchWithBackoff(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    document.getElementById('project-detailed-description').value = text.trim();
                    window.showMessage("âœ¨ DetaylÄ± aÃ§Ä±klama baÅŸarÄ±yla oluÅŸturuldu!", 'bg-green-600');
                } else {
                    window.showMessage("AÃ§Ä±klama oluÅŸturulamadÄ±. LÃ¼tfen prompt'u kontrol edin.", 'bg-red-600');
                }
            } catch (error) {
                console.error("Gemini API HatasÄ±:", error);
                window.showMessage(`API hatasÄ±: Metin oluÅŸturulamadÄ±. ${error.message}`, 'bg-red-600', 8000);
            }
        };

        // --- GEMINI API ENTEGRASYONU 2: Pazarlama Metni OluÅŸturma (E-posta/Sosyal Medya/Brifing) ---
        window.generateCommunicationText = async function() {
            const title = document.getElementById('project-title').value;
            const location = document.getElementById('project-location').value;
            const featuresString = document.getElementById('project-features').value;
            const description = document.getElementById('project-description').value;
            const status = document.getElementById('project-status').value;
            const type = document.getElementById('communication-type').value;
            const outputArea = document.getElementById('communication-output');

            if (!title) {
                window.showMessage("Proje baÅŸlÄ±ÄŸÄ± girilmelidir.", 'bg-red-600');
                return;
            }

            outputArea.value = ''; // Ã–nceki Ã§Ä±ktÄ±yÄ± temizle
            
            let systemPrompt = `You are a professional marketing specialist for 'Bozkurt Ä°nÅŸaat' in Turkey, focusing on luxury real estate. Generate the requested content using the provided project details. Write the entire response in Turkish.`;
            let userPrompt = `Proje AdÄ±: ${title}. Konum: ${location}. Durum: ${status === 'completed' ? 'TamamlandÄ±' : 'Devam Ediyor'}. Temel Ã–zellikler: ${featuresString}. KÄ±sa AÃ§Ä±klama: ${description}.\n\n`;

            if (type === 'email') {
                systemPrompt += ` Your task is to draft a formal, personalized marketing email to a potential high-net-worth client. The email must be polite, engaging, highlight key features, and include a strong call-to-action for a site visit. Use a professional salutation and closing. Max 200 words.`;
                userPrompt += `Bu bilgileri kullanarak potansiyel bir mÃ¼ÅŸteriye Ã¶zel e-posta taslaÄŸÄ± oluÅŸtur.`;
            } else if (type === 'social') {
                systemPrompt += ` Your task is to draft a short, visually appealing social media post (e.g., for Instagram/X) using emojis and hashtags. Focus on excitement, luxury, and the project status. Max 50 words.`;
                userPrompt += `Bu bilgileri kullanarak sosyal medya (Instagram/X) gÃ¶nderisi taslaÄŸÄ± oluÅŸtur (emoji ve hashtag kullan).`;
            } else if (type === 'brief') {
                systemPrompt += ` Your task is to draft a concise, objective summary for an investor briefing. Focus only on the project facts, status, and key investment highlights. Max 150 words.`;
                userPrompt += `Bu bilgileri kullanarak yatÄ±rÄ±mcÄ±lar iÃ§in resmi, kÄ±sa bir proje brifingi Ã¶zeti oluÅŸtur.`;
            }

            window.showMessage("âœ¨ Pazarlama metni Gemini ile hazÄ±rlanÄ±yor... LÃ¼tfen bekleyin.", 'bg-blue-600', 5000);

            try {
                const payload = {
                    contents: [{ parts: [{ text: userPrompt }] }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    }
                };

                const result = await fetchWithBackoff(GEMINI_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    outputArea.value = text.trim();
                    window.showMessage("âœ¨ Metin baÅŸarÄ±yla oluÅŸturuldu!", 'bg-green-600');
                } else {
                    window.showMessage("Metin oluÅŸturulamadÄ±. LÃ¼tfen tekrar deneyin.", 'bg-red-600');
                }
            } catch (error) {
                console.error("Gemini API HatasÄ±:", error);
                window.showMessage(`API hatasÄ±: Metin oluÅŸturulamadÄ±. ${error.message}`, 'bg-red-600', 8000);
            }
        };


        // --- GENEL UI VE YÃ–NETÄ°M FONKSÄ°YONLARI ---

        // Mesaj kutusu gÃ¶ster
        window.showMessage = function(message, bgColorClass = 'bg-green-600', duration = 3000) {
            const box = document.getElementById('message-box');
            box.textContent = message;
            box.className = 'fixed bottom-5 right-5 text-white p-4 rounded-lg shadow-xl transition-all duration-300 ease-in-out z-[1000] ' + bgColorClass;
            box.classList.remove('hidden', 'opacity-0');
            box.classList.add('opacity-100');

            setTimeout(() => {
                box.classList.remove('opacity-100');
                box.classList.add('opacity-0');
                setTimeout(() => box.classList.add('hidden'), 300);
            }, duration);
        }

        // GÃ¶rÃ¼nÃ¼m DeÄŸiÅŸtirme
        window.showView = function(viewId) {
            const mainView = document.getElementById('main-view');
            const adminView = document.getElementById('admin-view');

            if (viewId === 'admin') {
                mainView.classList.remove('visible-view');
                mainView.classList.add('hidden-view');
                adminView.classList.remove('hidden-view');
                adminView.classList.add('visible-view');
                document.body.classList.add('elite-bg'); 
                window.renderAdminProjectTable();
                window.renderAdminInquiryTable(); // YENÄ°: Ä°stekler tablosunu da render et
            } else { // main
                adminView.classList.remove('visible-view');
                adminView.classList.add('hidden-view');
                mainView.classList.remove('hidden-view');
                mainView.classList.add('visible-view');
                window.renderProjects();
            }
            lucide.createIcons();
        }

        // Mobile Menu AÃ§/Kapa
        window.setupMobileMenu = function() {
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuLinks = document.querySelectorAll('.menu-item-link');

            menuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuButton.setAttribute('aria-expanded', mobileMenu.classList.contains('hidden') ? 'false' : 'true');
            });

            menuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    menuButton.setAttribute('aria-expanded', 'false');
                });
            });
        }

        // --- PUBLIC SÄ°TE RENDER Ä°ÅLEMLERÄ° ---

window.renderProjectCard = function(project) {
    const isCompleted = project.status === 'completed';
    const yearText = project.year ? `${project.year}` : '';
    const statusColor = isCompleted ? 'bg-gradient-to-r from-green-500 to-emerald-600' : 'bg-gradient-to-r from-yellow-500 to-amber-600';
    const statusText = isCompleted ? 'TamamlandÄ±' : 'Devam Ediyor';
    
    const imageUrl = project.images && project.images.length > 0 
        ? project.images[0] 
        : `https://placehold.co/400x300/475569/FACC15?text=${encodeURIComponent(project.title)}`;
    
    // Ã–zelliklerden ilk 3'Ã¼nÃ¼ gÃ¶ster
    const featuresPreview = project.features && project.features.length > 0 
        ? project.features.slice(0, 3).map(f => `
            <li class="flex items-center text-xs text-gray-400">
                <i data-lucide="check" class="w-3 h-3 mr-1.5 text-yellow-500 flex-shrink-0"></i>
                <span>${f}</span>
            </li>
        `).join('')
        : '';
    
    // Kart iÃ§i carousel iÃ§in unique ID
    const cardId = `card-${project.id}`;
    const hasMultipleImages = project.images && project.images.length > 1;

    return `
        // âœ… YENÄ° KOD - Hafif animasyon
<div class="scroll-snap-card group rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 shadow-2xl overflow-hidden transition-shadow duration-300 border border-slate-700/50 hover:border-yellow-500/50">
            <!-- GÃ¶rsel Carousel -->
            <div class="relative h-56 overflow-hidden rounded-t-2xl">
                <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"></div>
                
                <!-- Carousel Container -->
                <div id="${cardId}-carousel" class="flex transition-transform duration-500 ease-in-out h-full" style="transform: translateX(0%);">
                    ${project.images && project.images.length > 0 
                        ? project.images.map((img, idx) => `
                            <img src="${img}" 
                                 loading="${idx === 0 ? 'eager' : 'lazy'}"
                                 decoding="async"
                                 alt="${project.title} - GÃ¶rsel ${idx + 1}" 
                                 class="w-full h-full object-cover flex-shrink-0"
                                 onerror="this.onerror=null; this.src='https://placehold.co/400x300/475569/FACC15?text=GÃ¶rsel+${idx+1}';"
                            >
                        `).join('')
                        : `<img src="${imageUrl}" loading="eager" decoding="async" alt="${project.title}" class="w-full h-full object-cover flex-shrink-0">`
                    }
                </div>
                
                <!-- Navigasyon OklarÄ± -->
                ${hasMultipleImages ? `
                // âœ… YENÄ° KOD - Sadece opacity animasyonu
                <button onclick="window.cardCarouselPrev('${cardId}', ${project.images.length}); event.stopPropagation();" 
                class="absolute left-2 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-yellow-500 text-white hover:text-slate-900 p-2 rounded-full transition-opacity duration-200 z-20 opacity-0 group-hover:opacity-100">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
                <button onclick="window.cardCarouselNext('${cardId}', ${project.images.length}); event.stopPropagation();" 
                        class="absolute right-2 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-yellow-500 text-white hover:text-slate-900 p-2 rounded-full transition-all z-20 opacity-0 group-hover:opacity-100">
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
                
                <!-- GÃ¶sterge NoktalarÄ± -->
                <div class="absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 z-20">
                    ${project.images.map((_, idx) => `
                        <span class="w-2 h-2 rounded-full ${idx === 0 ? 'bg-yellow-500' : 'bg-white/50'} transition-all" data-card="${cardId}" data-index="${idx}"></span>
                    `).join('')}
                </div>
                ` : ''}
                
                <span class="absolute top-4 right-4 ${statusColor} text-xs font-bold text-white px-3 py-1.5 rounded-full shadow-lg backdrop-blur-sm z-20">${statusText}</span>
                ${hasMultipleImages ? `<span class="absolute bottom-12 left-4 bg-black/50 backdrop-blur-sm text-xs text-white px-2 py-1 rounded-full z-20"><i data-lucide="images" class="w-3 h-3 inline mr-1"></i>${project.images.length} GÃ¶rsel</span>` : ''}
            </div>
            
            <!-- Ä°Ã§erik -->
            <div class="p-6 space-y-4">
                <!-- BaÅŸlÄ±k ve Konum -->
                <div>
                    <h4 class="text-xl font-extrabold text-white elite-text mb-2 line-clamp-1 group-hover:text-yellow-400 transition-colors">${project.title}</h4>
                    <p class="text-xs text-gray-400 flex items-center gap-1.5">
                        <i data-lucide="map-pin" class="w-3.5 h-3.5 text-yellow-500"></i> 
                        <span>${project.location || 'Konum BelirtilmemiÅŸ'}${yearText ? ` â€¢ ${yearText}` : ''}</span>
                    </p>
                </div>
                
                <!-- AÃ§Ä±klama -->
                <p class="text-gray-400 text-sm leading-relaxed line-clamp-2">${project.description}</p>
                
                <!-- Ã–zellikler Ã–nizleme -->
                ${featuresPreview ? `<ul class="space-y-1.5 border-t border-slate-700/50 pt-3">${featuresPreview}</ul>` : ''}
                
                <!-- Detay Butonu -->
                <button onclick="window.showProjectModal('${project.id}')" class="w-full mt-4 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-400 hover:to-amber-500 text-slate-900 font-bold py-2.5 px-4 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-yellow-500/50 transform hover:-translate-y-0.5">
                    <span>DetaylarÄ± GÃ¶r</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    `;
}

// Kart carousel fonksiyonlarÄ±
window.cardCarouselIndexes = {};

window.cardCarouselNext = function(cardId, totalImages) {
    if (!window.cardCarouselIndexes[cardId]) window.cardCarouselIndexes[cardId] = 0;
    window.cardCarouselIndexes[cardId] = (window.cardCarouselIndexes[cardId] + 1) % totalImages;
    window.updateCardCarousel(cardId, totalImages);
}

window.cardCarouselPrev = function(cardId, totalImages) {
    if (!window.cardCarouselIndexes[cardId]) window.cardCarouselIndexes[cardId] = 0;
    window.cardCarouselIndexes[cardId] = (window.cardCarouselIndexes[cardId] - 1 + totalImages) % totalImages;
    window.updateCardCarousel(cardId, totalImages);
}

window.updateCardCarousel = function(cardId, totalImages) {
    const carousel = document.getElementById(`${cardId}-carousel`);
    const currentIndex = window.cardCarouselIndexes[cardId] || 0;
    if (carousel) {
        carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
        
        // Dot'larÄ± gÃ¼ncelle
        document.querySelectorAll(`[data-card="${cardId}"]`).forEach((dot, idx) => {
            if (idx === currentIndex) {
                dot.classList.add('bg-yellow-500');
                dot.classList.remove('bg-white/50');
            } else {
                dot.classList.remove('bg-yellow-500');
                dot.classList.add('bg-white/50');
            }
        });
    }
}

// âœ… YENÄ°: Devam eden projeler iÃ§in (grid layout) - Modern TasarÄ±m + Navigasyon OklarÄ±
window.renderOngoingProjectCard = function(project) {
    const yearText = project.year ? `${project.year}` : '';
    
    const imageUrl = project.images && project.images.length > 0 
        ? project.images[0] 
        : `https://placehold.co/400x300/475569/FACC15?text=${encodeURIComponent(project.title)}`;
    
    // Ã–zelliklerden ilk 3'Ã¼nÃ¼ gÃ¶ster
    const featuresPreview = project.features && project.features.length > 0 
        ? project.features.slice(0, 3).map(f => `
            <li class="flex items-center text-xs text-gray-400">
                <i data-lucide="check" class="w-3 h-3 mr-1.5 text-yellow-500 flex-shrink-0"></i>
                <span>${f}</span>
            </li>
        `).join('')
        : '';
    
    // Kart iÃ§i carousel iÃ§in unique ID
    const cardId = `card-${project.id}`;
    const hasMultipleImages = project.images && project.images.length > 1;

    return `
        <div class="group rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 shadow-2xl overflow-hidden transform hover:scale-[1.03] hover:shadow-amber-500/20 transition-all duration-500 border border-slate-700/50 hover:border-amber-500/50">
            <!-- GÃ¶rsel Carousel -->
            <div class="relative h-56 overflow-hidden rounded-t-2xl">
                <div class="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent z-10 opacity-60"></div>
                
                <!-- Carousel Container -->
                <div id="${cardId}-carousel" class="flex transition-transform duration-500 ease-in-out h-full" style="transform: translateX(0%);">
                    ${project.images && project.images.length > 0 
                        ? project.images.map((img, idx) => `
                            <img src="${img}" 
                                 loading="${idx === 0 ? 'eager' : 'lazy'}"
                                 decoding="async"
                                 alt="${project.title} - GÃ¶rsel ${idx + 1}" 
                                 class="w-full h-full object-cover flex-shrink-0"
                                 onerror="this.onerror=null; this.src='https://placehold.co/400x300/475569/FACC15?text=GÃ¶rsel+${idx+1}';"
                            >
                        `).join('')
                        : `<img src="${imageUrl}" loading="eager" decoding="async" alt="${project.title}" class="w-full h-full object-cover flex-shrink-0">`
                    }
                </div>
                
                <!-- Navigasyon OklarÄ± -->
                ${hasMultipleImages ? `
                // âœ… YENÄ° KOD - Sadece opacity animasyonu
<button onclick="window.cardCarouselPrev('${cardId}', ${project.images.length}); event.stopPropagation();" 
        class="absolute left-2 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-yellow-500 text-white hover:text-slate-900 p-2 rounded-full transition-opacity duration-200 z-20 opacity-0 group-hover:opacity-100">
                    <i data-lucide="chevron-left" class="w-5 h-5"></i>
                </button>
                <button onclick="window.cardCarouselNext('${cardId}', ${project.images.length}); event.stopPropagation();" 
                        class="absolute right-2 top-1/2 -translate-y-1/2 bg-black/70 hover:bg-yellow-500 text-white hover:text-slate-900 p-2 rounded-full transition-all z-20 opacity-0 group-hover:opacity-100">
                    <i data-lucide="chevron-right" class="w-5 h-5"></i>
                </button>
                
                <!-- GÃ¶sterge NoktalarÄ± -->
                <div class="absolute bottom-2 left-0 right-0 flex justify-center gap-1.5 z-20">
                    ${project.images.map((_, idx) => `
                        <span class="w-2 h-2 rounded-full ${idx === 0 ? 'bg-yellow-500' : 'bg-white/50'} transition-all" data-card="${cardId}" data-index="${idx}"></span>
                    `).join('')}
                </div>
                ` : ''}
                
                <span class="absolute top-4 right-4 bg-gradient-to-r from-yellow-500 to-amber-600 text-xs font-bold text-white px-3 py-1.5 rounded-full shadow-lg backdrop-blur-sm z-20 animate-pulse">Devam Ediyor</span>
                ${hasMultipleImages ? `<span class="absolute bottom-12 left-4 bg-black/50 backdrop-blur-sm text-xs text-white px-2 py-1 rounded-full z-20"><i data-lucide="images" class="w-3 h-3 inline mr-1"></i>${project.images.length} GÃ¶rsel</span>` : ''}
            </div>
            
            <!-- Ä°Ã§erik -->
            <div class="p-6 space-y-4">
                <!-- BaÅŸlÄ±k ve Konum -->
                <div>
                    <h4 class="text-xl font-extrabold text-white elite-text mb-2 line-clamp-1 group-hover:text-yellow-400 transition-colors">${project.title}</h4>
                    <p class="text-xs text-gray-400 flex items-center gap-1.5">
                        <i data-lucide="map-pin" class="w-3.5 h-3.5 text-yellow-500"></i> 
                        <span>${project.location || 'Konum BelirtilmemiÅŸ'}${yearText ? ` â€¢ ${yearText}` : ''}</span>
                    </p>
                </div>
                
                <!-- AÃ§Ä±klama -->
                <p class="text-gray-400 text-sm leading-relaxed line-clamp-2">${project.description}</p>
                
                <!-- Ã–zellikler Ã–nizleme -->
                ${featuresPreview ? `<ul class="space-y-1.5 border-t border-slate-700/50 pt-3">${featuresPreview}</ul>` : ''}
                
                <!-- Detay Butonu -->
                <button onclick="window.showProjectModal('${project.id}')" class="w-full mt-4 bg-gradient-to-r from-yellow-500 to-amber-600 hover:from-yellow-400 hover:to-amber-500 text-slate-900 font-bold py-2.5 px-4 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg hover:shadow-amber-500/50 transform hover:-translate-y-0.5">
                    <span>DetaylarÄ± GÃ¶r</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    `;
}

    window.renderProjects = function() {
    const completedContainer = document.getElementById('completed-projects-container');
    const ongoingContainer = document.getElementById('ongoing-projects-container');
    const noCompleted = document.getElementById('no-completed-projects');
    const noOngoing = document.getElementById('no-ongoing-projects');

    if (!completedContainer || !ongoingContainer) return;

    completedContainer.innerHTML = '';
    ongoingContainer.innerHTML = '';
    
    // âœ¨ Order'a gÃ¶re sÄ±rala
    const sortedProjects = [...window.projects].sort((a, b) => (a.order || 999) - (b.order || 999));
    const completed = sortedProjects.filter(p => p.status === 'completed');
    const ongoing = sortedProjects.filter(p => p.status === 'ongoing');

    // Tamamlanan projeler
    // âœ… PERFORMANS: innerHTML += yerine DocumentFragment
    if (completed.length > 0) {
        const fragment = document.createDocumentFragment();
        const tempDiv = document.createElement('div');
        completed.forEach(p => {
            tempDiv.innerHTML = window.renderProjectCard(p);
            fragment.appendChild(tempDiv.firstElementChild);
        });
        completedContainer.appendChild(fragment);
        noCompleted.classList.add('hidden');
    } else {
        completedContainer.innerHTML = '';
        noCompleted.classList.remove('hidden');
    }

    // Devam eden projeler
    if (ongoing.length > 0) {
        const fragment = document.createDocumentFragment();
        const tempDiv = document.createElement('div');
        ongoing.forEach(p => {
            tempDiv.innerHTML = window.renderOngoingProjectCard(p);
            fragment.appendChild(tempDiv.firstElementChild);
        });
        ongoingContainer.appendChild(fragment);
        noOngoing.classList.add('hidden');
    } else {
        ongoingContainer.innerHTML = '';
        noOngoing.classList.remove('hidden');
    }

    // âœ… PERFORMANS: RAF ile icon refresh
    requestAnimationFrame(() => lucide.createIcons());
}

window.renderContactInfo = function() {
    const info = window.contactInfo;
    console.log("renderContactInfo Ã§alÄ±ÅŸtÄ±, kullanÄ±lan veri:", info, "| timestamp:", new Date().toISOString());

    // 1. ADRES GÃ¼ncelleme
    const addressEl = document.getElementById('contact-address-display');
    if (addressEl) {
        addressEl.textContent = info.address || "Adres bilgisi mevcut deÄŸil";
        console.log(`Adres gÃ¼ncellendi: "${addressEl.textContent}"`);
    } else {
        console.warn("âš ï¸ Adres elementi bulunamadÄ±! DOM henÃ¼z hazÄ±r olmayabilir.");
    }

    // 2. TELEFON GÃ¼ncelleme
    const phoneDisplayEl = document.getElementById('contact-phone-display');
    const phoneLinkEl = document.getElementById('contact-phone-link');
    if (phoneDisplayEl && phoneLinkEl && info.phone) {
        phoneDisplayEl.textContent = info.phone;
        phoneLinkEl.href = 'tel:' + info.phone.replace(/[^0-9+]/g, '');
        console.log("Telefon gÃ¼ncellendi:", info.phone);
    } else {
        console.warn("âš ï¸ Telefon elementleri veya veri eksik");
    }

    // 3. E-POSTA GÃ¼ncelleme
    const emailDisplayEl = document.getElementById('contact-email-display');
    const emailLinkEl = document.getElementById('contact-email-link');
    if (emailDisplayEl && emailLinkEl && info.email) {
        emailDisplayEl.textContent = info.email;
        emailLinkEl.href = 'mailto:' + info.email;
        console.log("E-posta gÃ¼ncellendi:", info.email);
    } else {
        console.warn("âš ï¸ E-posta elementleri veya veri eksik");
    }
};

// Admin Formunu Doldur
window.populateContactForm = function() {
    const addressInput = document.getElementById('admin-contact-address');
    const phoneInput = document.getElementById('admin-contact-phone');
    const emailInput = document.getElementById('admin-contact-email');

    if (addressInput) addressInput.value = window.contactInfo.address || '';
    if (phoneInput) phoneInput.value = window.contactInfo.phone || '';
    if (emailInput) emailInput.value = window.contactInfo.email || '';
};

window.showProjectModal = function(id) {
    const project = window.projects.find(p => p.id === id);
    if (!project) return;

    const modal = document.getElementById('project-modal');
    const content = document.getElementById('modal-content');
    
    console.log('ğŸ“¸ Proje gÃ¶rselleri:', project.images);
    
    // Ã–zellikler HTML
    const featuresHtml = (project.features && project.features.length > 0)
        ? `<ul class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3 mt-4 text-slate-300">
            ${project.features.map(f => `
                <li class="flex items-center text-sm group">
                    <i data-lucide="check-circle" class="w-5 h-5 mr-3 text-yellow-400 flex-shrink-0 group-hover:scale-110 transition-transform"></i>
                    <span class="font-medium">${f}</span>
                </li>
            `).join('')}
        </ul>`
        : '<p class="text-gray-500 text-sm mt-4 italic">Ã–zellikler henÃ¼z eklenmemiÅŸ.</p>';
    
    // Ä°letiÅŸim bilgileri HTML
    const contactHtml = (project.contact_person || project.contact_phone || project.contact_email) ? `
        
            <div class="flex items-center gap-3 mb-6">
                <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center">
                    <i data-lucide="phone-call" class="w-6 h-6 text-slate-900"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-white elite-text">Proje Ä°letiÅŸim</h3>
                    <p class="text-sm text-gray-400">DetaylÄ± bilgi ve satÄ±ÅŸ iÃ§in iletiÅŸime geÃ§in</p>
                </div>
            </div>
            <div class="space-y-4">
                ${project.contact_phone ? `
                <a href="tel:${project.contact_phone}" class="flex items-center gap-4 p-4 bg-gradient-to-r from-yellow-500/20 to-amber-600/20 rounded-xl hover:from-yellow-500/30 hover:to-amber-600/30 border border-yellow-500/50 hover:border-yellow-400 transition-all group">
                    <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform">
                        <i data-lucide="phone" class="w-5 h-5 text-slate-900"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-xs text-yellow-400 font-semibold">Telefon NumarasÄ±</p>
                        <p class="text-white font-bold text-lg group-hover:text-yellow-300 transition-colors">${project.contact_phone}</p>
                    </div>
                    <i data-lucide="chevron-right" class="w-5 h-5 text-yellow-400 opacity-0 group-hover:opacity-100 transition-opacity"></i>
                </a>
                ` : ''}
                ${project.contact_person ? `
                <div class="flex items-center gap-4 p-3 bg-slate-700/30 rounded-xl">
                    <i data-lucide="user" class="w-5 h-5 text-yellow-400 flex-shrink-0"></i>
                    <div>
                        <p class="text-xs text-gray-400">Yetkili KiÅŸi</p>
                        <p class="text-white font-semibold">${project.contact_person}</p>
                    </div>
                </div>
                ` : ''}
                ${project.contact_email ? `
                <a href="mailto:${project.contact_email}" class="flex items-center gap-4 p-3 bg-slate-700/30 rounded-xl hover:bg-yellow-500/10 hover:border-yellow-500/50 border border-transparent transition-all group">
                    <i data-lucide="mail" class="w-5 h-5 text-yellow-400 flex-shrink-0 group-hover:scale-110 transition-transform"></i>
                    <div>
                        <p class="text-xs text-gray-400">E-posta</p>
                        <p class="text-white font-semibold group-hover:text-yellow-400 transition-colors">${project.contact_email}</p>
                    </div>
                </a>
                ` : ''}
            </div>
        
    ` : '';
    
    // Adres HTML
    const addressHtml = project.address ? `
        <div class="mt-8 p-6 bg-slate-800/50 rounded-2xl border border-slate-700">
            <h3 class="text-2xl font-bold text-white elite-text mb-4 flex items-center gap-2">
                <i data-lucide="map-pin" class="w-6 h-6 text-yellow-400"></i>
                Proje Adresi
            </h3>
            <div class="bg-slate-700/30 p-4 rounded-xl">
                <p class="text-gray-300 leading-relaxed">${project.address}</p>
            </div>
        </div>
    ` : '';

    // âœ… YENÄ° CAROUSEL - Inline Image Tags ile
    const hasImages = project.images && project.images.length > 0;
    let carouselHTML = '';
    
    if (hasImages) {
        carouselHTML = `
            <div class="relative overflow-hidden">
                <div class="relative h-96 rounded-xl overflow-hidden">
                    ${project.images.map((imgSrc, index) => `
                        <img 
                            id="carousel-img-${index}"
                            src="${imgSrc}" 
                            loading="${index === 0 ? 'eager' : 'lazy'}"
                            decoding="async"
                            alt="${project.title} GÃ¶rsel ${index + 1}" 
                            class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500"
                            style="opacity: ${index === 0 ? '1' : '0'}; z-index: ${index === 0 ? '10' : '1'};"
                            onerror="this.onerror=null; this.src='https://placehold.co/800x400/475569/FACC15?text=GÃ¶rsel+${index+1}';"
                        >
                    `).join('')}
                </div>
                
                ${project.images.length > 1 ? `
                <button onclick="window.carouselPrev()" class="absolute top-1/2 left-6 bg-black/70 backdrop-blur-sm p-3 rounded-full text-white hover:bg-yellow-500 hover:text-slate-900  z-20">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <button onclick="window.carouselNext()" class="absolute top-1/2 right-6 bg-black/70 backdrop-blur-sm p-3 rounded-full text-white hover:bg-yellow-500 hover:text-slate-900 z-20">
                    <i data-lucide="chevron-right" class="w-6 h-6"></i>
                </button>
                
                <div class="absolute bottom-8 left-0 right-0 flex justify-center space-x-2 z-20">
                    ${project.images.map((_, index) => `
                        <button 
                            id="carousel-dot-${index}"
                            onclick="window.carouselGoTo(${index})" 
                            class="w-3 h-3 rounded-full transition-all duration-300 hover:scale-125 ${index === 0 ? 'bg-yellow-500 scale-110' : 'bg-gray-400'}"
                        ></button>
                    `).join('')}
                </div>
                ` : ''}
            </div>
        `;
    } else {
        carouselHTML = `
            <div class="relative">
                <div class="h-96 rounded-xl overflow-hidden flex items-center justify-center bg-slate-700">
                    <p class="text-gray-400 text-xl">GÃ¶rsel bulunmuyor</p>
                </div>
            </div>
        `;
    }
    
    // Thumbnail galerisi
    const thumbnailGallery = (hasImages && project.images.length > 1) ? `
        <div class="border-t border-slate-700 pt-8">
            <h3 class="text-2xl font-bold text-white elite-text mb-4 flex items-center gap-2">
                <i data-lucide="images" class="w-6 h-6 text-yellow-400"></i>
                Proje GÃ¶rselleri (${project.images.length})
            </h3>
            <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3">
                ${project.images.map((imgSrc, index) => `
                    <div onclick="window.carouselGoTo(${index})" class="cursor-pointer group relative aspect-square rounded-lg overflow-hidden border-2 border-slate-700 hover:border-yellow-500 transition-all duration-300 transform hover:scale-105">
                        <img src="${imgSrc}" 
                            loading="lazy"
                            decoding="async"
                            alt="Thumbnail ${index + 1}" 
                            class="w-full h-full object-cover transition-all duration-300 group-hover:brightness-75"
                            onerror="this.onerror=null; this.src='https://placehold.co/150x150/475569/FACC15?text=${index+1}';"
                        >
                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-all flex items-center justify-center">
                            <i data-lucide="maximize-2" class="w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"></i>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    ` : '';

    // Tam HTML
    content.innerHTML = `
        <div class="space-y-8">
            <div class="text-center border-b border-slate-700 pb-6">
                <h1 id="modal-title" class="text-4xl md:text-5xl font-extrabold elite-text mb-3">${project.title}</h1>
                <p class="text-lg text-gray-300 flex items-center justify-center gap-4 flex-wrap">
                    <span class="flex items-center gap-2">
                        <i data-lucide="map-pin" class="w-5 h-5 text-yellow-400"></i>
                        ${project.location || 'Ä°l ve Ä°lÃ§e BelirtilmemiÅŸ'}
                    </span>
                    <span class="text-gray-500">â€¢</span>
                    <span class="flex items-center gap-2">
                        <i data-lucide="calendar" class="w-5 h-5 text-yellow-400"></i>
                        Teslim: ${project.year || 'BelirtilmemiÅŸ'}
                    </span>
                </p>
            </div>
            
            ${carouselHTML}

    
                <h3 class="text-2xl font-bold text-white elite-text mb-4 flex items-center gap-2">
                    <i data-lucide="file-text" class="w-6 h-6 text-yellow-400"></i>
                    Proje DetaylarÄ±
                </h3>
                <p class="text-gray-400 leading-relaxed whitespace-pre-wrap">${project.detailedDescription || project.description || 'DetaylÄ± aÃ§Ä±klama mevcut deÄŸil.'}</p>
            

            
                <h3 class="text-2xl font-bold text-white elite-text mb-4 flex items-center gap-2">
                    <i data-lucide="star" class="w-6 h-6 text-yellow-400"></i>
                    Ã–ne Ã‡Ä±kan Ã–zellikler
                </h3>
                <div>${featuresHtml}</div>
            
            
            ${thumbnailGallery}
            ${contactHtml}
            ${addressHtml}
        </div>
    `;
    
    lucide.createIcons();

    modal.classList.remove('hidden', 'opacity-0');
    modal.classList.add('flex');
    setTimeout(() => modal.classList.add('opacity-100'), 10);
    document.body.classList.add('modal-open');
    
    // Global deÄŸiÅŸkenler
    window.currentCarouselImages = project.images || [];
    window.currentCarouselIndex = 0;
    
    window.setupKeyboardNav();
}

        window.closeProjectModal = function() {
        const modal = document.getElementById('project-modal');
        modal.classList.remove('opacity-100');
        modal.classList.add('opacity-0');
        document.body.classList.remove('modal-open');
        
        // Klavye listener'Ä± kaldÄ±r
        window.removeKeyboardNav();
    
        setTimeout(() => {
        modal.classList.remove('flex');
        modal.classList.add('hidden');
        }, 300);
        }

        // âœ… YENÄ° CAROUSEL KONTROL FONKSÄ°YONLARI
window.carouselGoTo = function(index) {
    if (!window.currentCarouselImages || window.currentCarouselImages.length === 0) return;
    
    const total = window.currentCarouselImages.length;
    
    // Eski slide'Ä± gizle
    const oldImg = document.getElementById(`carousel-img-${window.currentCarouselIndex}`);
    if (oldImg) {
        oldImg.style.opacity = '0';
        oldImg.style.zIndex = '1';
    }
    
    // Eski dot'u gÃ¼ncelle
    const oldDot = document.getElementById(`carousel-dot-${window.currentCarouselIndex}`);
    if (oldDot) {
        oldDot.classList.remove('bg-yellow-500', 'scale-110');
        oldDot.classList.add('bg-gray-400');
    }
    
    // Yeni slide'Ä± gÃ¶ster
    window.currentCarouselIndex = index;
    const newImg = document.getElementById(`carousel-img-${index}`);
    if (newImg) {
        newImg.style.opacity = '1';
        newImg.style.zIndex = '10';
    }
    
    // Yeni dot'u gÃ¼ncelle
    const newDot = document.getElementById(`carousel-dot-${index}`);
    if (newDot) {
        newDot.classList.remove('bg-gray-400');
        newDot.classList.add('bg-yellow-500', 'scale-110');
    }
    
    console.log('ğŸ¯ Carousel index:', index);
}

window.carouselNext = function() {
    if (!window.currentCarouselImages || window.currentCarouselImages.length === 0) return;
    const nextIndex = (window.currentCarouselIndex + 1) % window.currentCarouselImages.length;
    window.carouselGoTo(nextIndex);
}

window.carouselPrev = function() {
    if (!window.currentCarouselImages || window.currentCarouselImages.length === 0) return;
    const prevIndex = (window.currentCarouselIndex - 1 + window.currentCarouselImages.length) % window.currentCarouselImages.length;
    window.carouselGoTo(prevIndex);
}
        
        // âœ¨ KLAVYE NAVÄ°GASYONU (Ok TuÅŸlarÄ±)
        window.keyboardNavHandler = null;
        
// Mevcut setupKeyboardNav fonksiyonunu bununla deÄŸiÅŸtir
window.setupKeyboardNav = function() {
    window.keyboardNavHandler = function(e) {
        if (e.key === 'ArrowLeft') {
            e.preventDefault();
            window.carouselPrev();
        } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            window.carouselNext();
        } else if (e.key === 'Escape') {
            e.preventDefault();
            window.closeProjectModal();
        }
    };
    document.addEventListener('keydown', window.keyboardNavHandler);
}
        
        window.removeKeyboardNav = function() {
            if (window.keyboardNavHandler) {
                document.removeEventListener('keydown', window.keyboardNavHandler);
                window.keyboardNavHandler = null;
            }
        }
        
        // Carousel Navigasyon FonksiyonlarÄ± (GÃ¼ncellendi - Scroll yerine Transform)
        window.moveCarousel = function(direction) {
            const carousel = document.getElementById('project-carousel');
            if (!carousel || !window.currentProjectCarousel || !window.currentProjectCarousel.images || window.currentProjectCarousel.images.length === 0) return;

            const totalSlides = window.currentProjectCarousel.images.length;
            let newIndex = window.currentSlideIndex;

            if (direction === 'next') {
                newIndex = (newIndex + 1) % totalSlides;
            } else if (direction === 'prev') {
                newIndex = (newIndex - 1 + totalSlides) % totalSlides;
            }
            
            window.goToSlide(newIndex);
        }
        // âœ… YENÄ° KOD - will-change kaldÄ±rÄ±ldÄ±
window.goToSlide = function(index) {
    const carousel = document.getElementById('project-carousel');
    if (!carousel) return;
    
    carousel.style.transform = `translateX(-${index * 100}%)`;
    carousel.style.transition = 'transform 0.3s ease-out'; // HÄ±zlandÄ±rÄ±ldÄ±
    
    window.currentSlideIndex = index;
    window.updateCarouselDots();
}
        
        window.updateCarouselDots = function() {
            const dotsContainer = document.getElementById('carousel-dots');
            if (!dotsContainer) return;
            dotsContainer.querySelectorAll('.dot').forEach((dot, index) => {
                if (index === window.currentSlideIndex) {
                    dot.classList.add('bg-yellow-500', 'scale-110');
                    dot.classList.remove('bg-gray-400');
                } else {
                    dot.classList.remove('bg-yellow-500', 'scale-110');
                    dot.classList.add('bg-gray-400');
                }
            });
        }


        // --- ADMIN GÄ°RÄ°Å Ä°ÅLEMLERÄ° ---
        
        // GÃœNCELLENDÄ°: Admin giriÅŸi iÃ§in klavye dinleyicisi
        window.setupAdminAccess = function() {
            const pressedKeys = new Set();
            const requiredKeys = ['Alt', 'b', 'z', 'k']; // 'Alt' yerine 'Meta' (Command) da olabilir, bu platformda Alt kullanÄ±yoruz.

            document.addEventListener('keydown', (e) => {
                // Alt tuÅŸunu da yakalamak iÃ§in Alt veya Meta kontrolÃ¼ ekleyebiliriz
                if (e.key === 'Alt') pressedKeys.add('Alt'); 
                
                // KÃ¼Ã§Ã¼k harfle tuÅŸ adÄ±nÄ± al
                const key = e.key.toLowerCase();
                if (requiredKeys.includes(key) && key !== 'Alt') {
                    pressedKeys.add(key);
                }

                if (requiredKeys.every(k => pressedKeys.has(k))) {
                    window.showLoginModal();
                    // Bir kez yakaladÄ±ktan sonra sÄ±fÄ±rla
                    pressedKeys.clear();
                }
            });

            document.addEventListener('keyup', (e) => {
                const key = e.key.toLowerCase();
                pressedKeys.delete(key);
                if (e.key === 'Alt') pressedKeys.delete('Alt');
            });
            
            // Yedek admin butonu (UI'da gizli)
            document.getElementById('debug-admin-btn').onclick = window.showLoginModal;

            };
            window.adminLogin = async () => {
    const emailInput = document.getElementById('admin-email');
    const passwordInput = document.getElementById('admin-password');
    const statusText = document.getElementById('auth-status');

    // Firebase Auth'un hazÄ±r olmasÄ±nÄ± bekle
    if (!window.auth) {
        statusText.textContent = "Firebase baÅŸlatÄ±lÄ±yor, lÃ¼tfen bekleyin...";
        
        let attempts = 0;
        while (!window.auth && attempts < 50) {
            await new Promise(resolve => setTimeout(resolve, 200));
            attempts++;
        }
        
        if (!window.auth) {
            statusText.textContent = "Hata: Firebase Auth baÅŸlatÄ±lamadÄ±.";
            return;
        }
    }

    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();

    if (!email || !password) {
        statusText.textContent = "E-posta ve ÅŸifre girilmelidir.";
        return;
    }

    statusText.textContent = "GiriÅŸ yapÄ±lÄ±yor...";

    try {
        // âœ… DÃœZELTÄ°LDÄ°: signInWithEmailAndPassword'Ã¼ import edin
        const { signInWithEmailAndPassword } = await import("https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js");
        
        const userCredential = await signInWithEmailAndPassword(window.auth, email, password);
        const user = userCredential.user;
        
        console.log("âœ… GÄ°RÄ°Å BAÅARILI:", user.email);
        
        window.isAdminLoggedIn = true;
        window.showMessage(`YÃ¶netici GiriÅŸi BaÅŸarÄ±lÄ±. HoÅŸ geldiniz: ${user.email}`, 'bg-green-600');
        
        window.hideLoginModal();
        window.showView('admin'); 
        
        passwordInput.value = ''; 
        emailInput.value = '';
        statusText.textContent = '';
        
    } catch (error) {
        console.error("âŒ TAM HATA DETAYI:", error);
        console.error("âŒ Hata Kodu:", error.code);
        console.error("âŒ Hata MesajÄ±:", error.message);
        
        let message = "GiriÅŸ baÅŸarÄ±sÄ±z oldu: E-posta veya ÅŸifre hatalÄ±.";
        
        if (error.code === 'auth/invalid-email') {
            message = "GeÃ§ersiz e-posta formatÄ±.";
        } else if (error.code === 'auth/invalid-credential') {
            message = "E-posta veya ÅŸifre hatalÄ±. Firebase'de bu kullanÄ±cÄ± bulunamadÄ±.";
        } else if (error.code === 'auth/user-not-found') {
            message = "Bu e-posta ile kayÄ±tlÄ± kullanÄ±cÄ± bulunamadÄ±.";
        } else if (error.code === 'auth/wrong-password') {
            message = "Åifre hatalÄ±.";
        } else if (error.code === 'auth/too-many-requests') {
            message = "Ã‡ok fazla baÅŸarÄ±sÄ±z deneme. LÃ¼tfen daha sonra tekrar deneyin.";
        } else if (error.code) {
            message = `Hata: ${error.code} - ${error.message}`;
        } else {
            message = `Bilinmeyen hata: ${error.message || 'Detay yok'}`;
        }
        
        statusText.textContent = message;
        window.showMessage(message, 'bg-red-600', 8000);
        passwordInput.value = ''; 
    }
};

            window.showLoginModal = function() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('opacity-100'), 10);
            document.body.classList.add('modal-open');
            }

            window.hideLoginModal = function() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('opacity-100');
            modal.classList.add('opacity-0');
            document.body.classList.remove('modal-open');
            setTimeout(() => modal.classList.add('hidden'), 300);
            }


            // --- ADMIN PROJE YÃ–NETÄ°MÄ° TABLOSU ---
            window.renderAdminProjectTable = function() {
            const tableBody = document.getElementById('admin-project-table-body');
            const noProjectsMessage = document.getElementById('admin-no-projects-message');
            if (!tableBody) return;

            tableBody.innerHTML = ''; 

            if (window.projects.length === 0) {
                noProjectsMessage.classList.remove('hidden');
                tableBody.innerHTML = '<tr><td colspan="5" class="text-center py-4 text-gray-500">HenÃ¼z bir proje eklenmemiÅŸ.</td></tr>';
                return;
            }
            noProjectsMessage.classList.add('hidden');

            // âœ¨ Projeleri order'a gÃ¶re sÄ±rala
            const sortedProjects = [...window.projects].sort((a, b) => (a.order || 999) - (b.order || 999));

            sortedProjects.forEach((project, index) => {
                const isCompleted = project.status === 'completed';
                const statusColor = isCompleted ? 'bg-green-600' : 'bg-yellow-600';
                const statusText = isCompleted ? 'TamamlandÄ±' : 'Devam Ediyor';
                const isFirst = index === 0;
                const isLast = index === sortedProjects.length - 1;

                const row = document.createElement('tr');
                row.className = 'hover:bg-slate-800 transition duration-150';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">${project.title}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusColor} text-slate-900">${statusText}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">${project.year || 'N/A'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <div class="flex items-center justify-center gap-2">
                            <button onclick="window.moveProject('${project.id}', 'up')" 
                                    ${isFirst ? 'disabled' : ''}
                                    class="text-yellow-500 hover:text-yellow-300 transition ${isFirst ? 'opacity-30 cursor-not-allowed' : ''}" 
                                    aria-label="YukarÄ± TaÅŸÄ±">
                                <i data-lucide="arrow-up" class="w-5 h-5"></i>
                            </button>
                            <button onclick="window.moveProject('${project.id}', 'down')" 
                                    ${isLast ? 'disabled' : ''}
                                    class="text-yellow-500 hover:text-yellow-300 transition ${isLast ? 'opacity-30 cursor-not-allowed' : ''}" 
                                    aria-label="AÅŸaÄŸÄ± TaÅŸÄ±">
                                <i data-lucide="arrow-down" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
                        <button onclick="window.editProject('${project.id}')" class="text-blue-500 hover:text-blue-300 transition" aria-label="DÃ¼zenle">
                            <i data-lucide="square-pen" class="w-5 h-5 inline-block"></i>
                        </button>
                        <button onclick="window.deleteProject('${project.id}')" class="text-red-500 hover:text-red-300 transition" aria-label="Sil">
                            <i data-lucide="trash-2" class="w-5 h-5 inline-block"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            lucide.createIcons();
        }
        
        // âœ¨ YENÄ°: Proje SÄ±ralama Fonksiyonu
        // âœ¨ PROJE SIRALAMA - Firestore ile Ã‡alÄ±ÅŸÄ±r Halde
        window.moveProject = async function(projectId, direction) {
            const projectIndex = window.projects.findIndex(p => p.id === projectId);
            if (projectIndex === -1) return;
            
            if (!db || !auth.currentUser) {
                window.showMessage('VeritabanÄ± baÄŸlantÄ±sÄ± yok veya yetkiniz eksik.', 'bg-red-600');
                return;
            }
            
            // Order deÄŸerlerini gÃ¼ncelle
            const sortedProjects = [...window.projects].sort((a, b) => (a.order || 999) - (b.order || 999));
            const currentIndex = sortedProjects.findIndex(p => p.id === projectId);
            
            let project1, project2;
            
            if (direction === 'up' && currentIndex > 0) {
                // YukarÄ± taÅŸÄ±
                project1 = sortedProjects[currentIndex];
                project2 = sortedProjects[currentIndex - 1];
                
                const temp = project1.order !== undefined ? project1.order : currentIndex;
                project1.order = project2.order !== undefined ? project2.order : (currentIndex - 1);
                project2.order = temp;
            } else if (direction === 'down' && currentIndex < sortedProjects.length - 1) {
                // AÅŸaÄŸÄ± taÅŸÄ±
                project1 = sortedProjects[currentIndex];
                project2 = sortedProjects[currentIndex + 1];
                
                const temp = project1.order !== undefined ? project1.order : currentIndex;
                project1.order = project2.order !== undefined ? project2.order : (currentIndex + 1);
                project2.order = temp;
            } else {
                return; // Hareket edilemez
            }
            
            // Firestore'a kaydet
            try {
    const batch = window.writeBatch(db);
    
    const ref1 = window.doc(db, window.PROJECT_COLLECTION_PATH, project1.id);
    batch.update(ref1, { order: project1.order });
    
    const ref2 = window.doc(db, window.PROJECT_COLLECTION_PATH, project2.id);
    batch.update(ref2, { order: project2.order });
    
    await batch.commit();
    
    // Local state'i gÃ¼ncelle
    window.projects = window.projects.map(p => {
        if (p.id === project1.id) return { ...p, order: project1.order };
        if (p.id === project2.id) return { ...p, order: project2.order };
        return p;
    });
    
    // Tabloyu yeniden render et
    window.renderAdminProjectTable();
    
    window.showMessage('âœ… Proje sÄ±ralamasÄ± gÃ¼ncellendi!', 'bg-green-600');
} catch (error) {
    console.error('SÄ±ralama hatasÄ±:', error);
    window.showMessage(`âŒ Hata: ${error.message}`, 'bg-red-600');
}
        };

        window.renderAdminInquiryTable = function() {
    const tableBody = document.getElementById('admin-inquiry-table-body');
    const noInquiriesMessage = document.getElementById('admin-no-inquiries-message');
    if (!tableBody) return;

    tableBody.innerHTML = '';

    if (window.inquiries.length === 0) {
        noInquiriesMessage.classList.remove('hidden');
        tableBody.innerHTML = '<tr><td colspan="6" class="text-center py-4 text-gray-500">HenÃ¼z bir teklif isteÄŸi gelmemiÅŸtir.</td></tr>';
        return;
    }
    noInquiriesMessage.classList.add('hidden');

    window.inquiries.forEach(inquiry => {
        const date = new Date(inquiry.timestamp).toLocaleDateString('tr-TR', { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' });
        const summary = inquiry.message.length > 50 ? inquiry.message.substring(0, 50) + '...' : inquiry.message;
        const statusColor = inquiry.status === 'Yeni' ? 'bg-red-600' : 'bg-green-600';

        const row = document.createElement('tr');
        row.className = 'hover:bg-slate-800 transition duration-150';
        row.innerHTML = `
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white w-[15%]">${inquiry.name}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400 w-[20%]">${inquiry.email}</td>
            <td class="px-6 py-4 text-sm text-gray-300 truncate cursor-pointer hover:text-yellow-400 w-[30%]" onclick="window.showMessage('Tam Mesaj: ${inquiry.message.replace(/'/g, "\\'")}', 'bg-blue-600', 10000)" title="MesajÄ±n tamamÄ±nÄ± gÃ¶rmek iÃ§in tÄ±klayÄ±n">${summary}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400 w-[15%]">${date}</td>
            <td class="px-6 py-4 whitespace-nowrap text-center w-[10%]">
            <button onclick="window.updateInquiryStatus('${inquiry.id}', '${inquiry.status === 'Yeni' ? 'Okundu' : 'Yeni'}')" 
            class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusColor} text-white hover:opacity-80 transition cursor-pointer">
            ${inquiry.status}
            </button>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium w-[10%]">
                <button onclick="window.deleteInquiry('${inquiry.id}')" class="text-red-500 hover:text-red-300 transition" aria-label="Sil">
                    <i data-lucide="trash-2" class="w-5 h-5 inline-block"></i>
                </button>
            </td>
        `;
        tableBody.appendChild(row);
    });
    
    lucide.createIcons();
}


        // --- PROJE CRUD MODAL Ä°ÅLEMLERÄ° ---
        window.openProjectModal = function(project = null) {
            const modal = document.getElementById('project-crud-modal');
            const form = document.getElementById('project-crud-form');
            form.reset(); 
            window.currentProjectImages = []; // Global gÃ¶rsel array'ini temizle
            document.getElementById('communication-output').value = ''; // Ä°letiÅŸim Ã§Ä±ktÄ±sÄ±nÄ± temizle

            document.getElementById('crud-modal-title').textContent = project ? 'Proje DÃ¼zenle' : 'Yeni Proje Ekle';
            document.getElementById('project-id').value = project ? project.id : '';
            
            if (project) {
                // Mevcut projeyi dÃ¼zenle
                document.getElementById('project-title').value = project.title || '';
                document.getElementById('project-status').value = project.status || 'ongoing';
                document.getElementById('project-year').value = project.year || '';
                document.getElementById('project-location').value = project.location || '';
                document.getElementById('project-address').value = project.address || ''; // âœ¨ YENÄ°
                document.getElementById('project-description').value = project.description || '';
                document.getElementById('project-detailed-description').value = project.detailedDescription || '';
                document.getElementById('project-contact-person').value = project.contact_person || '';
                document.getElementById('project-contact-phone').value = project.contact_phone || '';
                document.getElementById('project-contact-email').value = project.contact_email || '';
                
                // Ã–zellikler dizisini string'e Ã§evir
                document.getElementById('project-features').value = project.features ? project.features.join(', ') : '';
                
                // GÃ¶rselleri global array'e yÃ¼kle
                if (project.images) {
                    window.currentProjectImages = [...project.images];
                }
            } else {
                // Yeni proje
                document.getElementById('project-status').value = 'ongoing';
            }
            
            window.renderImagePreviews(); // Ã–nizlemeleri gÃ¶ster

            modal.classList.remove('hidden', 'opacity-0');
            modal.classList.add('flex');
            setTimeout(() => modal.classList.add('opacity-100'), 10);
            document.body.classList.add('modal-open');
        }
        
        window.editProject = function(id) {
            const project = window.projects.find(p => p.id === id);
            if (project) {
                window.openProjectModal(project);
            } else {
                window.showMessage('Proje bulunamadÄ±.', 'bg-red-600');
            }
        }
        
        window.hideProjectModal = function() {
            const modal = document.getElementById('project-crud-modal');
            modal.classList.remove('opacity-100');
            modal.classList.add('opacity-0');
            document.body.classList.remove('modal-open');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        window.handleProjectSubmit = function(form) {
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => data[key] = value);
            
            // year alanÄ±nÄ± sayÄ±ya Ã§evir
            if (data.year) {
                data.year = parseInt(data.year, 10);
                if (isNaN(data.year)) {
                    data.year = null; // SayÄ± deÄŸilse null yap
                }
            } else {
                data.year = null;
            }

            window.saveProject(data);
        }
        
        // --- DRAG & DROP Ä°ÅLEMLERÄ° ---
        window.setupDragAndDrop = function() {
            const dropZone = document.getElementById('image-drop-zone');
            const fileInput = document.getElementById('file-input');
            if (!dropZone || !fileInput) return;

            // Drag enter/leave
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });

            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }

            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'), false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);
            });

            // Drop event
            dropZone.addEventListener('drop', handleDrop, false);

            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                handleFiles(files);
            }

            // File Input change
            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });

            function handleFiles(files) {
                [...files].forEach(window.processFile);
                // Input'u temizle ki aynÄ± dosyayÄ± tekrar seÃ§ebilsin
                fileInput.value = ''; 
            }
        };
        
        // URL'den gÃ¶rsel ekleme
        window.addUrlImage = function() {
            const urlInput = document.getElementById('url-input');
            const url = urlInput.value.trim();

            if (url && (url.startsWith('http://') || url.startsWith('https://'))) {
                window.currentProjectImages.push(url);
                window.renderImagePreviews();
                urlInput.value = '';
                window.showMessage("Harici gÃ¶rsel URL'i eklendi.", 'bg-blue-600');
            } else if (url) {
                window.showMessage("GeÃ§ersiz URL formatÄ±.", 'bg-red-600');
            }
        };

        // GÃ¶rseli kaldÄ±rma (Base64 veya URL)
        window.removeImage = function(index) {
            if (index > -1 && index < window.currentProjectImages.length) {
                window.currentProjectImages.splice(index, 1);
                window.renderImagePreviews();
                window.showMessage("GÃ¶rsel kaldÄ±rÄ±ldÄ±.", 'bg-yellow-600');
            }
        };
        
        // Base64'e dÃ¶nÃ¼ÅŸtÃ¼rme ve global array'e ekleme
        window.processFile = function(file) {
            if (!file.type.startsWith('image/')) {
                window.showMessage(`${file.name}: Sadece gÃ¶rsel dosyalarÄ± kabul edilir.`, 'bg-red-600');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                // Base64 string'in boyutunu kontrol et (1MB sÄ±nÄ±rÄ± iÃ§in kaba kontrol)
                if (e.target.result.length > 1300000) { // ~1MB
                    window.showMessage(`${file.name}: GÃ¶rsel boyutu Ã§ok bÃ¼yÃ¼k (1MB sÄ±nÄ±rÄ±). LÃ¼tfen daha kÃ¼Ã§Ã¼k bir dosya kullanÄ±n.`, 'bg-red-600', 8000);
                    return;
                }
                
                window.currentProjectImages.push(e.target.result);
                window.renderImagePreviews();
            };
            reader.onerror = (e) => {
                 window.showMessage(`${file.name}: Okuma hatasÄ±.`, 'bg-red-600');
            };
            reader.readAsDataURL(file);
        };
        
        // GÃ¶rsel Ã¶nizlemelerini render etme
        window.renderImagePreviews = function() {
            const container = document.getElementById('image-previews');
            if (!container) return;

            container.innerHTML = ''; // Ã–nceki Ã¶nizlemeleri temizle

            if (window.currentProjectImages.length === 0) {
                 container.innerHTML = '<p class="text-gray-500 text-sm italic p-2">YÃ¼klenen gÃ¶rseller burada gÃ¶rÃ¼necek.</p>';
                 return;
            }

            window.currentProjectImages.forEach((src, index) => {
                const isBase64 = src.startsWith('data:');
                const badge = isBase64 
                    ? '<span class="absolute bottom-0 left-0 bg-yellow-500 text-[10px] font-bold px-1 rounded-tr-lg text-slate-900">BASE64</span>'
                    : '<span class="absolute bottom-0 left-0 bg-blue-500 text-[10px] font-bold px-1 rounded-tr-lg text-white">URL</span>';
                
                const previewHtml = `
                    <div class="preview-image-container rounded-lg overflow-hidden shadow-md border border-slate-600">
                        <img src="${src}" alt="Ã–nizleme ${index + 1}" class="w-full h-full"
                            onerror="this.onerror=null; this.src='https://placehold.co/80x80/475569/FACC15?text=Hata';"
                        >
                        ${badge}
                        <button type="button" class="remove-image-btn" onclick="window.removeImage(${index})">&times;</button>
                    </div>
                `;
                container.innerHTML += previewHtml;
            });
        };
window.addEventListener('load', () => {
    window.renderProjects(); 
    window.setupMobileMenu();
    window.setupAdminAccess(); 
    window.setupDragAndDrop();
    // setupDragScroll kaldÄ±rÄ±ldÄ± - mobilde artÄ±k dikey grid var
    
    // âœ… EKLE: Ä°letiÅŸim bilgilerini ilk yÃ¼klemede de render et
    if (window.contactInfo && Object.keys(window.contactInfo).length > 0) {
        window.renderContactInfo();
    }
    
    lucide.createIcons();
    
    // âœ… Ana loading screen kaldÄ±rÄ±ldÄ± - artÄ±k gerekli deÄŸil
});
        
    </script>
</body>
</html>
        